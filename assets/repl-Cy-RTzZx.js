import{r as Te,j as he,c as mi,l as bh}from"./index-CTL7pjyo.js";const yh=Te.forwardRef(({className:n,...e},t)=>he.jsx("div",{ref:t,className:mi("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));yh.displayName="Card";const Ch=Te.forwardRef(({className:n,...e},t)=>he.jsx("div",{ref:t,className:mi("flex flex-col space-y-1.5 p-6",n),...e}));Ch.displayName="CardHeader";const Lh=Te.forwardRef(({className:n,...e},t)=>he.jsx("h3",{ref:t,className:mi("text-2xl font-semibold leading-none tracking-tight",n),...e}));Lh.displayName="CardTitle";const Mp=Te.forwardRef(({className:n,...e},t)=>he.jsx("p",{ref:t,className:mi("text-sm text-muted-foreground",n),...e}));Mp.displayName="CardDescription";const Ih=Te.forwardRef(({className:n,...e},t)=>he.jsx("div",{ref:t,className:mi("p-6 pt-0",n),...e}));Ih.displayName="CardContent";const Up=Te.forwardRef(({className:n,...e},t)=>he.jsx("div",{ref:t,className:mi("flex items-center p-6 pt-0",n),...e}));Up.displayName="CardFooter";function ji(){return ji=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ji.apply(null,arguments)}function Fp(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}class _e{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=li(this,e,t);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Bt.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=li(this,e,t);let i=[];return this.decompose(e,t,i,0),Bt.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new Wi(this),o=new Wi(e);for(let a=t,l=t;;){if(s.next(a),o.next(a),a=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(l+=s.value.length,s.done||l>=i)return!0}}iter(e=1){return new Wi(this,e)}iterRange(e,t=this.length){return new wh(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new xh(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?_e.empty:e.length<=32?new Ue(e):Bt.from(Ue.split(e,[]))}}class Ue extends _e{constructor(e,t=Bp(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let o=0;;o++){let a=this.text[o],l=s+a.length;if((t?i:l)>=e)return new Hp(s,l,i,a);s=l+1,i++}}decompose(e,t,i,s){let o=e<=0&&t>=this.length?this:new Ue(gl(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=i.pop(),l=Ks(o.text,a.text.slice(),0,o.length);if(l.length<=32)i.push(new Ue(l,a.length+o.length));else{let c=l.length>>1;i.push(new Ue(l.slice(0,c)),new Ue(l.slice(c)))}}else i.push(o)}replace(e,t,i){if(!(i instanceof Ue))return super.replace(e,t,i);[e,t]=li(this,e,t);let s=Ks(this.text,Ks(i.text,gl(this.text,0,e)),t),o=this.length+i.length-(t-e);return s.length<=32?new Ue(s,o):Bt.from(Ue.split(s,[]),o)}sliceString(e,t=this.length,i=`
`){[e,t]=li(this,e,t);let s="";for(let o=0,a=0;o<=t&&a<this.text.length;a++){let l=this.text[a],c=o+l.length;o>e&&a&&(s+=i),e<c&&t>o&&(s+=l.slice(Math.max(0,e-o),t-o)),o=c+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let o of e)i.push(o),s+=o.length+1,i.length==32&&(t.push(new Ue(i,s)),i=[],s=-1);return s>-1&&t.push(new Ue(i,s)),t}}class Bt extends _e{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let o=0;;o++){let a=this.children[o],l=s+a.length,c=i+a.lines-1;if((t?c:l)>=e)return a.lineInner(e,t,i,s);s=l+1,i=c+1}}decompose(e,t,i,s){for(let o=0,a=0;a<=t&&o<this.children.length;o++){let l=this.children[o],c=a+l.length;if(e<=c&&t>=a){let h=s&((a<=e?1:0)|(c>=t?2:0));a>=e&&c<=t&&!h?i.push(l):l.decompose(e-a,t-a,i,h)}a=c+1}}replace(e,t,i){if([e,t]=li(this,e,t),i.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e>=o&&t<=l){let c=a.replace(e-o,t-o,i),h=this.lines-a.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let f=this.children.slice();return f[s]=c,new Bt(f,this.length-(t-e)+i.length)}return super.replace(o,l,c)}o=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=li(this,e,t);let s="";for(let o=0,a=0;o<this.children.length&&a<=t;o++){let l=this.children[o],c=a+l.length;a>e&&o&&(s+=i),e<c&&t>a&&(s+=l.sliceString(e-a,t-a,i)),a=c+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Bt))return 0;let i=0,[s,o,a,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,o+=t){if(s==a||o==l)return i;let c=this.children[s],h=e.children[o];if(c!=h)return i+c.scanIdentical(h,t);i+=c.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let T of e)i+=T.lines;if(i<32){let T=[];for(let y of e)y.flatten(T);return new Ue(T,t)}let s=Math.max(32,i>>5),o=s<<1,a=s>>1,l=[],c=0,h=-1,f=[];function u(T){let y;if(T.lines>o&&T instanceof Bt)for(let b of T.children)u(b);else T.lines>a&&(c>a||!c)?(m(),l.push(T)):T instanceof Ue&&c&&(y=f[f.length-1])instanceof Ue&&T.lines+y.lines<=32?(c+=T.lines,h+=T.length+1,f[f.length-1]=new Ue(y.text.concat(T.text),y.length+1+T.length)):(c+T.lines>s&&m(),c+=T.lines,h+=T.length+1,f.push(T))}function m(){c!=0&&(l.push(f.length==1?f[0]:Bt.from(f,h)),h=-1,c=f.length=0)}for(let T of e)u(T);return m(),l.length==1?l[0]:new Bt(l,t)}}_e.empty=new Ue([""],0);function Bp(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ks(n,e,t=0,i=1e9){for(let s=0,o=0,a=!0;o<n.length&&s<=i;o++){let l=n[o],c=s+l.length;c>=t&&(c>i&&(l=l.slice(0,i-s)),s<t&&(l=l.slice(t-s)),a?(e[e.length-1]+=l,a=!1):e.push(l)),s=c+1}return e}function gl(n,e,t){return Ks(n,[""],e,t)}class Wi{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ue?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],o=this.offsets[i],a=o>>1,l=s instanceof Ue?s.text.length:s.children.length;if(a==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Ue){let c=s.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,c.length>Math.max(0,e))return this.value=e==0?c:t>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=s.children[a+(t<0?-1:0)];e>c.length?(e-=c.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(c),this.offsets.push(t>0?1:(c instanceof Ue?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class wh{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Wi(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class xh{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(_e.prototype[Symbol.iterator]=function(){return this.iter()},Wi.prototype[Symbol.iterator]=wh.prototype[Symbol.iterator]=xh.prototype[Symbol.iterator]=function(){return this});class Hp{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}function li(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}let ti="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<ti.length;n++)ti[n]+=ti[n-1];function Wp(n){for(let e=1;e<ti.length;e+=2)if(ti[e]>n)return ti[e-1]<=n;return!1}function ml(n){return n>=127462&&n<=127487}const El=8205;function Qe(n,e,t=!0,i=!0){return(t?vh:Gp)(n,e,i)}function vh(n,e,t){if(e==n.length)return e;e&&Dh(n.charCodeAt(e))&&kh(n.charCodeAt(e-1))&&e--;let i=Ke(n,e);for(e+=Nt(i);e<n.length;){let s=Ke(n,e);if(i==El||s==El||t&&Wp(s))e+=Nt(s),i=s;else if(ml(s)){let o=0,a=e-2;for(;a>=0&&ml(Ke(n,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function Gp(n,e,t){for(;e>0;){let i=vh(n,e-2,t);if(i<e)return i;e--}return 0}function Dh(n){return n>=56320&&n<57344}function kh(n){return n>=55296&&n<56320}function Ke(n,e){let t=n.charCodeAt(e);if(!kh(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return Dh(i)?(t-55296<<10)+(i-56320)+65536:t}function Da(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Nt(n){return n<65536?1:2}const xo=/\r\n?|\n/;var ot=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ot||(ot={}));class Vt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let o=this.sections[t++],a=this.sections[t++];a<0?(e(i,s,o),s+=o):s+=a,i+=o}}iterChangedRanges(e,t=!1){vo(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Vt(e)}composeDesc(e){return this.empty?e:e.empty?this:Ph(this,e)}mapDesc(e,t=!1){return e.empty?this:Do(this,e,t)}mapPos(e,t=-1,i=ot.Simple){let s=0,o=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],c=this.sections[a++],h=s+l;if(c<0){if(h>e)return o+(e-s);o+=l}else{if(i!=ot.Simple&&h>=e&&(i==ot.TrackDel&&s<e&&h>e||i==ot.TrackBefore&&s<e||i==ot.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==s||t<0?o:o+c;o+=c}s=h}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let o=this.sections[i++],a=this.sections[i++],l=s+o;if(a>=0&&s<=t&&l>=e)return s<e&&l>t?"cover":!0;s=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Vt(e)}static create(e){return new Vt(e)}}class Ge extends Vt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return vo(this,(t,i,s,o,a)=>e=e.replace(s,s+(i-t),a),!1),e}mapDesc(e,t=!1){return Do(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,o=0;s<t.length;s+=2){let a=t[s],l=t[s+1];if(l>=0){t[s]=l,t[s+1]=a;let c=s>>1;for(;i.length<c;)i.push(_e.empty);i.push(a?e.slice(o,o+a):_e.empty)}o+=a}return new Ge(t,i)}compose(e){return this.empty?e:e.empty?this:Ph(this,e,!0)}map(e,t=!1){return e.empty?this:Do(this,e,t,!0)}iterChanges(e,t=!1){vo(this,e,t)}get desc(){return Vt.create(this.sections)}filter(e){let t=[],i=[],s=[],o=new Xi(this);e:for(let a=0,l=0;;){let c=a==e.length?1e9:e[a++];for(;l<c||l==c&&o.len==0;){if(o.done)break e;let f=Math.min(o.len,c-l);nt(s,f,-1);let u=o.ins==-1?-1:o.off==0?o.ins:0;nt(t,f,u),u>0&&un(i,t,o.text),o.forward(f),l+=f}let h=e[a++];for(;l<h;){if(o.done)break e;let f=Math.min(o.len,h-l);nt(t,f,-1),nt(s,f,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(f),l+=f}}return{changes:new Ge(t,i),filtered:Vt.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],o=[],a=0,l=null;function c(f=!1){if(!f&&!s.length)return;a<t&&nt(s,t-a,-1);let u=new Ge(s,o);l=l?l.compose(u.map(l)):u,s=[],o=[],a=0}function h(f){if(Array.isArray(f))for(let u of f)h(u);else if(f instanceof Ge){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);c(),l=l?l.compose(f.map(l)):f}else{let{from:u,to:m=u,insert:T}=f;if(u>m||u<0||m>t)throw new RangeError(`Invalid change range ${u} to ${m} (in doc of length ${t})`);let y=T?typeof T=="string"?_e.of(T.split(i||xo)):T:_e.empty,b=y.length;if(u==m&&b==0)return;u<a&&c(),u>a&&nt(s,u-a,-1),nt(s,m-u,b),un(o,s,y),a=m}}return h(e),c(!l),l}static empty(e){return new Ge(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;i.length<s;)i.push(_e.empty);i[s]=_e.of(o.slice(1)),t.push(o[0],i[s].length)}}}return new Ge(t,i)}static createSet(e,t){return new Ge(e,t)}}function nt(n,e,t,i=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:e==0&&n[s]==0?n[s+1]+=t:i?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function un(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(_e.empty);n.push(t)}}function vo(n,e,t){let i=n.inserted;for(let s=0,o=0,a=0;a<n.sections.length;){let l=n.sections[a++],c=n.sections[a++];if(c<0)s+=l,o+=l;else{let h=s,f=o,u=_e.empty;for(;h+=l,f+=c,c&&i&&(u=u.append(i[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)l=n.sections[a++],c=n.sections[a++];e(s,h,o,f,u),s=h,o=f}}}function Do(n,e,t,i=!1){let s=[],o=i?[]:null,a=new Xi(n),l=new Xi(e);for(let c=-1;;)if(a.ins==-1&&l.ins==-1){let h=Math.min(a.len,l.len);nt(s,h,-1),a.forward(h),l.forward(h)}else if(l.ins>=0&&(a.ins<0||c==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!t))){let h=l.len;for(nt(s,l.ins,-1);h;){let f=Math.min(a.len,h);a.ins>=0&&c<a.i&&a.len<=f&&(nt(s,0,a.ins),o&&un(o,s,a.text),c=a.i),a.forward(f),h-=f}l.next()}else if(a.ins>=0){let h=0,f=a.len;for(;f;)if(l.ins==-1){let u=Math.min(f,l.len);h+=u,f-=u,l.forward(u)}else if(l.ins==0&&l.len<f)f-=l.len,l.next();else break;nt(s,h,c<a.i?a.ins:0),o&&c<a.i&&un(o,s,a.text),c=a.i,a.forward(a.len-f)}else{if(a.done&&l.done)return o?Ge.createSet(s,o):Vt.create(s);throw new Error("Mismatched change set lengths")}}function Ph(n,e,t=!1){let i=[],s=t?[]:null,o=new Xi(n),a=new Xi(e);for(let l=!1;;){if(o.done&&a.done)return s?Ge.createSet(i,s):Vt.create(i);if(o.ins==0)nt(i,o.len,0,l),o.next();else if(a.len==0&&!a.done)nt(i,0,a.ins,l),s&&un(s,i,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let c=Math.min(o.len2,a.len),h=i.length;if(o.ins==-1){let f=a.ins==-1?-1:a.off?0:a.ins;nt(i,c,f,l),s&&f&&un(s,i,a.text)}else a.ins==-1?(nt(i,o.off?0:o.len,c,l),s&&un(s,i,o.textBit(c))):(nt(i,o.off?0:o.len,a.off?0:a.ins,l),s&&!a.off&&un(s,i,a.text));l=(o.ins>c||a.ins>=0&&a.len>c)&&(l||i.length>h),o.forward2(c),a.forward(c)}}}}class Xi{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?_e.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?_e.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Pn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Pn(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return B.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return B.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return B.range(e.anchor,e.head)}static create(e,t,i){return new Pn(e,t,i)}}class B{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:B.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new B([this.main],0)}addRange(e,t=!0){return B.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,B.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new B(e.ranges.map(t=>Pn.fromJSON(t)),e.main)}static single(e,t=e){return new B([B.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=i:o.from<i)return B.normalized(e.slice(),t);i=o.to}return new B(e,t)}static cursor(e,t=0,i,s){return Pn.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let o=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Pn.create(t,e,48|o):Pn.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let i=e[t];e.sort((s,o)=>s.from-o.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let o=e[s],a=e[s-1];if(o.empty?o.from<=a.to:o.from<a.to){let l=a.from,c=Math.max(o.to,a.to);s<=t&&t--,e.splice(--s,2,o.anchor>o.head?B.range(c,l):B.range(l,c))}}return new B(e,t)}}function Mh(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let ka=0;class ne{constructor(e,t,i,s,o){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=ka++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ne(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Pa),!!e.static,e.enables)}of(e){return new $s([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $s(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $s(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Pa(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class $s{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=ka++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,o=this.id,a=e[o]>>1,l=this.type==2,c=!1,h=!1,f=[];for(let u of this.dependencies)u=="doc"?c=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||f.push(e[u.id]);return{create(u){return u.values[a]=i(u),1},update(u,m){if(c&&m.docChanged||h&&(m.docChanged||m.selection)||ko(u,f)){let T=i(u);if(l?!Tl(T,u.values[a],s):!s(T,u.values[a]))return u.values[a]=T,1}return 0},reconfigure:(u,m)=>{let T,y=m.config.address[o];if(y!=null){let b=lr(m,y);if(this.dependencies.every(E=>E instanceof ne?m.facet(E)===u.facet(E):E instanceof Ze?m.field(E,!1)==u.field(E,!1):!0)||(l?Tl(T=i(u),b,s):s(T=i(u),b)))return u.values[a]=b,0}else T=i(u);return u.values[a]=T,1}}}}function Tl(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function ko(n,e){let t=!1;for(let i of e)Gi(n,i)&1&&(t=!0);return t}function Vp(n,e,t){let i=t.map(c=>n[c.id]),s=t.map(c=>c.type),o=i.filter(c=>!(c&1)),a=n[e.id]>>1;function l(c){let h=[];for(let f=0;f<i.length;f++){let u=lr(c,i[f]);if(s[f]==2)for(let m of u)h.push(m);else h.push(u)}return e.combine(h)}return{create(c){for(let h of i)Gi(c,h);return c.values[a]=l(c),1},update(c,h){if(!ko(c,o))return 0;let f=l(c);return e.compare(f,c.values[a])?0:(c.values[a]=f,1)},reconfigure(c,h){let f=ko(c,i),u=h.config.facets[e.id],m=h.facet(e);if(u&&!f&&Pa(t,u))return c.values[a]=m,0;let T=l(c);return e.compare(T,m)?(c.values[a]=m,0):(c.values[a]=T,1)}}}const Sl=ne.define({static:!0});class Ze{constructor(e,t,i,s,o){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let t=new Ze(ka++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Sl).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let o=i.values[t],a=this.updateF(o,s);return this.compareF(o,a)?0:(i.values[t]=a,1)},reconfigure:(i,s)=>s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,Sl.of({field:this,create:e})]}get extension(){return this}}const Dn={lowest:4,low:3,default:2,high:1,highest:0};function yi(n){return e=>new Uh(e,n)}const Vn={highest:yi(Dn.highest),high:yi(Dn.high),default:yi(Dn.default),low:yi(Dn.low),lowest:yi(Dn.lowest)};class Uh{constructor(e,t){this.inner=e,this.prec=t}}class Mr{of(e){return new Po(this,e)}reconfigure(e){return Mr.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Po{constructor(e,t){this.compartment=e,this.inner=t}}class ar{constructor(e,t,i,s,o,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],o=Object.create(null),a=new Map;for(let m of qp(e,t,a))m instanceof Ze?s.push(m):(o[m.facet.id]||(o[m.facet.id]=[])).push(m);let l=Object.create(null),c=[],h=[];for(let m of s)l[m.id]=h.length<<1,h.push(T=>m.slot(T));let f=i?.config.facets;for(let m in o){let T=o[m],y=T[0].facet,b=f&&f[m]||[];if(T.every(E=>E.type==0))if(l[y.id]=c.length<<1|1,Pa(b,T))c.push(i.facet(y));else{let E=y.combine(T.map(I=>I.value));c.push(i&&y.compare(E,i.facet(y))?i.facet(y):E)}else{for(let E of T)E.type==0?(l[E.id]=c.length<<1|1,c.push(E.value)):(l[E.id]=h.length<<1,h.push(I=>E.dynamicSlot(I)));l[y.id]=h.length<<1,h.push(E=>Vp(E,y,T))}}let u=h.map(m=>m(l));return new ar(e,a,u,l,c,o)}}function qp(n,e,t){let i=[[],[],[],[],[]],s=new Map;function o(a,l){let c=s.get(a);if(c!=null){if(c<=l)return;let h=i[c].indexOf(a);h>-1&&i[c].splice(h,1),a instanceof Po&&t.delete(a.compartment)}if(s.set(a,l),Array.isArray(a))for(let h of a)o(h,l);else if(a instanceof Po){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(a.compartment)||a.inner;t.set(a.compartment,h),o(h,l)}else if(a instanceof Uh)o(a.inner,a.prec);else if(a instanceof Ze)i[l].push(a),a.provides&&o(a.provides,l);else if(a instanceof $s)i[l].push(a),a.facet.extensions&&o(a.facet.extensions,Dn.default);else{let h=a.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,l)}}return o(n,Dn.default),i.reduce((a,l)=>a.concat(l))}function Gi(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function lr(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Fh=ne.define(),Mo=ne.define({combine:n=>n.some(e=>e),static:!0}),Bh=ne.define({combine:n=>n.length?n[0]:void 0,static:!0}),Hh=ne.define(),Wh=ne.define(),Gh=ne.define(),Vh=ne.define({combine:n=>n.length?n[0]:!1});class qt{constructor(e,t){this.type=e,this.value=t}static define(){return new Yp}}class Yp{of(e){return new qt(this,e)}}class jp{constructor(e){this.map=e}of(e){return new ge(this,e)}}class ge{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ge(this.type,t)}is(e){return this.type==e}static define(e={}){return new jp(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let o=s.map(t);o&&i.push(o)}return i}}ge.reconfigure=ge.define();ge.appendConfig=ge.define();class Ve{constructor(e,t,i,s,o,a){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Mh(i,t.newLength),o.some(l=>l.type==Ve.time)||(this.annotations=o.concat(Ve.time.of(Date.now())))}static create(e,t,i,s,o,a){return new Ve(e,t,i,s,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ve.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ve.time=qt.define();Ve.userEvent=qt.define();Ve.addToHistory=qt.define();Ve.remote=qt.define();function Xp(n,e){let t=[];for(let i=0,s=0;;){let o,a;if(i<n.length&&(s==e.length||e[s]>=n[i]))o=n[i++],a=n[i++];else if(s<e.length)o=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<o?t.push(o,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function qh(n,e,t){var i;let s,o,a;return t?(s=e.changes,o=Ge.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(o):(i=n.selection)===null||i===void 0?void 0:i.map(s),effects:ge.mapEffects(n.effects,s).concat(ge.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Uo(n,e,t){let i=e.selection,s=ni(e.annotations);return e.userEvent&&(s=s.concat(Ve.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ge?e.changes:Ge.of(e.changes||[],t,n.facet(Bh)),selection:i&&(i instanceof B?i:B.single(i.anchor,i.head)),effects:ni(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Yh(n,e,t){let i=Uo(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let a=!!e[o].sequential;i=qh(i,Uo(n,e[o],a?i.changes.newLength:n.doc.length),a)}let s=Ve.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Kp(t?zp(s):s)}function zp(n){let e=n.startState,t=!0;for(let s of e.facet(Hh)){let o=s(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:Xp(t,o))}if(t!==!0){let s,o;if(t===!1)o=n.changes.invertedDesc,s=Ge.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}n=Ve.create(e,s,n.selection&&n.selection.map(o),ge.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let i=e.facet(Wh);for(let s=i.length-1;s>=0;s--){let o=i[s](n);o instanceof Ve?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Ve?n=o[0]:n=Yh(e,ni(o),!1)}return n}function Kp(n){let e=n.startState,t=e.facet(Gh),i=n;for(let s=t.length-1;s>=0;s--){let o=t[s](n);o&&Object.keys(o).length&&(i=qh(i,Uo(e,o,n.changes.newLength),!0))}return i==n?n:Ve.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const $p=[];function ni(n){return n==null?$p:Array.isArray(n)?n:[n]}var Pe=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Pe||(Pe={}));const Jp=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Fo;try{Fo=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Qp(n){if(Fo)return Fo.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Jp.test(t)))return!0}return!1}function Zp(n){return e=>{if(!/\S/.test(e))return Pe.Space;if(Qp(e))return Pe.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Pe.Word;return Pe.Other}}class Ee{constructor(e,t,i,s,o,a){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Gi(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Gi(this,i),lr(this,i)}update(...e){return Yh(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let l of e.effects)l.is(Mr.reconfigure)?(t&&(s=new Map,t.compartments.forEach((c,h)=>s.set(h,c)),t=null),s.set(l.value.compartment,l.value.extension)):l.is(ge.reconfigure)?(t=null,i=l.value):l.is(ge.appendConfig)&&(t=null,i=ni(i).concat(l.value));let o;t?o=e.startState.values.slice():(t=ar.resolve(i,s,this),o=new Ee(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let a=e.startState.facet(Mo)?e.newSelection:e.newSelection.asSingle();new Ee(t,e.newDoc,a,o,(l,c)=>c.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:B.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),o=[i.range],a=ni(i.effects);for(let l=1;l<t.ranges.length;l++){let c=e(t.ranges[l]),h=this.changes(c.changes),f=h.map(s);for(let m=0;m<l;m++)o[m]=o[m].map(f);let u=s.mapDesc(h,!0);o.push(c.range.map(u)),s=s.compose(f),a=ge.mapEffects(a,f).concat(ge.mapEffects(ni(c.effects),u))}return{changes:s,selection:B.create(o,t.mainIndex),effects:a}}changes(e=[]){return e instanceof Ge?e:Ge.of(e,this.doc.length,this.facet(Ee.lineSeparator))}toText(e){return _e.of(e.split(this.facet(Ee.lineSeparator)||xo))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Gi(this,t),lr(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Ze&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let a=i[o],l=e[o];s.push(a.init(c=>a.spec.fromJSON(l,c)))}}return Ee.create({doc:e.doc,selection:B.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=ar.resolve(e.extensions||[],new Map),i=e.doc instanceof _e?e.doc:_e.of((e.doc||"").split(t.staticFacet(Ee.lineSeparator)||xo)),s=e.selection?e.selection instanceof B?e.selection:B.single(e.selection.anchor,e.selection.head):B.single(0);return Mh(s,i.length),t.staticFacet(Mo)||(s=s.asSingle()),new Ee(t,i,s,t.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(Ee.tabSize)}get lineBreak(){return this.facet(Ee.lineSeparator)||`
`}get readOnly(){return this.facet(Vh)}phrase(e,...t){for(let i of this.facet(Ee.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>t.length?i:t[o-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let o of this.facet(Fh))for(let a of o(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return Zp(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-i,l=e-i;for(;a>0;){let c=Qe(t,a,!1);if(o(t.slice(c,a))!=Pe.Word)break;a=c}for(;l<s;){let c=Qe(t,l);if(o(t.slice(l,c))!=Pe.Word)break;l=c}return a==l?null:B.range(a+i,l+i)}}Ee.allowMultipleSelections=Mo;Ee.tabSize=ne.define({combine:n=>n.length?n[0]:4});Ee.lineSeparator=Bh;Ee.readOnly=Vh;Ee.phrases=ne.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(s=>n[s]==e[s])}});Ee.languageData=Fh;Ee.changeFilter=Hh;Ee.transactionFilter=Wh;Ee.transactionExtender=Gh;Mr.reconfigure=ge.define();function Yt(n,e,t={}){let i={};for(let s of n)for(let o of Object.keys(s)){let a=s[o],l=i[o];if(l===void 0)i[o]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(t,o))i[o]=t[o](l,a);else throw new Error("Config merge conflict for field "+o)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Fn{eq(e){return this==e}range(e,t=e){return Bo.create(e,t,this)}}Fn.prototype.startSide=Fn.prototype.endSide=0;Fn.prototype.point=!1;Fn.prototype.mapMode=ot.TrackDel;let Bo=class jh{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new jh(e,t,i)}};function Ho(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Ma{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let o=i?this.to:this.from;for(let a=s,l=o.length;;){if(a==l)return a;let c=a+l>>1,h=o[c]-e||(i?this.value[c].endSide:this.value[c].startSide)-t;if(c==a)return h>=0?a:l;h>=0?l=c:a=c+1}}between(e,t,i,s){for(let o=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,o);o<a;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let i=[],s=[],o=[],a=-1,l=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],f=this.from[c]+e,u=this.to[c]+e,m,T;if(f==u){let y=t.mapPos(f,h.startSide,h.mapMode);if(y==null||(m=T=y,h.startSide!=h.endSide&&(T=t.mapPos(f,h.endSide),T<m)))continue}else if(m=t.mapPos(f,h.startSide),T=t.mapPos(u,h.endSide),m>T||m==T&&h.startSide>0&&h.endSide<=0)continue;(T-m||h.endSide-h.startSide)<0||(a<0&&(a=m),h.point&&(l=Math.max(l,T-m)),i.push(h),s.push(m-a),o.push(T-a))}return{mapped:i.length?new Ma(s,o,i,l):null,pos:a}}}class Ae{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Ae(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:o=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(Ho)),this.isEmpty)return t.length?Ae.of(t):this;let l=new Xh(this,null,-1).goto(0),c=0,h=[],f=new Tn;for(;l.value||c<t.length;)if(c<t.length&&(l.from-t[c].from||l.startSide-t[c].value.startSide)>=0){let u=t[c++];f.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(c==t.length||this.chunkEnd(l.chunkIndex)<t[c].from)&&(!a||s>this.chunkEnd(l.chunkIndex)||o<this.chunkPos[l.chunkIndex])&&f.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||s>l.to||o<l.from||a(l.from,l.to,l.value))&&(f.addInner(l.from,l.to,l.value)||h.push(Bo.create(l.from,l.to,l.value))),l.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?Ae.empty:this.nextLayer.update({add:h,filter:a,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],c=this.chunk[a],h=e.touchesRange(l,l+c.length);if(h===!1)s=Math.max(s,c.maxPoint),t.push(c),i.push(e.mapPos(l));else if(h===!0){let{mapped:f,pos:u}=c.map(l,e);f&&(s=Math.max(s,f.maxPoint),t.push(f),i.push(u))}}let o=this.nextLayer.map(e);return t.length==0?o:new Ae(i,t,o||Ae.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],a=this.chunk[s];if(t>=o&&e<=o+a.length&&a.between(o,e-o,t-o,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return zi.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return zi.from(e).goto(t)}static compare(e,t,i,s,o=-1){let a=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=o),c=Al(a,l,i),h=new Ci(a,c,o),f=new Ci(l,c,o);i.iterGaps((u,m,T)=>Rl(h,u,f,m,T,s)),i.empty&&i.length==0&&Rl(h,0,f,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=999999999);let o=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),a=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let l=Al(o,a),c=new Ci(o,l,0).goto(i),h=new Ci(a,l,0).goto(i);for(;;){if(c.to!=h.to||!Wo(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>s)return!0;c.next(),h.next()}}static spans(e,t,i,s,o=-1){let a=new Ci(e,null,o).goto(t),l=t,c=a.openStart;for(;;){let h=Math.min(a.to,i);if(a.point){let f=a.activeForPoint(a.to),u=a.pointFrom<t?f.length+1:a.point.startSide<0?f.length:Math.min(f.length,c);s.point(l,h,a.point,f,u,a.pointRank),c=Math.min(a.openEnd(h),f.length)}else h>l&&(s.span(l,h,a.active,c),c=a.openEnd(h));if(a.to>i)return c+(a.point&&a.to>i?1:0);l=a.to,a.next()}}static of(e,t=!1){let i=new Tn;for(let s of e instanceof Bo?[e]:t?eg(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Ae.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Ae.empty;s=s.nextLayer)t=new Ae(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Ae.empty=new Ae([],[],null,-1);function eg(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(Ho(e,i)>0)return n.slice().sort(Ho);e=i}return n}Ae.empty.nextLayer=Ae.empty;class Tn{finishChunk(e){this.chunks.push(new Ma(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Tn)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ae.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ae.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Al(n,e,t){let i=new Map;for(let o of n)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&i.set(o.chunk[a],o.chunkPos[a]);let s=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let l=i.get(o.chunk[a]);l!=null&&(t?t.mapPos(l):l)==o.chunkPos[a]&&!t?.touchesRange(l,l+o.chunk[a].length)&&s.add(o.chunk[a])}return s}class Xh{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class zi{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&s.push(new Xh(a,t,i,o));return s.length==1?s[0]:new zi(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Jr(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Jr(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Jr(this.heap,0)}}}function Jr(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let s=n[i];if(i+1<n.length&&s.compare(n[i+1])>=0&&(s=n[i+1],i++),t.compare(s)<0)break;n[i]=t,n[e]=s,e=i}}class Ci{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zi.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ys(this.active,e),ys(this.activeTo,e),ys(this.activeRank,e),this.minActive=_l(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Cs(this.active,t,i),Cs(this.activeTo,t,s),Cs(this.activeRank,t,o),e&&Cs(e,t,this.cursor.from),this.minActive=_l(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&ys(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Rl(n,e,t,i,s,o){n.goto(e),t.goto(i);let a=i+s,l=i,c=i-e;for(;;){let h=n.to+c-t.to||n.endSide-t.endSide,f=h<0?n.to+c:t.to,u=Math.min(f,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Wo(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(l,u,n.point,t.point):u>l&&!Wo(n.active,t.active)&&o.compareRange(l,u,n.active,t.active),f>a)break;l=f,h<=0&&n.next(),h>=0&&t.next()}}function Wo(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function ys(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function Cs(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function _l(n,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||n[s].endSide-n[t].endSide)<0&&(t=s,i=e[s]);return t}function Ei(n,e,t=n.length){let i=0;for(let s=0;s<t;)n.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Qe(n,s));return i}function Go(n,e,t,i){for(let s=0,o=0;;){if(o>=e)return s;if(s==n.length)break;o+=n.charCodeAt(s)==9?t-o%t:1,s=Qe(n,s)}return i===!0?-1:n.length}const Vo="ͼ",Ol=typeof Symbol>"u"?"__"+Vo:Symbol.for(Vo),qo=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Sn{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,l,c,h){let f=[],u=/^@(\w+)\b/.exec(a[0]),m=u&&u[1]=="keyframes";if(u&&l==null)return c.push(a[0]+";");for(let T in l){let y=l[T];if(/&/.test(T))o(T.split(/,\s*/).map(b=>a.map(E=>b.replace(/&/,E))).reduce((b,E)=>b.concat(E)),y,c);else if(y&&typeof y=="object"){if(!u)throw new RangeError("The value of a property ("+T+") should be a primitive value.");o(s(T),y,f,m)}else y!=null&&f.push(T.replace(/_.*/,"").replace(/[A-Z]/g,b=>"-"+b.toLowerCase())+": "+y+";")}(f.length||m)&&c.push((i&&!u&&!h?a.map(i):a).join(", ")+" {"+f.join(" ")+"}")}for(let a in e)o(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Nl[Ol]||1;return Nl[Ol]=e+1,Vo+e.toString(36)}static mount(e,t,i){let s=e[qo],o=i&&i.nonce;s?o&&s.setNonce(o):s=new tg(e,o),s.mount(Array.isArray(t)?t:[t],e)}}let bl=new Map;class tg{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=bl.get(i);if(o)return e[qo]=o;this.sheet=new s.CSSStyleSheet,bl.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[qo]=this}mount(e,t){let i=this.sheet,s=0,o=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.modules.indexOf(l);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,l),i)for(let h=0;h<l.rules.length;h++)i.insertRule(l.rules[h],s++)}else{for(;o<c;)s+=this.modules[o++].rules.length;s+=l.rules.length,o++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let c=0;c<this.modules.length;c++)a+=this.modules[c].getRules()+`
`;this.styleTag.textContent=a;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var An={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ki={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ng=typeof navigator<"u"&&/Mac/.test(navigator.platform),ig=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $e=0;$e<10;$e++)An[48+$e]=An[96+$e]=String($e);for(var $e=1;$e<=24;$e++)An[$e+111]="F"+$e;for(var $e=65;$e<=90;$e++)An[$e]=String.fromCharCode($e+32),Ki[$e]=String.fromCharCode($e);for(var Qr in An)Ki.hasOwnProperty(Qr)||(Ki[Qr]=An[Qr]);function sg(n){var e=ng&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||ig&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ki:An)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function $i(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Yo(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function rg(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Js(n,e){if(!e.anchorNode)return!1;try{return Yo(n,e.anchorNode)}catch{return!1}}function ci(n){return n.nodeType==3?Hn(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Vi(n,e,t,i){return t?yl(n,e,t,i,-1)||yl(n,e,t,i,1):!1}function Bn(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function cr(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function yl(n,e,t,i,s){for(;;){if(n==t&&e==i)return!0;if(e==(s<0?0:Zt(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Bn(n)+(s<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Zt(n):0}else return!1}}function Zt(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function cs(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function og(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function zh(n,e){let t=e.width/n.offsetWidth,i=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-n.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function ag(n,e,t,i,s,o,a,l){let c=n.ownerDocument,h=c.defaultView||window;for(let f=n,u=!1;f&&!u;)if(f.nodeType==1){let m,T=f==c.body,y=1,b=1;if(T)m=og(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(u=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let D=f.getBoundingClientRect();({scaleX:y,scaleY:b}=zh(f,D)),m={left:D.left,right:D.left+f.clientWidth*y,top:D.top,bottom:D.top+f.clientHeight*b}}let E=0,I=0;if(s=="nearest")e.top<m.top?(I=-(m.top-e.top+a),t>0&&e.bottom>m.bottom+I&&(I=e.bottom-m.bottom+I+a)):e.bottom>m.bottom&&(I=e.bottom-m.bottom+a,t<0&&e.top-I<m.top&&(I=-(m.top+I-e.top+a)));else{let D=e.bottom-e.top,Y=m.bottom-m.top;I=(s=="center"&&D<=Y?e.top+D/2-Y/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-Y+a)-m.top}if(i=="nearest"?e.left<m.left?(E=-(m.left-e.left+o),t>0&&e.right>m.right+E&&(E=e.right-m.right+E+o)):e.right>m.right&&(E=e.right-m.right+o,t<0&&e.left<m.left+E&&(E=-(m.left+E-e.left+o))):E=(i=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:i=="start"==l?e.left-o:e.right-(m.right-m.left)+o)-m.left,E||I)if(T)h.scrollBy(E,I);else{let D=0,Y=0;if(I){let V=f.scrollTop;f.scrollTop+=I/b,Y=(f.scrollTop-V)*b}if(E){let V=f.scrollLeft;f.scrollLeft+=E/y,D=(f.scrollLeft-V)*y}e={left:e.left-D,top:e.top-Y,right:e.right-D,bottom:e.bottom-Y},D&&Math.abs(D-E)<1&&(i="nearest"),Y&&Math.abs(Y-I)<1&&(s="nearest")}if(T)break;f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function lg(n){let e=n.ownerDocument,t,i;for(let s=n.parentNode;s&&!(s==e.body||t&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:i}}class cg{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?Zt(t):0),i,Math.min(e.focusOffset,i?Zt(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let Yn=null;function Kh(n){if(n.setActive)return n.setActive();if(Yn)return n.focus(Yn);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Yn==null?{get preventScroll(){return Yn={preventScroll:!0},!0}}:void 0),!Yn){Yn=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],o=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let Cl;function Hn(n,e,t=e){let i=Cl||(Cl=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function ii(n,e,t,i){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,n.dispatchEvent(o);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function hg(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function $h(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function fg(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,Zt(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=Zt(t))}else{if(t==n)return!0;i=Bn(t),t=t.parentNode}}function Jh(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Qh(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=Zt(t)}else if(t.parentNode&&!cr(t))i=Bn(t),t=t.parentNode;else return null}}function Zh(n,e){for(let t=n,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!cr(t))i=Bn(t)+1,t=t.parentNode;else return null}}class it{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new it(e.parentNode,Bn(e),t)}static after(e,t){return new it(e.parentNode,Bn(e)+1,t)}}const Ua=[];class be{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,s=null,o;for(let a of this.children){if(a.flags&7){if(!a.dom&&(o=s?s.nextSibling:i.firstChild)){let l=be.get(o);(!l||!l.parent&&l.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,t),a.flags&=-8}if(o=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&o!=a.dom&&(t.written=!0),a.dom.parentNode==i)for(;o&&o!=a.dom;)o=Ll(o);else i.insertBefore(a.dom,o);s=a.dom}for(o=s?s.nextSibling:i.firstChild,o&&t&&t.node==i&&(t.written=!0);o;)o=Ll(o)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=Zt(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;s==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?s=-1:s=1),e=o}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!be.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,o=0;;s++){let a=this.children[s];if(a.dom==i)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,o=-1,a=-1,l=-1;for(let c=0,h=i,f=i;c<this.children.length;c++){let u=this.children[c],m=h+u.length;if(h<e&&m>t)return u.domBoundsAround(e,t,h);if(m>=e&&s==-1&&(s=c,o=h),h>t&&u.dom.parentNode==this.dom){a=c,l=f;break}f=m,h=m+u.breakAfter}return{from:o,to:l<0?i+this.length:l,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Ua){this.markDirty();for(let s=e;s<t;s++){let o=this.children[s];o.parent==this&&i.indexOf(o)<0&&o.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ef(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,s,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}be.prototype.breakAfter=0;function Ll(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ef{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function tf(n,e,t,i,s,o,a,l,c){let{children:h}=n,f=h.length?h[e]:null,u=o.length?o[o.length-1]:null,m=u?u.breakAfter:a;if(!(e==i&&f&&!a&&!m&&o.length<2&&f.merge(t,s,o.length?u:null,t==0,l,c))){if(i<h.length){let T=h[i];T&&(s<T.length||T.breakAfter&&u?.breakAfter)?(e==i&&(T=T.split(s),s=0),!m&&u&&T.merge(0,s,u,!0,0,c)?o[o.length-1]=T:((s||T.children.length&&!T.children[0].length)&&T.merge(0,s,null,!1,0,c),o.push(T))):T?.breakAfter&&(u?u.breakAfter=1:a=1),i++}for(f&&(f.breakAfter=a,t>0&&(!a&&o.length&&f.merge(t,f.length,o[0],!1,l,0)?f.breakAfter=o.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,l,0),e++));e<i&&o.length;)if(h[i-1].become(o[o.length-1]))i--,o.pop(),c=o.length?0:l;else if(h[e].become(o[0]))e++,o.shift(),l=o.length?0:c;else break;!o.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,c)&&e--,(e<i||o.length)&&n.replaceChildren(e,i,o)}}function nf(n,e,t,i,s,o){let a=n.childCursor(),{i:l,off:c}=a.findPos(t,1),{i:h,off:f}=a.findPos(e,-1),u=e-t;for(let m of i)u+=m.length;n.length+=u,tf(n,h,f,l,c,i,0,s,o)}let ft=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},jo=typeof document<"u"?document:{documentElement:{style:{}}};const Xo=/Edge\/(\d+)/.exec(ft.userAgent),sf=/MSIE \d/.test(ft.userAgent),zo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ft.userAgent),Ur=!!(sf||zo||Xo),Il=!Ur&&/gecko\/(\d+)/i.test(ft.userAgent),Zr=!Ur&&/Chrome\/(\d+)/.exec(ft.userAgent),wl="webkitFontSmoothing"in jo.documentElement.style,rf=!Ur&&/Apple Computer/.test(ft.vendor),xl=rf&&(/Mobile\/\w+/.test(ft.userAgent)||ft.maxTouchPoints>2);var te={mac:xl||/Mac/.test(ft.platform),windows:/Win/.test(ft.platform),linux:/Linux|X11/.test(ft.platform),ie:Ur,ie_version:sf?jo.documentMode||6:zo?+zo[1]:Xo?+Xo[1]:0,gecko:Il,gecko_version:Il?+(/Firefox\/(\d+)/.exec(ft.userAgent)||[0,0])[1]:0,chrome:!!Zr,chrome_version:Zr?+Zr[1]:0,ios:xl,android:/Android\b/.test(ft.userAgent),webkit:wl,safari:rf,webkit_version:wl?+(/\bAppleWebKit\/(\d+)/.exec(ft.userAgent)||[0,0])[1]:0,tabSize:jo.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const ug=256;class xt extends be{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof xt)||this.length-(t-e)+i.length>ug||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new xt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new it(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return dg(this.dom,e,t)}}class en extends be{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if($h(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,o,a){return i&&(!(i instanceof en&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&a<=0)?!1:(nf(this,e,t,i?i.children.slice():[],o-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,o=0;for(let l of this.children){let c=i+l.length;c>e&&t.push(i<e?l.split(e-i):l),s<0&&i>=e&&(s=o),i=c,o++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new en(this.mark,t,a)}domAtPos(e){return of(this,e)}coordsAt(e,t){return lf(this,e,t)}}function dg(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let s=e,o=e,a=0;e==0&&t<0||e==i&&t>=0?te.chrome||te.gecko||(e?(s--,a=1):o<i&&(o++,a=-1)):t<0?s--:o<i&&o++;let l=Hn(n,s,o).getClientRects();if(!l.length)return null;let c=l[(a?a<0:t>=0)?0:l.length-1];return te.safari&&!a&&c.width==0&&(c=Array.prototype.find.call(l,h=>h.width)||c),a?cs(c,a<0):c||null}class dn extends be{static create(e,t,i){return new dn(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=dn.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,s,o,a){return i&&(!(i instanceof dn)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof dn&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return _e.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):_e.empty}domAtPos(e){return(this.length?e==0:this.side>0)?it.before(this.dom):it.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let s=this.dom.getClientRects(),o=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let l=a?s.length-1:0;o=s[l],!(e>0?l==0:l==s.length-1||o.top<o.bottom);l+=a?-1:1);return cs(o,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hi extends be{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof hi&&e.side==this.side}split(){return new hi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?it.before(this.dom):it.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return _e.empty}get isHidden(){return!0}}xt.prototype.children=dn.prototype.children=hi.prototype.children=Ua;function of(n,e){let t=n.dom,{children:i}=n,s=0;for(let o=0;s<i.length;s++){let a=i[s],l=o+a.length;if(!(l==o&&a.getSide()<=0)){if(e>o&&e<l&&a.dom.parentNode==t)return a.domAtPos(e-o);if(e<=o)break;o=l}}for(let o=s;o>0;o--){let a=i[o-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let o=s;o<i.length;o++){let a=i[o];if(a.dom.parentNode==t)return a.domAtPos(0)}return new it(t,0)}function af(n,e,t){let i,{children:s}=n;t>0&&e instanceof en&&s.length&&(i=s[s.length-1])instanceof en&&i.mark.eq(e.mark)?af(i,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function lf(n,e,t){let i=null,s=-1,o=null,a=-1;function l(h,f){for(let u=0,m=0;u<h.children.length&&m<=f;u++){let T=h.children[u],y=m+T.length;y>=f&&(T.children.length?l(T,f-m):(!o||o.isHidden&&t>0)&&(y>f||m==y&&T.getSide()>0)?(o=T,a=f-m):(m<f||m==y&&T.getSide()<0&&!T.isHidden)&&(i=T,s=f-m)),m=y}}l(n,e);let c=(t<0?i:o)||i||o;return c?c.coordsAt(Math.max(0,c==i?s:a),t):pg(n)}function pg(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=ci(e);return t[t.length-1]||null}function Ko(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const vl=Object.create(null);function hr(n,e,t){if(n==e)return!0;n||(n=vl),e||(e=vl);let i=Object.keys(n),s=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let o of i)if(o!=t&&(s.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function $o(n,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return i}function gg(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let i=n.attributes[t];e[i.name]=i.value}return e}class nn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var at=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(at||(at={}));class ae extends Fn{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new hs(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Rn(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:o,end:a}=cf(e,t);i=(o?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new Rn(e,i,s,t,e.widget||null,!0)}static line(e){return new fs(e)}static set(e,t=!1){return Ae.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ae.none=Ae.empty;class hs extends ae{constructor(e){let{start:t,end:i}=cf(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof hs&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&hr(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}hs.prototype.point=!1;class fs extends ae{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof fs&&this.spec.class==e.spec.class&&hr(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}fs.prototype.mapMode=ot.TrackBefore;fs.prototype.point=!0;class Rn extends ae{constructor(e,t,i,s,o,a){super(t,i,o,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?ot.TrackBefore:ot.TrackAfter:ot.TrackDel}get type(){return this.startSide!=this.endSide?at.WidgetRange:this.startSide<=0?at.WidgetBefore:at.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Rn&&mg(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Rn.prototype.point=!0;function cf(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t??e,end:i??e}}function mg(n,e){return n==e||!!(n&&e&&n.compare(e))}function Jo(n,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class He extends be{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,o,a){if(i){if(!(i instanceof He))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),nf(this,e,t,i?i.children.slice():[],o,a),!0}split(e){let t=new He;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){hr(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){af(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Ko(t,this.attrs||{})),i&&(this.attrs=Ko({class:i},this.attrs||{}))}domAtPos(e){return of(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&($h(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&($o(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&be.get(s)instanceof en;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=be.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!te.ios||!this.children.some(o=>o instanceof xt))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof xt)||/[^ -~]/.test(i.text))return null;let s=ci(i.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=lf(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,o=i.bottom-i.top;if(Math.abs(o-s.lineHeight)<2&&s.textHeight<o){let a=(o-s.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(e){return e instanceof He&&this.children.length==0&&e.children.length==0&&hr(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let o=e.children[i],a=s+o.length;if(a>=t){if(o instanceof He)return o;if(a>t)break}s=a+o.breakAfter}return null}}class Qt extends be{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,o,a){return i&&(!(i instanceof Qt)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?it.before(this.dom):it.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Qt(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Ua}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_e.empty}domBoundsAround(){return null}become(e){return e instanceof Qt&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Qo?null:cs(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Qo extends nn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class qi{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Qt&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new He),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ls(new hi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Qt)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Ls(new xt(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,o,a){if(this.disallowBlockEffectsFor[a]&&i instanceof Rn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Rn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Qt(i.widget||fi.block,l,i));else{let c=dn.create(i.widget||fi.inline,l,l?0:i.startSide),h=this.atCursorPos&&!c.isEditable&&o<=s.length&&(e<t||i.startSide>0),f=!c.isEditable&&(e<t||o>s.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),h&&(u.append(Ls(new hi(1),s),o),o=s.length+Math.max(0,o-s.length)),u.append(Ls(c,s),o),this.atCursorPos=f,this.pendingBuffer=f?e<t||o>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,i,s,o){let a=new qi(e,t,i,o);return a.openEnd=Ae.spans(s,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Ls(n,e){for(let t of e)n=new en(t,[n],n.length);return n}class fi extends nn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}fi.inline=new fi("span");fi.block=new fi("div");var De=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(De||(De={}));const Wn=De.LTR,Fa=De.RTL;function hf(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Eg=hf("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Tg=hf("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Zo=Object.create(null),Pt=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Zo[e]=t,Zo[t]=-e}function ff(n){return n<=247?Eg[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?Tg[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const Sg=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class pn{get dir(){return this.level%2?Fa:Wn}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,s){let o=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=t&&l.to>=t){if(l.level==i)return a;(o<0||(s!=0?s<0?l.from<t:l.to>t:e[o].level>l.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function uf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let i=n[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!uf(i.inner,s.inner))return!1}return!0}const Ne=[];function Ag(n,e,t,i,s){for(let o=0;o<=i.length;o++){let a=o?i[o-1].to:e,l=o<i.length?i[o].from:t,c=o?256:s;for(let h=a,f=c,u=c;h<l;h++){let m=ff(n.charCodeAt(h));m==512?m=f:m==8&&u==4&&(m=16),Ne[h]=m==4?2:m,m&7&&(u=m),f=m}for(let h=a,f=c,u=c;h<l;h++){let m=Ne[h];if(m==128)h<l-1&&f==Ne[h+1]&&f&24?m=Ne[h]=f:Ne[h]=256;else if(m==64){let T=h+1;for(;T<l&&Ne[T]==64;)T++;let y=h&&f==8||T<t&&Ne[T]==8?u==1?1:8:256;for(let b=h;b<T;b++)Ne[b]=y;h=T-1}else m==8&&u==1&&(Ne[h]=1);f=m,m&7&&(u=m)}}}function Rg(n,e,t,i,s){let o=s==1?2:1;for(let a=0,l=0,c=0;a<=i.length;a++){let h=a?i[a-1].to:e,f=a<i.length?i[a].from:t;for(let u=h,m,T,y;u<f;u++)if(T=Zo[m=n.charCodeAt(u)])if(T<0){for(let b=l-3;b>=0;b-=3)if(Pt[b+1]==-T){let E=Pt[b+2],I=E&2?s:E&4?E&1?o:s:0;I&&(Ne[u]=Ne[Pt[b]]=I),l=b;break}}else{if(Pt.length==189)break;Pt[l++]=u,Pt[l++]=m,Pt[l++]=c}else if((y=Ne[u])==2||y==1){let b=y==s;c=b?0:1;for(let E=l-3;E>=0;E-=3){let I=Pt[E+2];if(I&2)break;if(b)Pt[E+2]|=2;else{if(I&4)break;Pt[E+2]|=4}}}}}function _g(n,e,t,i){for(let s=0,o=i;s<=t.length;s++){let a=s?t[s-1].to:n,l=s<t.length?t[s].from:e;for(let c=a;c<l;){let h=Ne[c];if(h==256){let f=c+1;for(;;)if(f==l){if(s==t.length)break;f=t[s++].to,l=s<t.length?t[s].from:e}else if(Ne[f]==256)f++;else break;let u=o==1,m=(f<e?Ne[f]:i)==1,T=u==m?u?1:2:i;for(let y=f,b=s,E=b?t[b-1].to:n;y>c;)y==E&&(y=t[--b].from,E=b?t[b-1].to:n),Ne[--y]=T;c=f}else o=h,c++}}}function ea(n,e,t,i,s,o,a){let l=i%2?2:1;if(i%2==s%2)for(let c=e,h=0;c<t;){let f=!0,u=!1;if(h==o.length||c<o[h].from){let b=Ne[c];b!=l&&(f=!1,u=b==16)}let m=!f&&l==1?[]:null,T=f?i:i+1,y=c;e:for(;;)if(h<o.length&&y==o[h].from){if(u)break e;let b=o[h];if(!f)for(let E=b.to,I=h+1;;){if(E==t)break e;if(I<o.length&&o[I].from==E)E=o[I++].to;else{if(Ne[E]==l)break e;break}}if(h++,m)m.push(b);else{b.from>c&&a.push(new pn(c,b.from,T));let E=b.direction==Wn!=!(T%2);ta(n,E?i+1:i,s,b.inner,b.from,b.to,a),c=b.to}y=b.to}else{if(y==t||(f?Ne[y]!=l:Ne[y]==l))break;y++}m?ea(n,c,y,i+1,s,m,a):c<y&&a.push(new pn(c,y,T)),c=y}else for(let c=t,h=o.length;c>e;){let f=!0,u=!1;if(!h||c>o[h-1].to){let b=Ne[c-1];b!=l&&(f=!1,u=b==16)}let m=!f&&l==1?[]:null,T=f?i:i+1,y=c;e:for(;;)if(h&&y==o[h-1].to){if(u)break e;let b=o[--h];if(!f)for(let E=b.from,I=h;;){if(E==e)break e;if(I&&o[I-1].to==E)E=o[--I].from;else{if(Ne[E-1]==l)break e;break}}if(m)m.push(b);else{b.to<c&&a.push(new pn(b.to,c,T));let E=b.direction==Wn!=!(T%2);ta(n,E?i+1:i,s,b.inner,b.from,b.to,a),c=b.from}y=b.from}else{if(y==e||(f?Ne[y-1]!=l:Ne[y-1]==l))break;y--}m?ea(n,y,c,i+1,s,m,a):y<c&&a.push(new pn(y,c,T)),c=y}}function ta(n,e,t,i,s,o,a){let l=e%2?2:1;Ag(n,s,o,i,l),Rg(n,s,o,i,l),_g(s,o,i,l),ea(n,s,o,e,t,i,a)}function Og(n,e,t){if(!n)return[new pn(0,0,e==Fa?1:0)];if(e==Wn&&!t.length&&!Sg.test(n))return df(n.length);if(t.length)for(;n.length>Ne.length;)Ne[Ne.length]=256;let i=[],s=e==Wn?0:1;return ta(n,s,s,t,0,n.length,i),i}function df(n){return[new pn(0,n,0)]}let pf="";function Ng(n,e,t,i,s){var o;let a=i.head-n.from,l=pn.find(e,a,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),c=e[l],h=c.side(s,t);if(a==h){let m=l+=s?1:-1;if(m<0||m>=e.length)return null;c=e[l=m],a=c.side(!s,t),h=c.side(s,t)}let f=Qe(n.text,a,c.forward(s,t));(f<c.from||f>c.to)&&(f=h),pf=n.text.slice(Math.min(a,f),Math.max(a,f));let u=l==(s?e.length-1:0)?null:e[l+(s?1:-1)];return u&&f==h&&u.level+(s?0:1)<c.level?B.cursor(u.side(!s,t)+n.from,u.forward(s,t)?1:-1,u.level):B.cursor(f+n.from,c.forward(s,t)?-1:1,c.level)}function bg(n,e,t){for(let i=e;i<t;i++){let s=ff(n.charCodeAt(i));if(s==1)return Wn;if(s==2||s==4)return Fa}return Wn}const gf=ne.define(),mf=ne.define(),Ef=ne.define(),Tf=ne.define(),na=ne.define(),Sf=ne.define(),Af=ne.define(),Rf=ne.define({combine:n=>n.some(e=>e)}),_f=ne.define({combine:n=>n.some(e=>e)}),Of=ne.define();class si{constructor(e,t="nearest",i="nearest",s=5,o=5,a=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new si(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new si(B.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Is=ge.define({map:(n,e)=>n.map(e)}),Nf=ge.define();function dt(n,e,t){let i=n.facet(Tf);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const hn=ne.define({combine:n=>n.length?n[0]:!0});let yg=0;const Pi=ne.define();class Fe{constructor(e,t,i,s,o){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.extension=o(this)}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:o,decorations:a}=t||{};return new Fe(yg++,e,i,s,l=>{let c=[Pi.of(l)];return a&&c.push(Ji.of(h=>{let f=h.plugin(l);return f?a(f):ae.none})),o&&c.push(o(l)),c})}static fromClass(e,t){return Fe.define(i=>new e(i),t)}}class eo{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(dt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){dt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){dt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const bf=ne.define(),Ba=ne.define(),Ji=ne.define(),yf=ne.define(),Ha=ne.define(),Cf=ne.define();function Dl(n,e){let t=n.state.facet(Cf);if(!t.length)return t;let i=t.map(o=>o instanceof Function?o(n):o),s=[];return Ae.spans(i,e.from,e.to,{point(){},span(o,a,l,c){let h=o-e.from,f=a-e.from,u=s;for(let m=l.length-1;m>=0;m--,c--){let T=l[m].spec.bidiIsolate,y;if(T==null&&(T=bg(e.text,h,f)),c>0&&u.length&&(y=u[u.length-1]).to==h&&y.direction==T)y.to=f,u=y.inner;else{let b={from:h,to:f,direction:T,inner:[]};u.push(b),u=b.inner}}}}),s}const Lf=ne.define();function If(n){let e=0,t=0,i=0,s=0;for(let o of n.state.facet(Lf)){let a=o(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:i,bottom:s}}const Mi=ne.define();class yt{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new yt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,o=0,a=0,l=0;;s++){let c=s==e.length?null:e[s],h=a-l,f=c?c.fromB:1e9;for(;o<t.length&&t[o]<f;){let u=t[o],m=t[o+1],T=Math.max(l,u),y=Math.min(f,m);if(T<=y&&new yt(T+h,y+h,T,y).addToSet(i),m>f)break;o+=2}if(!c)return i;new yt(c.fromA,c.toA,c.fromB,c.toB).addToSet(i),a=c.toA,l=c.toB}}}class fr{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ge.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,a,l,c)=>s.push(new yt(o,a,l,c))),this.changedRanges=s}static create(e,t,i){return new fr(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class kl extends be{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ae.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new He],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new yt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:f})=>f<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!Dg(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?Lg(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:f}=this.hasComposition;i=new yt(h,f,e.changes.mapPos(h,-1),e.changes.mapPos(f,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(te.ie||te.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,l=this.updateDeco(),c=xg(a,l,e.changes);return i=yt.extendWithRanges(i,c),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=te.chrome||te.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Qt&&a.widget instanceof Qo&&o.push(a.dom);s.updateGaps(o)}updateChildren(e,t,i){let s=i?i.range.addToSet(e.slice()):e,o=this.childCursor(t);for(let a=s.length-1;;a--){let l=a>=0?s[a]:null;if(!l)break;let{fromA:c,toA:h,fromB:f,toB:u}=l,m,T,y,b;if(i&&i.range.fromB<u&&i.range.toB>f){let V=qi.build(this.view.state.doc,f,i.range.fromB,this.decorations,this.dynamicDecorationMap),W=qi.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);T=V.breakAtStart,y=V.openStart,b=W.openEnd;let U=this.compositionView(i);W.breakAtStart?U.breakAfter=1:W.content.length&&U.merge(U.length,U.length,W.content[0],!1,W.openStart,0)&&(U.breakAfter=W.content[0].breakAfter,W.content.shift()),V.content.length&&U.merge(0,0,V.content[V.content.length-1],!0,0,V.openEnd)&&V.content.pop(),m=V.content.concat(U).concat(W.content)}else({content:m,breakAtStart:T,openStart:y,openEnd:b}=qi.build(this.view.state.doc,f,u,this.decorations,this.dynamicDecorationMap));let{i:E,off:I}=o.findPos(h,1),{i:D,off:Y}=o.findPos(c,-1);tf(this,D,Y,E,I,m,T,y,b)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Nf)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new xt(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new en(s,[t],t.length);let i=new He;return i.append(t,0),i}fixCompositionDOM(e){let t=(o,a)=>{a.flags|=8|(a.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(a);let l=be.get(o);l&&l!=a&&(l.dom=null),a.setDOM(o)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];t(e.line,s);for(let o=e.marks.length-1;o>=-1;o--)i=s.childPos(i.off,1),s=s.children[i.i],t(o>=0?e.marks[o].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,o=!s&&Js(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||t||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?c:this.moveToLine(this.domAtPos(l.head));if(te.gecko&&l.empty&&!this.hasComposition&&Cg(c)){let u=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(u,c.node.childNodes[c.offset]||null)),c=h=new it(u,0),a=!0}let f=this.view.observer.selectionRange;(a||!f.focusNode||(!Vi(c.node,c.offset,f.anchorNode,f.anchorOffset)||!Vi(h.node,h.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,l))&&(this.view.observer.ignore(()=>{te.android&&te.chrome&&this.dom.contains(f.focusNode)&&vg(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=$i(this.view.root);if(u)if(l.empty){if(te.gecko){let m=Ig(c.node,c.offset);if(m&&m!=3){let T=(m==1?Qh:Zh)(c.node,c.offset);T&&(c=new it(T.node,T.offset))}}u.collapse(c.node,c.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(c.node,c.offset);try{u.extend(h.node,h.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([c,h]=[h,c]),m.setEnd(h.node,h.offset),m.setStart(c.node,c.offset),u.removeAllRanges(),u.addRange(m)}o&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new it(f.anchorNode,f.anchorOffset),this.impreciseHead=h.precise?null:new it(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Vi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=$i(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let a=He.find(this,t.head);if(!a)return;let l=a.posAtStart;if(t.head==l||t.head==l+a.length)return;let c=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!c||!h||c.bottom>h.top)return;let f=this.domAtPos(t.head+t.assoc);i.collapse(f.node,f.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(s,o)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let s=e.offset;!i&&s<t.childNodes.length;s++){let o=be.get(t.childNodes[s]);o instanceof He&&(i=o.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let o=be.get(t.childNodes[s]);o instanceof He&&(i=o.domAtPos(o.length))}return i?new it(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=be.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof He)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,s=0;for(let o=this.length,a=this.children.length-1;a>=0;a--){let l=this.children[a],c=o-l.breakAfter,h=c-l.length;if(c<e)break;if(h<=e&&(h<e||l.covers(-1))&&(c>e||l.covers(1))&&(!i||l instanceof He&&!(i instanceof He&&t>=0)))i=l,s=h;else if(i&&h==e&&c==e&&l instanceof Qt&&Math.abs(t)<2){if(l.deco.startSide<0)break;a&&(i=null)}o=h}return i?i.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),s=this.children[t];if(!(s instanceof He))return null;for(;s.children.length;){let{i:l,off:c}=s.childPos(i,1);for(;;l++){if(l==s.children.length)return null;if((s=s.children[l]).length)break}i=c}if(!(s instanceof xt))return null;let o=Qe(s.text,i);if(o==i)return null;let a=Hn(s.dom,i,o).getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(l==a.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,c=this.view.textDirection==De.LTR;for(let h=0,f=0;f<this.children.length;f++){let u=this.children[f],m=h+u.length;if(m>s)break;if(h>=i){let T=u.dom.getBoundingClientRect();if(t.push(T.height),a){let y=u.dom.lastChild,b=y?ci(y):[];if(b.length){let E=b[b.length-1],I=c?E.right-T.left:T.right-E.left;I>l&&(l=I,this.minWidth=o,this.minWidthFrom=h,this.minWidthTo=m)}}}h=m+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?De.RTL:De.LTR}measureTextSize(){for(let o of this.children)if(o instanceof He){let a=o.measureTextSize();if(a)return a}let e=document.createElement("div"),t,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=ci(e.firstChild)[0];t=e.getBoundingClientRect().height,i=o?o.width/27:7,s=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ef(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let o=s==t.viewports.length?null:t.viewports[s],a=o?o.from-1:this.length;if(a>i){let l=(t.lineBlockAt(a).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(ae.replace({widget:new Qo(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!o)break;i=o.to+1}return ae.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Ji).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,s=this.view.state.facet(yf).map((o,a)=>{let l=typeof o=="function";return l&&(i=!0),l?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ae.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Of))try{if(h(this.view,e.range,e))return!0}catch(f){dt(this.view.state,f,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let o=If(this.view),a={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:l,offsetHeight:c}=this.view.scrollDOM;ag(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==De.LTR)}}function Cg(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function wf(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let i=Qh(t.focusNode,t.focusOffset),s=Zh(t.focusNode,t.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let l=be.get(s.node);if(!l||l instanceof xt&&l.text!=s.node.nodeValue)o=s;else if(n.docView.lastCompositionAfterCursor){let c=be.get(i.node);!c||c instanceof xt&&c.text!=i.node.nodeValue||(o=s)}}if(n.docView.lastCompositionAfterCursor=o!=i,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function Lg(n,e,t){let i=wf(n,t);if(!i)return null;let{node:s,from:o,to:a}=i,l=s.nodeValue;if(/[\n\r]/.test(l)||n.state.doc.sliceString(i.from,i.to)!=l)return null;let c=e.invertedDesc,h=new yt(c.mapPos(o),c.mapPos(a),o,a),f=[];for(let u=s.parentNode;;u=u.parentNode){let m=be.get(u);if(m instanceof en)f.push({node:u,deco:m.mark});else{if(m instanceof He||u.nodeName=="DIV"&&u.parentNode==n.contentDOM)return{range:h,text:s,marks:f,line:u};if(u!=n.contentDOM)f.push({node:u,deco:new hs({inclusive:!0,attributes:gg(u),tagName:u.tagName.toLowerCase()})});else return null}}}function Ig(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let wg=class{constructor(){this.changes=[]}compareRange(e,t){Jo(e,t,this.changes)}comparePoint(e,t){Jo(e,t,this.changes)}};function xg(n,e,t){let i=new wg;return Ae.compare(n,e,t,i),i.changes}function vg(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Dg(n,e){let t=!1;return e&&n.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}function kg(n,e,t=1){let i=n.charCategorizer(e),s=n.doc.lineAt(e),o=e-s.from;if(s.length==0)return B.cursor(e);o==0?t=1:o==s.length&&(t=-1);let a=o,l=o;t<0?a=Qe(s.text,o,!1):l=Qe(s.text,o);let c=i(s.text.slice(a,l));for(;a>0;){let h=Qe(s.text,a,!1);if(i(s.text.slice(h,a))!=c)break;a=h}for(;l<s.length;){let h=Qe(s.text,l);if(i(s.text.slice(l,h))!=c)break;l=h}return B.range(a+s.from,l+s.from)}function Pg(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function Mg(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function to(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Pl(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Ml(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function ia(n,e,t){let i,s,o,a,l=!1,c,h,f,u;for(let y=n.firstChild;y;y=y.nextSibling){let b=ci(y);for(let E=0;E<b.length;E++){let I=b[E];s&&to(s,I)&&(I=Pl(Ml(I,s.bottom),s.top));let D=Pg(e,I),Y=Mg(t,I);if(D==0&&Y==0)return y.nodeType==3?Ul(y,e,t):ia(y,e,t);if(!i||a>Y||a==Y&&o>D){i=y,s=I,o=D,a=Y;let V=Y?t<I.top?-1:1:D?e<I.left?-1:1:0;l=!V||(V>0?E<b.length-1:E>0)}D==0?t>I.bottom&&(!f||f.bottom<I.bottom)?(c=y,f=I):t<I.top&&(!u||u.top>I.top)&&(h=y,u=I):f&&to(f,I)?f=Ml(f,I.bottom):u&&to(u,I)&&(u=Pl(u,I.top))}}if(f&&f.bottom>=t?(i=c,s=f):u&&u.top<=t&&(i=h,s=u),!i)return{node:n,offset:0};let m=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return Ul(i,m,t);if(l&&i.contentEditable!="false")return ia(i,m,t);let T=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:T}}function Ul(n,e,t){let i=n.nodeValue.length,s=-1,o=1e9,a=0;for(let l=0;l<i;l++){let c=Hn(n,l,l+1).getClientRects();for(let h=0;h<c.length;h++){let f=c[h];if(f.top==f.bottom)continue;a||(a=e-f.left);let u=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&u<o){let m=e>=(f.left+f.right)/2,T=m;if((te.chrome||te.gecko)&&Hn(n,l).getBoundingClientRect().left==f.right&&(T=!m),u<=0)return{node:n,offset:l+(T?1:0)};s=l+(T?1:0),o=u}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function xf(n,e,t,i=-1){var s,o;let a=n.contentDOM.getBoundingClientRect(),l=a.top+n.viewState.paddingTop,c,{docHeight:h}=n.viewState,{x:f,y:u}=e,m=u-l;if(m<0)return 0;if(m>h)return n.state.doc.length;for(let V=n.viewState.heightOracle.textHeight/2,W=!1;c=n.elementAtHeight(m),c.type!=at.Text;)for(;m=i>0?c.bottom+V:c.top-V,!(m>=0&&m<=h);){if(W)return t?null:0;W=!0,i=-i}u=l+m;let T=c.from;if(T<n.viewport.from)return n.viewport.from==0?0:t?null:Fl(n,a,c,f,u);if(T>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Fl(n,a,c,f,u);let y=n.dom.ownerDocument,b=n.root.elementFromPoint?n.root:y,E=b.elementFromPoint(f,u);E&&!n.contentDOM.contains(E)&&(E=null),E||(f=Math.max(a.left+1,Math.min(a.right-1,f)),E=b.elementFromPoint(f,u),E&&!n.contentDOM.contains(E)&&(E=null));let I,D=-1;if(E&&((s=n.docView.nearest(E))===null||s===void 0?void 0:s.isEditable)!=!1){if(y.caretPositionFromPoint){let V=y.caretPositionFromPoint(f,u);V&&({offsetNode:I,offset:D}=V)}else if(y.caretRangeFromPoint){let V=y.caretRangeFromPoint(f,u);V&&({startContainer:I,startOffset:D}=V,(!n.contentDOM.contains(I)||te.safari&&Ug(I,D,f)||te.chrome&&Fg(I,D,f))&&(I=void 0))}}if(!I||!n.docView.dom.contains(I)){let V=He.find(n.docView,T);if(!V)return m>c.top+c.height/2?c.to:c.from;({node:I,offset:D}=ia(V.dom,f,u))}let Y=n.docView.nearest(I);if(!Y)return null;if(Y.isWidget&&((o=Y.dom)===null||o===void 0?void 0:o.nodeType)==1){let V=Y.dom.getBoundingClientRect();return e.y<V.top||e.y<=V.bottom&&e.x<=(V.left+V.right)/2?Y.posAtStart:Y.posAtEnd}else return Y.localPosFromDOM(I,D)+Y.posAtStart}function Fl(n,e,t,i,s){let o=Math.round((i-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let l=n.viewState.heightOracle.textHeight,c=Math.floor((s-t.top-(n.defaultLineHeight-l)*.5)/l);o+=c*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+Go(a,o,n.state.tabSize)}function Ug(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let s=n.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Hn(n,i-1,i).getBoundingClientRect().left>t}function Fg(n,e,t){if(e!=0)return!1;for(let s=n;;){let o=s.parentNode;if(!o||o.nodeType!=1||o.firstChild!=s)return!1;if(o.classList.contains("cm-line"))break;s=o}let i=n.nodeType==1?n.getBoundingClientRect():Hn(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function sa(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==at.Text))return i}return t}function Bg(n,e,t,i){let s=sa(n,e.head),o=!i||s.type!=at.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let a=n.dom.getBoundingClientRect(),l=n.textDirectionAt(s.from),c=n.posAtCoords({x:t==(l==De.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(c!=null)return B.cursor(c,t?-1:1)}return B.cursor(t?s.to:s.from,t?-1:1)}function Bl(n,e,t,i){let s=n.state.doc.lineAt(e.head),o=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let l=e,c=null;;){let h=Ng(s,o,a,l,t),f=pf;if(!h){if(s.number==(t?n.state.doc.lines:1))return l;f=`
`,s=n.state.doc.line(s.number+(t?1:-1)),o=n.bidiSpans(s),h=n.visualLineSide(s,!t)}if(c){if(!c(f))return l}else{if(!i)return h;c=i(f)}l=h}}function Hg(n,e,t){let i=n.state.charCategorizer(e),s=i(t);return o=>{let a=i(o);return s==Pe.Space&&(s=a),s==a}}function Wg(n,e,t,i){let s=e.head,o=t?1:-1;if(s==(t?n.state.doc.length:0))return B.cursor(s,e.assoc);let a=e.goalColumn,l,c=n.contentDOM.getBoundingClientRect(),h=n.coordsAtPos(s,e.assoc||-1),f=n.documentTop;if(h)a==null&&(a=h.left-c.left),l=o<0?h.top:h.bottom;else{let T=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(c.right-c.left,n.defaultCharacterWidth*(s-T.from))),l=(o<0?T.top:T.bottom)+f}let u=c.left+a,m=i??n.viewState.heightOracle.textHeight>>1;for(let T=0;;T+=10){let y=l+(m+T)*o,b=xf(n,{x:u,y},!1,o);if(y<c.top||y>c.bottom||(o<0?b<s:b>s)){let E=n.docView.coordsForChar(b),I=!E||y<E.top?-1:1;return B.cursor(b,I,void 0,a)}}}function Qs(n,e,t){for(;;){let i=0;for(let s of n)s.between(e-1,e+1,(o,a,l)=>{if(e>o&&e<a){let c=i||t||(e-o<a-e?-1:1);e=c<0?o:a,i=c}});if(!i)return e}}function no(n,e,t){let i=Qs(n.state.facet(Ha).map(s=>s(n)),t.from,e.head>t.from?-1:1);return i==t.from?t:B.cursor(i,i<t.from?1:-1)}const Ui="￿";class Gg{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ee.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ui}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let o=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let l=be.get(s),c=be.get(a);(l&&c?l.breakAfter:(l?l.breakAfter:cr(s))||cr(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>o)&&this.lineBreak(),s=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,l;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(l=s.exec(t))&&(o=l.index,a=l[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=a-1);i=o+a}}readNode(e){if(e.cmIgnore)return;let t=be.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Vg(e,i.node,i.offset)?t:0))}}function Vg(n,e,t){for(;;){if(!e||t<Zt(e))return!1;if(e==n)return!0;t=Bn(e)+1,e=e.parentNode}}class Hl{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class qg{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=o||a?[]:Xg(e),c=new Gg(l,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=zg(l,this.bounds.from)}else{let l=e.observer.selectionRange,c=o&&o.node==l.focusNode&&o.offset==l.focusOffset||!Yo(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!Yo(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),f=e.viewport;if((te.ios||te.chrome)&&e.state.selection.main.empty&&c!=h&&(f.from>0||f.to<e.state.doc.length)){let u=Math.min(c,h),m=Math.max(c,h),T=f.from-u,y=f.to-m;(T==0||T==1||u==0)&&(y==0||y==-1||m==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=B.single(h,c)}}}function vf(n,e){let t,{newSel:i}=e,s=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:l}=e.bounds,c=s.from,h=null;(o===8||te.android&&e.text.length<l-a)&&(c=s.to,h="end");let f=jg(n.state.doc.sliceString(a,l,Ui),e.text,c-a,h);f&&(te.chrome&&o==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==Ui+Ui&&f.toB--,t={from:a+f.from,to:a+f.toA,insert:_e.of(e.text.slice(f.from,f.toB).split(Ui))})}else i&&(!n.hasFocus&&n.state.facet(hn)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:(te.mac||te.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:_e.of([" "])}):te.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=B.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:_e.of([" "])}),t)return Wa(n,t,i,o);if(i&&!i.main.eq(s)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:a,userEvent:l}),!0}else return!1}function Wa(n,e,t,i=-1){if(te.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(te.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ii(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&ii(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&ii(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,l=()=>a||(a=Yg(n,e,t));return n.state.facet(Sf).some(c=>c(n,e.from,e.to,o,l))||n.dispatch(l()),!0}function Yg(n,e,t){let i,s=n.state,o=s.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let l=o.from<e.from?s.sliceDoc(o.from,e.from):"",c=o.to>e.to?s.sliceDoc(e.to,o.to):"";i=s.replaceSelection(n.state.toText(l+e.insert.sliceString(0,void 0,n.state.lineBreak)+c))}else{let l=s.changes(e),c=t&&t.main.to<=l.newLength?t.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let h=n.state.sliceDoc(e.from,e.to),f,u=t&&wf(n,t.main.head);if(u){let y=e.insert.length-(e.to-e.from);f={from:u.from,to:u.to-y}}else f=n.state.doc.lineAt(o.head);let m=o.to-e.to,T=o.to-o.from;i=s.changeByRange(y=>{if(y.from==o.from&&y.to==o.to)return{changes:l,range:c||y.map(l)};let b=y.to-m,E=b-h.length;if(y.to-y.from!=T||n.state.sliceDoc(E,b)!=h||y.to>=f.from&&y.from<=f.to)return{range:y};let I=s.changes({from:E,to:b,insert:e.insert}),D=y.to-o.to;return{changes:I,range:c?B.range(Math.max(0,c.anchor+D),Math.max(0,c.head+D)):y.map(I)}})}else i={changes:l,selection:c&&s.selection.replaceRange(c)}}let a="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:a,scrollIntoView:!0})}function jg(n,e,t,i){let s=Math.min(n.length,e.length),o=0;for(;o<s&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&n.length==e.length)return null;let a=n.length,l=e.length;for(;a>0&&l>0&&n.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(i=="end"){let c=Math.max(0,o-Math.min(a,l));t-=a+c-o}if(a<o&&n.length<e.length){let c=t<=o&&t>=a?o-t:0;o-=c,l=o+(l-a),a=o}else if(l<o){let c=t<=o&&t>=l?o-t:0;o-=c,a=o+(a-l),l=o}return{from:o,toA:a,toB:l}}function Xg(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new Hl(t,i)),(s!=t||o!=i)&&e.push(new Hl(s,o))),e}function zg(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?B.single(t+e,i+e):null}class Kg{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,te.safari&&e.contentDOM.addEventListener("input",()=>null),te.gecko&&fm(e.contentDOM.ownerDocument)}handleEvent(e){!im(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=$g(e),i=this.handlers,s=this.view.contentDOM;for(let o in t)if(o!="scroll"){let a=!t[o].handlers.length,l=i[o];l&&a!=!l.handlers.length&&(s.removeEventListener(o,this.handleEvent),l=null),l||s.addEventListener(o,this.handleEvent,{passive:a})}for(let o in i)o!="scroll"&&!t[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&kf.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),te.android&&te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Df.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Jg.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ii(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:te.safari&&!te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Wl(n,e){return(t,i)=>{try{return e.call(n,i,t)}catch(s){dt(t.state,s)}}}function $g(n){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of n){let s=i.spec;if(s&&s.domEventHandlers)for(let o in s.domEventHandlers){let a=s.domEventHandlers[o];a&&t(o).handlers.push(Wl(i.value,a))}if(s&&s.domEventObservers)for(let o in s.domEventObservers){let a=s.domEventObservers[o];a&&t(o).observers.push(Wl(i.value,a))}}for(let i in vt)t(i).handlers.push(vt[i]);for(let i in Lt)t(i).observers.push(Lt[i]);return e}const Df=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Jg="dthko",kf=[16,17,18,20,91,92,224,225],ws=6;function xs(n){return Math.max(0,n)*.7+8}function Qg(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class Zg{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=lg(e.contentDOM),this.atoms=e.state.facet(Ha).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ee.allowMultipleSelections)&&em(e,t),this.dragging=nm(e,t)&&Uf(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Qg(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,s=0,o=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=If(this.view);e.clientX-c.left<=s+ws?t=-xs(s-e.clientX):e.clientX+c.right>=a-ws&&(t=xs(e.clientX-a)),e.clientY-c.top<=o+ws?i=-xs(o-e.clientY):e.clientY+c.bottom>=l-ws&&(i=xs(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],o=null;if(s.empty){let a=Qs(this.atoms,s.from,0);a!=s.from&&(o=B.cursor(a,-1))}else{let a=Qs(this.atoms,s.from,-1),l=Qs(this.atoms,s.to,1);(a!=s.from||l!=s.to)&&(o=B.range(s.from==s.anchor?a:l,s.from==s.head?a:l))}o&&(t||(t=e.ranges.slice()),t[i]=o)}return t?B.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function em(n,e){let t=n.state.facet(gf);return t.length?t[0](e):te.mac?e.metaKey:e.ctrlKey}function tm(n,e){let t=n.state.facet(mf);return t.length?t[0](e):te.mac?!e.altKey:!e.ctrlKey}function nm(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=$i(n.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let a=s[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function im(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=be.get(t))&&i.ignoreEvent(e))return!1;return!0}const vt=Object.create(null),Lt=Object.create(null),Pf=te.ie&&te.ie_version<15||te.ios&&te.webkit_version<604;function sm(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Mf(n,t.value)},50)}function Mf(n,e){let{state:t}=n,i,s=1,o=t.toText(e),a=o.lines==t.selection.ranges.length;if(ra!=null&&t.selection.ranges.every(c=>c.empty)&&ra==o.toString()){let c=-1;i=t.changeByRange(h=>{let f=t.doc.lineAt(h.from);if(f.from==c)return{range:h};c=f.from;let u=t.toText((a?o.line(s++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:u},range:B.cursor(h.from+u.length)}})}else a?i=t.changeByRange(c=>{let h=o.line(s++);return{changes:{from:c.from,to:c.to,insert:h.text},range:B.cursor(c.from+h.length)}}):i=t.replaceSelection(o);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Lt.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};vt.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Lt.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Lt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};vt.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of n.state.facet(Ef))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=am(n,e)),t){let i=!n.hasFocus;n.inputState.startMouseSelection(new Zg(n,e,t,i)),i&&n.observer.ignore(()=>{Kh(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function Gl(n,e,t,i){if(i==1)return B.cursor(e,t);if(i==2)return kg(n.state,e,t);{let s=He.find(n.docView,e),o=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:o.from,l=s?s.posAtEnd:o.to;return l<n.state.doc.length&&l==o.to&&l++,B.range(a,l)}}let Vl=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function rm(n,e,t,i){let s=He.find(n.docView,e);if(!s)return 1;let o=e-s.posAtStart;if(o==0)return 1;if(o==s.length)return-1;let a=s.coordsAt(o,-1);if(a&&Vl(t,i,a))return-1;let l=s.coordsAt(o,1);return l&&Vl(t,i,l)?1:a&&a.bottom>=i?-1:1}function ql(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:rm(n,t,e.clientX,e.clientY)}}const om=te.ie&&te.ie_version<=11;let Yl=null,jl=0,Xl=0;function Uf(n){if(!om)return n.detail;let e=Yl,t=Xl;return Yl=n,Xl=Date.now(),jl=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(jl+1)%3:1}function am(n,e){let t=ql(n,e),i=Uf(e),s=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),s=s.map(o.changes))},get(o,a,l){let c=ql(n,o),h,f=Gl(n,c.pos,c.bias,i);if(t.pos!=c.pos&&!a){let u=Gl(n,t.pos,t.bias,i),m=Math.min(u.from,f.from),T=Math.max(u.to,f.to);f=m<f.from?B.range(m,T):B.range(T,m)}return a?s.replaceRange(s.main.extend(f.from,f.to)):l&&i==1&&s.ranges.length>1&&(h=lm(s,c.pos))?h:l?s.addRange(f):B.create([f])}}}function lm(n,e){for(let t=0;t<n.ranges.length;t++){let{from:i,to:s}=n.ranges[t];if(i<=e&&s>=e)return B.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}vt.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let o=s.posAtStart,a=o+s.length;(o>=t.to||a<=t.from)&&(t=B.range(o,a))}}let{inputState:i}=n;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1};vt.dragend=n=>(n.inputState.draggedContent=null,!1);function zl(n,e,t,i){if(!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,a=i&&o&&tm(n,e)?{from:o.from,to:o.to}:null,l={from:s,insert:t},c=n.state.changes(a?[a,l]:l);n.focus(),n.dispatch({changes:c,selection:{anchor:c.mapPos(s,-1),head:c.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}vt.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,o=()=>{++s==t.length&&zl(n,e,i.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let l=new FileReader;l.onerror=o,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[a]=l.result),o()},l.readAsText(t[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return zl(n,e,i,!0),!0}return!1};vt.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Pf?null:e.clipboardData;return t?(Mf(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(sm(n),!1)};function cm(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function hm(n){let e=[],t=[],i=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:o}of n.selection.ranges){let a=n.doc.lineAt(o);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let ra=null;vt.copy=vt.cut=(n,e)=>{let{text:t,ranges:i,linewise:s}=hm(n.state);if(!t&&!s)return!1;ra=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=Pf?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",t),!0):(cm(n,t),!1)};const Ff=qt.define();function Bf(n,e){let t=[];for(let i of n.facet(Af)){let s=i(n,e);s&&t.push(s)}return t?n.update({effects:t,annotations:Ff.of(!0)}):null}function Hf(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Bf(n.state,e);t?n.dispatch(t):n.update([])}},10)}Lt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Hf(n)};Lt.blur=n=>{n.observer.clearSelectionRange(),Hf(n)};Lt.compositionstart=Lt.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Lt.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,te.chrome&&te.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Lt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};vt.beforeinput=(n,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let l=a[0],c=n.posAtDOM(l.startContainer,l.startOffset),h=n.posAtDOM(l.endContainer,l.endOffset);return Wa(n,{from:c,to:h,insert:n.state.toText(o)},null),!0}}let s;if(te.chrome&&te.android&&(s=Df.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return te.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),te.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Lt.compositionend(n,e),20),!1};const Kl=new Set;function fm(n){Kl.has(n)||(Kl.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const $l=["pre-wrap","normal","pre-line","break-spaces"];let ui=!1;function Jl(){ui=!1}class um{constructor(e){this.lineWrapping=e,this.doc=_e.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $l.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,o,a){let l=$l.indexOf(e)>-1,c=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=o,c){this.heightSamples={};for(let h=0;h<a.length;h++){let f=a[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return c}}class dm{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ht{constructor(e,t,i,s,o){this.from=e,this.length=t,this.top=i,this.height=s,this._content=o}get type(){return typeof this._content=="number"?at.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Rn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ht(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ve=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(ve||(ve={}));const Zs=.001;class lt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Zs&&(ui=!0),this.height=e)}replace(e,t,i){return lt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let o=this,a=i.doc;for(let l=s.length-1;l>=0;l--){let{fromA:c,toA:h,fromB:f,toB:u}=s[l],m=o.lineAt(c,ve.ByPosNoHeight,i.setDoc(t),0,0),T=m.to>=h?m:o.lineAt(h,ve.ByPosNoHeight,i,0,0);for(u+=T.to-h,h=T.to;l>0&&m.from<=s[l-1].toA;)c=s[l-1].fromA,f=s[l-1].fromB,l--,c<m.from&&(m=o.lineAt(c,ve.ByPosNoHeight,i,0,0));f+=m.from-c,c=m.from;let y=Ga.build(i.setDoc(a),e,f,u);o=ur(o,o.replace(c,h,y))}return o.updateHeight(i,0)}static empty(){return new St(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,o=0;for(;;)if(t==i)if(s>o*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,s-=l.size}else if(o>s*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,o-=l.size}else break;else if(s<o){let l=e[t++];l&&(s+=l.size)}else{let l=e[--i];l&&(o+=l.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new pm(lt.of(e.slice(0,t)),a,lt.of(e.slice(i)))}}function ur(n,e){return n==e?n:(n.constructor!=e.constructor&&(ui=!0),e)}lt.prototype.size=1;class Wf extends lt{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,s){return new Ht(s,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,s,o){return this.blockAt(0,i,s,o)}forEachLine(e,t,i,s,o,a){e<=o+this.length&&t>=o&&a(this.blockAt(0,i,s,o))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class St extends Wf{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,s){return new Ht(s,this.length,i,this.height,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof St||s instanceof ze&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof ze?s=new St(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):lt.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ze extends lt{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,o=s-i+1,a,l=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*o);a=c/o,this.length>o+1&&(l=(this.height-c)/(this.length-o-1))}else a=this.height/o;return{firstLine:i,lastLine:s,perLine:a,perChar:l}}blockAt(e,t,i,s){let{firstLine:o,lastLine:a,perLine:l,perChar:c}=this.heightMetrics(t,s);if(t.lineWrapping){let h=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),f=t.doc.lineAt(h),u=l+f.length*c,m=Math.max(i,e-u/2);return new Ht(f.from,f.length,m,u,0)}else{let h=Math.max(0,Math.min(a-o,Math.floor((e-i)/l))),{from:f,length:u}=t.doc.line(o+h);return new Ht(f,u,i+l*h,l,0)}}lineAt(e,t,i,s,o){if(t==ve.ByHeight)return this.blockAt(e,i,s,o);if(t==ve.ByPosNoHeight){let{from:T,to:y}=i.doc.lineAt(e);return new Ht(T,y-T,0,0,0)}let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,o),h=i.doc.lineAt(e),f=l+h.length*c,u=h.number-a,m=s+l*u+c*(h.from-o-u);return new Ht(h.from,h.length,Math.max(s,Math.min(m,s+this.height-f)),f,0)}forEachLine(e,t,i,s,o,a){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:l,perLine:c,perChar:h}=this.heightMetrics(i,o);for(let f=e,u=s;f<=t;){let m=i.doc.lineAt(f);if(f==e){let y=m.number-l;u+=c*y+h*(e-o-y)}let T=c+h*m.length;a(new Ht(m.from,m.length,u,T,0)),u+=T,f=m.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let o=i[i.length-1];o instanceof ze?i[i.length-1]=new ze(o.length+s):i.push(null,new ze(s-1))}if(e>0){let o=i[0];o instanceof ze?i[0]=new ze(e+o.length):i.unshift(new ze(e-1),null)}return lt.of(i)}decomposeLeft(e,t){t.push(new ze(e-1),null)}decomposeRight(e,t){t.push(null,new ze(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let o=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],l=Math.max(t,s.from),c=-1;for(s.from>t&&a.push(new ze(s.from-t-1).updateHeight(e,t));l<=o&&s.more;){let f=e.doc.lineAt(l).length;a.length&&a.push(null);let u=s.heights[s.index++];c==-1?c=u:Math.abs(u-c)>=Zs&&(c=-2);let m=new St(f,u);m.outdated=!1,a.push(m),l+=f+1}l<=o&&a.push(null,new ze(o-l).updateHeight(e,l));let h=lt.of(a);return(c<0||Math.abs(h.height-this.height)>=Zs||Math.abs(c-this.heightMetrics(e,t).perLine)>=Zs)&&(ui=!0),ur(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class pm extends lt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,o,s+this.left.length+this.break)}lineAt(e,t,i,s,o){let a=s+this.left.height,l=o+this.left.length+this.break,c=t==ve.ByHeight?e<a:e<l,h=c?this.left.lineAt(e,t,i,s,o):this.right.lineAt(e,t,i,a,l);if(this.break||(c?h.to<l:h.from>l))return h;let f=t==ve.ByPosNoHeight?ve.ByPosNoHeight:ve.ByPos;return c?h.join(this.right.lineAt(l,f,i,a,l)):this.left.lineAt(l,f,i,s,o).join(h)}forEachLine(e,t,i,s,o,a){let l=s+this.left.height,c=o+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,t,i,s,o,a),t>=c&&this.right.forEachLine(e,t,i,l,c,a);else{let h=this.lineAt(c,ve.ByPos,i,s,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,s,o,a),h.to>=e&&h.from<=t&&a(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,c,a)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let l of i)o.push(l);if(e>0&&Ql(o,a-1),t<this.length){let l=o.length;this.decomposeRight(t,o),Ql(o,l)}return lt.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?lt.of(this.break?[e,null,t]:[e,t]):(this.left=ur(this.left,e),this.right=ur(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:o,right:a}=this,l=t+o.length+this.break,c=null;return s&&s.from<=t+o.length&&s.more?c=o=o.updateHeight(e,t,i,s):o.updateHeight(e,t,i),s&&s.from<=l+a.length&&s.more?c=a=a.updateHeight(e,l,i,s):a.updateHeight(e,l,i),c?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Ql(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof ze&&(i=n[e+1])instanceof ze&&n.splice(e-1,3,new ze(t.length+1+i.length))}const gm=5;class Ga{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof St?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new St(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;i.block?this.addBlock(new Wf(a,s,i)):(a||o||s>=gm)&&this.addLineDeco(s,o,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new St(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new ze(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof St)return e;let t=new St(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof St)&&!this.isCovered?this.nodes.push(new St(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof St&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let o=new Ga(i,e);return Ae.spans(t,i,s,o,0),o.finish(i)}}function mm(n,e,t){let i=new Em;return Ae.compare(n,e,t,i,0),i.changes}class Em{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Jo(e,t,this.changes,5)}}function Tm(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,s=i.defaultView||window,o=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),l=Math.max(0,t.top),c=Math.min(s.innerHeight,t.bottom);for(let h=n.parentNode;h&&h!=i.body;)if(h.nodeType==1){let f=h,u=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&u.overflow!="visible"){let m=f.getBoundingClientRect();o=Math.max(o,m.left),a=Math.min(a,m.right),l=Math.max(l,m.top),c=Math.min(h==n.parentNode?s.innerHeight:c,m.bottom)}h=u.position=="absolute"||u.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-t.left,right:Math.max(o,a)-t.left,top:l-(t.top+e),bottom:Math.max(l,c)-(t.top+e)}}function Sm(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class io{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],o=t[i];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,t){return ae.replace({widget:new Am(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Am extends nn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Zl{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ec,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=De.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Ba).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new um(t),this.stateDeco=e.facet(Ji).filter(i=>typeof i!="function"),this.heightMap=lt.empty().applyChanges(this.stateDeco,_e.empty,this.heightOracle.setDoc(e.doc),[new yt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ae.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:o,to:a})=>s>=o&&s<=a)){let{from:o,to:a}=this.lineBlockAt(s);e.push(new vs(o,a))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?ec:new Va(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Fi(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ji).filter(f=>typeof f!="function");let s=e.changedRanges,o=yt.extendWithRanges(s,mm(i,this.stateDeco,e?e.changes:Ge.empty(this.state.doc.length))),a=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Jl(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||ui)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let c=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(_f)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?De.RTL:De.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),l=t.getBoundingClientRect(),c=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,f=0;if(l.width&&l.height){let{scaleX:V,scaleY:W}=zh(t,l);(V>.005&&Math.abs(this.scaleX-V)>.005||W>.005&&Math.abs(this.scaleY-W)>.005)&&(this.scaleX=V,this.scaleY=W,h|=8,a=c=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,m=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=m)&&(this.paddingTop=u,this.paddingBottom=m,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let T=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=T&&(this.scrollAnchorHeight=-1,this.scrollTop=T),this.scrolledToBottom=Jh(e.scrollDOM);let y=(this.printing?Sm:Tm)(t,this.paddingTop),b=y.top-this.pixelViewport.top,E=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let I=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(I!=this.inView&&(this.inView=I,I&&(c=!0)),!this.inView&&!this.scrollTarget)return 0;let D=l.width;if((this.contentDOMWidth!=D||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),c){let V=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(V)&&(a=!0),a||s.lineWrapping&&Math.abs(D-this.contentDOMWidth)>s.charWidth){let{lineHeight:W,charWidth:U,textHeight:q}=e.docView.measureTextSize();a=W>0&&s.refresh(o,W,U,q,D/U,V),a&&(e.docView.minWidth=0,h|=8)}b>0&&E>0?f=Math.max(b,E):b<0&&E<0&&(f=Math.min(b,E)),Jl();for(let W of this.viewports){let U=W.from==this.viewport.from?V:e.docView.measureVisibleLineHeights(W);this.heightMap=(a?lt.empty().applyChanges(this.stateDeco,_e.empty,this.heightOracle,[new yt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new dm(W.from,U))}ui&&(h|=2)}let Y=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Y&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||Y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,c=new vs(s.lineAt(a-i*1e3,ve.ByHeight,o,0,0).from,s.lineAt(l+(1-i)*1e3,ve.ByHeight,o,0,0).to);if(t){let{head:h}=t.range;if(h<c.from||h>c.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=s.lineAt(h,ve.ByPos,o,0,0),m;t.y=="center"?m=(u.top+u.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&h<c.from?m=u.top:m=u.bottom-f,c=new vs(s.lineAt(m-1e3/2,ve.ByHeight,o,0,0).from,s.lineAt(m+f+1e3/2,ve.ByHeight,o,0,0).to)}}return c}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new vs(this.heightMap.lineAt(i,ve.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,ve.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,ve.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,ve.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||s<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=l+Math.max(10,Math.min(i,250)))&&s>a-2*1e3&&o<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new io(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,o=s>>1,a=s<<1;if(this.defaultTextDirection!=De.LTR&&!i)return[];let l=[],c=(f,u,m,T)=>{if(u-f<o)return;let y=this.state.selection.main,b=[y.from];y.empty||b.push(y.to);for(let I of b)if(I>f&&I<u){c(f,I-10,m,T),c(I+10,u,m,T);return}let E=_m(e,I=>I.from>=m.from&&I.to<=m.to&&Math.abs(I.from-f)<o&&Math.abs(I.to-u)<o&&!b.some(D=>I.from<D&&I.to>D));if(!E){if(u<m.to&&t&&i&&t.visibleRanges.some(I=>I.from<=u&&I.to>=u)){let I=t.moveToLineBoundary(B.cursor(u),!1,!0).head;I>f&&(u=I)}E=new io(f,u,this.gapSize(m,f,u,T))}l.push(E)},h=f=>{if(f.length<a||f.type!=at.Text)return;let u=Rm(f.from,f.to,this.stateDeco);if(u.total<a)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,T,y;if(i){let b=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,E,I;if(m!=null){let D=ks(u,m),Y=((this.visibleBottom-this.visibleTop)/2+b)/f.height;E=D-Y,I=D+Y}else E=(this.visibleTop-f.top-b)/f.height,I=(this.visibleBottom-f.top+b)/f.height;T=Ds(u,E),y=Ds(u,I)}else{let b=u.total*this.heightOracle.charWidth,E=s*this.heightOracle.charWidth,I,D;if(m!=null){let Y=ks(u,m),V=((this.pixelViewport.right-this.pixelViewport.left)/2+E)/b;I=Y-V,D=Y+V}else I=(this.pixelViewport.left-E)/b,D=(this.pixelViewport.right+E)/b;T=Ds(u,I),y=Ds(u,D)}T>f.from&&c(f.from,T,f,u),y<f.to&&c(y,f.to,f,u)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return l}gapSize(e,t,i,s){let o=ks(s,i)-ks(s,t);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){io.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ae.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ae.spans(e,this.viewport.from,this.viewport.to,{span(s,o){t.push({from:s,to:o})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,o)=>s.from!=t[o].from||s.to!=t[o].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Fi(this.heightMap.lineAt(e,ve.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Fi(this.heightMap.lineAt(this.scaler.fromDOM(e),ve.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Fi(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vs{constructor(e,t){this.from=e,this.to=t}}function Rm(n,e,t){let i=[],s=n,o=0;return Ae.spans(t,n,e,{span(){},point(a,l){a>s&&(i.push({from:s,to:a}),o+=a-s),s=l}},20),s<e&&(i.push({from:s,to:e}),o+=e-s),{total:o,ranges:i}}function Ds({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let s=0;;s++){let{from:o,to:a}=e[s],l=a-o;if(i<=l)return o+i;i-=l}}function ks(n,e){let t=0;for(let{from:i,to:s}of n.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/n.total}function _m(n,e){for(let t of n)if(e(t))return t}const ec={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Va{constructor(e,t,i){let s=0,o=0,a=0;this.viewports=i.map(({from:l,to:c})=>{let h=t.lineAt(l,ve.ByPos,e,0,0).top,f=t.lineAt(c,ve.ByPos,e,0,0).bottom;return s+=f-h,{from:l,to:c,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let l of this.viewports)l.domTop=a+(l.top-o)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),o=l.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return s+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,s=o.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,s=o.domBottom}}eq(e){return e instanceof Va?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Fi(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new Ht(n.from,n.length,t,i-t,Array.isArray(n._content)?n._content.map(s=>Fi(s,e)):n._content)}const Ps=ne.define({combine:n=>n.join(" ")}),oa=ne.define({combine:n=>n.indexOf(!0)>-1}),aa=Sn.newName(),Gf=Sn.newName(),Vf=Sn.newName(),qf={"&light":"."+Gf,"&dark":"."+Vf};function la(n,e,t){return new Sn(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+i}})}const Om=la("."+aa,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},qf),Nm={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},so=te.ie&&te.ie_version<=11;class bm{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new cg,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(te.ie&&te.ie_version<=11||te.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(te.chrome&&te.chrome_version<126)&&(this.editContext=new Cm(e),e.state.facet(hn)&&(e.contentDOM.editContext=this.editContext.editContext)),so&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(hn)?i.root.activeElement!=this.dom:!Js(i.dom,s))return;let o=s.anchorNode&&i.docView.nearest(s.anchorNode);if(o&&o.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(te.ie&&te.ie_version<=11||te.android&&te.chrome)&&!i.state.selection.main.empty&&s.focusNode&&Vi(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=$i(e.root);if(!t)return!1;let i=te.safari&&e.root.nodeType==11&&rg(this.dom.ownerDocument)==this.dom&&ym(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let s=Js(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&fg(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Nm),so&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),so&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&ii(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&Js(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new qg(this.view,e,t,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=vf(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=tc(t,e.previousSibling||e.target.previousSibling,-1),s=tc(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(hn)!=e.state.facet(hn)&&(e.view.contentDOM.editContext=e.state.facet(hn)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function tc(n,e,t){for(;e;){let i=be.get(e);if(i&&i.parent==n)return i;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function nc(n,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Vi(a.node,a.offset,s,o)&&([t,i,s,o]=[s,o,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:o}}function ym(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return nc(n,s)}let t=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",i,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",i,!0),t?nc(n,t):null}class Cm{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:s}=e.state.selection.main,o={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:_e.of(i.text.split(`
`))};o.from==this.from&&s<this.from?o.from=s:o.to==this.to&&s>this.to&&(o.to=s),!(o.from==o.to&&!o.insert.length)&&(this.pendingContextChange=o,e.state.readOnly||Wa(e,o,B.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let s=[],o=null;for(let a=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);a<l;a++){let c=e.coordsForChar(a);o=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||o||new DOMRect,s.push(o)}t.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let o of i.getTextFormats()){let a=o.underlineStyle,l=o.underlineThickness;if(a!="None"&&l!="None"){let c=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;s.push(ae.mark({attributes:{style:c}}).range(this.toEditorPos(o.rangeStart),this.toEditorPos(o.rangeEnd)))}}e.dispatch({effects:Nf.of(ae.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=$i(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,a,l,c,h)=>{if(i)return;let f=h.length-(a-o);if(s&&a>=s.to)if(s.from==o&&s.to==a&&s.insert.eq(h)){s=this.pendingContextChange=null,t+=f,this.to+=f;return}else s=null,this.revertPending(e.state);if(o+=t,a+=t,a<=this.from)this.from+=f,this.to+=f;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),h.toString()),this.to+=f}t+=f}),s&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class J{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(o=>i(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||hg(e.parent)||document,this.viewState=new Zl(e.state||Ee.create(e)),e.scrollTo&&e.scrollTo.is(Is)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Pi).map(s=>new eo(s));for(let s of this.plugins)s.update(this);this.observer=new bm(this),this.inputState=new Kg(this),this.inputState.ensureHandlers(this.plugins),this.docView=new kl(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ve?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,o=this.state;for(let m of e){if(m.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=m.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,l=0,c=null;e.some(m=>m.annotation(Ff))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,c=Bf(o,a),c||(l=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(f=null)):this.observer.clear(),o.facet(Ee.phrases)!=this.state.facet(Ee.phrases))return this.setState(o);s=fr.create(this,o,e),s.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(u&&(u=u.map(m.changes)),m.scrollIntoView){let{main:T}=m.state.selection;u=new si(T.empty?T:B.cursor(T.head,T.head>T.anchor?-1:1))}for(let T of m.effects)T.is(Is)&&(u=T.value.clip(this.state))}this.viewState.update(s,u),this.bidiCache=dr.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Mi)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ps)!=s.state.facet(Ps)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let m of this.state.facet(na))try{m(s)}catch(T){dt(this.state,T,"update listener")}(c||f)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),f&&!vf(this,f)&&h.force&&ii(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Zl(e),this.plugins=e.facet(Pi).map(i=>new eo(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new kl(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Pi),i=e.state.facet(Pi);if(t!=i){let s=[];for(let o of i){let a=t.indexOf(o);if(a<0)s.push(new eo(o));else{let l=this.plugins[a];l.mustUpdate=e,s.push(l)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){dt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(Jh(i))o=-1,a=this.viewState.heightMap.height;else{let T=this.viewState.scrollAnchorAt(s);o=T.from,a=T.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(T=>{try{return T.read(this)}catch(y){return dt(this.state,y),ic}}),u=fr.create(this,this.state,[]),m=!1;u.flags|=c,t?t.flags|=c:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),m=this.docView.update(u),m&&this.docViewUpdate());for(let T=0;T<h.length;T++)if(f[T]!=ic)try{let y=h[T];y.write&&y.write(f[T],this)}catch(y){dt(this.state,y)}if(m&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let y=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(y>1||y<-1){s=s+y,i.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(na))l(t)}get themeClasses(){return aa+" "+(this.state.facet(oa)?Vf:Gf)+" "+this.state.facet(Ps)}updateAttrs(){let e=sc(this,bf,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(hn)?"true":"false",class:"cm-content",style:`${te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),sc(this,Ba,t);let i=this.observer.ignore(()=>{let s=$o(this.contentDOM,this.contentAttrs,t),o=$o(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(J.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Mi);let e=this.state.facet(J.cspNonce);Sn.mount(this.root,this.styleModules.concat(Om).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return no(this,e,Bl(this,e,t,i))}moveByGroup(e,t){return no(this,e,Bl(this,e,t,i=>Hg(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=i[t?i.length-1:0];return B.cursor(o.side(t,s)+e.from,o.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,i=!0){return Bg(this,e,t,i)}moveVertically(e,t,i){return no(this,e,Wg(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),xf(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),a=o[pn.find(o,e-s.from,-1,t)];return cs(i,a.dir==De.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Rf)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Lm)return df(e.length);let t=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||uf(o.isolates,i=Dl(this,e))))return o.order;i||(i=Dl(this,e));let s=Og(e.text,t,i);return this.bidiCache.push(new dr(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Kh(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Is.of(new si(typeof e=="number"?B.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Is.of(new si(B.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Fe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Fe.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Sn.newName(),s=[Ps.of(i),Mi.of(la(`.${i}`,e))];return t&&t.dark&&s.push(oa.of(!0)),s}static baseTheme(e){return Vn.lowest(Mi.of(la("."+aa,e,qf)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&be.get(i)||be.get(e);return((t=s?.rootView)===null||t===void 0?void 0:t.view)||null}}J.styleModule=Mi;J.inputHandler=Sf;J.scrollHandler=Of;J.focusChangeEffect=Af;J.perLineTextDirection=Rf;J.exceptionSink=Tf;J.updateListener=na;J.editable=hn;J.mouseSelectionStyle=Ef;J.dragMovesSelection=mf;J.clickAddsSelectionRange=gf;J.decorations=Ji;J.outerDecorations=yf;J.atomicRanges=Ha;J.bidiIsolatedRanges=Cf;J.scrollMargins=Lf;J.darkTheme=oa;J.cspNonce=ne.define({combine:n=>n.length?n[0]:""});J.contentAttributes=Ba;J.editorAttributes=bf;J.lineWrapping=J.contentAttributes.of({class:"cm-lineWrapping"});J.announce=ge.define();const Lm=4096,ic={};class dr{constructor(e,t,i,s,o,a){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=o,this.order=a}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:De.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==s&&!t.touchesRange(a.from,a.to)&&i.push(new dr(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function sc(n,e,t){for(let i=n.state.facet(e),s=i.length-1;s>=0;s--){let o=i[s],a=typeof o=="function"?o(n):o;a&&Ko(a,t)}return t}const Im=te.mac?"mac":te.windows?"win":te.linux?"linux":"key";function wm(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,o,a,l;for(let c=0;c<t.length-1;++c){const h=t[c];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return s&&(i="Alt-"+i),o&&(i="Ctrl-"+i),l&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function Ms(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const xm=Vn.default(J.domEventHandlers({keydown(n,e){return jf(Yf(e.state),n,e,"editor")}})),us=ne.define({enables:xm}),rc=new WeakMap;function Yf(n){let e=n.facet(us),t=rc.get(e);return t||rc.set(e,t=km(e.reduce((i,s)=>i.concat(s),[]))),t}function vm(n,e,t){return jf(Yf(n.state),e,n,t)}let fn=null;const Dm=4e3;function km(n,e=Im){let t=Object.create(null),i=Object.create(null),s=(a,l)=>{let c=i[a];if(c==null)i[a]=l;else if(c!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,l,c,h,f)=>{var u,m;let T=t[a]||(t[a]=Object.create(null)),y=l.split(/ (?!$)/).map(I=>wm(I,e));for(let I=1;I<y.length;I++){let D=y.slice(0,I).join(" ");s(D,!0),T[D]||(T[D]={preventDefault:!0,stopPropagation:!1,run:[Y=>{let V=fn={view:Y,prefix:D,scope:a};return setTimeout(()=>{fn==V&&(fn=null)},Dm),!0}]})}let b=y.join(" ");s(b,!1);let E=T[b]||(T[b]={preventDefault:!1,stopPropagation:!1,run:((m=(u=T._any)===null||u===void 0?void 0:u.run)===null||m===void 0?void 0:m.slice())||[]});c&&E.run.push(c),h&&(E.preventDefault=!0),f&&(E.stopPropagation=!0)};for(let a of n){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let h of l){let f=t[h]||(t[h]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=a;for(let m in f)f[m].run.push(T=>u(T,ca))}let c=a[e]||a.key;if(c)for(let h of l)o(h,c,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(h,"Shift-"+c,a.shift,a.preventDefault,a.stopPropagation)}return t}let ca=null;function jf(n,e,t,i){ca=e;let s=sg(e),o=Ke(s,0),a=Nt(o)==s.length&&s!=" ",l="",c=!1,h=!1,f=!1;fn&&fn.view==t&&fn.scope==i&&(l=fn.prefix+" ",kf.indexOf(e.keyCode)<0&&(h=!0,fn=null));let u=new Set,m=E=>{if(E){for(let I of E.run)if(!u.has(I)&&(u.add(I),I(t)))return E.stopPropagation&&(f=!0),!0;E.preventDefault&&(E.stopPropagation&&(f=!0),h=!0)}return!1},T=n[i],y,b;return T&&(m(T[l+Ms(s,e,!a)])?c=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(te.windows&&e.ctrlKey&&e.altKey)&&(y=An[e.keyCode])&&y!=s?(m(T[l+Ms(y,e,!0)])||e.shiftKey&&(b=Ki[e.keyCode])!=s&&b!=y&&m(T[l+Ms(b,e,!1)]))&&(c=!0):a&&e.shiftKey&&m(T[l+Ms(s,e,!0)])&&(c=!0),!c&&m(T._any)&&(c=!0)),h&&(c=!0),c&&f&&e.stopPropagation(),ca=null,c}class ds{constructor(e,t,i,s,o){this.className=e,this.left=t,this.top=i,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let o=Xf(e);return[new ds(t,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return Pm(e,t,i)}}function Xf(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==De.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function oc(n,e,t,i){let s=n.coordsAtPos(e,t*2);if(!s)return i;let o=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,l=n.posAtCoords({x:o.left+1,y:a}),c=n.posAtCoords({x:o.right-1,y:a});return l==null||c==null?i:{from:Math.max(i.from,Math.min(l,c)),to:Math.min(i.to,Math.max(l,c))}}function Pm(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),o=n.textDirection==De.LTR,a=n.contentDOM,l=a.getBoundingClientRect(),c=Xf(n),h=a.querySelector(".cm-line"),f=h&&window.getComputedStyle(h),u=l.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),m=l.right-(f?parseInt(f.paddingRight):0),T=sa(n,i),y=sa(n,s),b=T.type==at.Text?T:null,E=y.type==at.Text?y:null;if(b&&(n.lineWrapping||T.widgetLineBreaks)&&(b=oc(n,i,1,b)),E&&(n.lineWrapping||y.widgetLineBreaks)&&(E=oc(n,s,-1,E)),b&&E&&b.from==E.from&&b.to==E.to)return D(Y(t.from,t.to,b));{let W=b?Y(t.from,null,b):V(T,!1),U=E?Y(null,t.to,E):V(y,!0),q=[];return(b||T).to<(E||y).from-(b&&E?1:0)||T.widgetLineBreaks>1&&W.bottom+n.defaultLineHeight/2<U.top?q.push(I(u,W.bottom,m,U.top)):W.bottom<U.top&&n.elementAtHeight((W.bottom+U.top)/2).type==at.Text&&(W.bottom=U.top=(W.bottom+U.top)/2),D(W).concat(q).concat(D(U))}function I(W,U,q,ie){return new ds(e,W-c.left,U-c.top-.01,q-W,ie-U+.01)}function D({top:W,bottom:U,horizontal:q}){let ie=[];for(let z=0;z<q.length;z+=2)ie.push(I(q[z],W,q[z+1],U));return ie}function Y(W,U,q){let ie=1e9,z=-1e9,G=[];function Z(ue,Re,xe,Oe,ye){let Ce=n.coordsAtPos(ue,ue==q.to?-2:2),Le=n.coordsAtPos(xe,xe==q.from?2:-2);!Ce||!Le||(ie=Math.min(Ce.top,Le.top,ie),z=Math.max(Ce.bottom,Le.bottom,z),ye==De.LTR?G.push(o&&Re?u:Ce.left,o&&Oe?m:Le.right):G.push(!o&&Oe?u:Le.left,!o&&Re?m:Ce.right))}let ee=W??q.from,pe=U??q.to;for(let ue of n.visibleRanges)if(ue.to>ee&&ue.from<pe)for(let Re=Math.max(ue.from,ee),xe=Math.min(ue.to,pe);;){let Oe=n.state.doc.lineAt(Re);for(let ye of n.bidiSpans(Oe)){let Ce=ye.from+Oe.from,Le=ye.to+Oe.from;if(Ce>=xe)break;Le>Re&&Z(Math.max(Ce,Re),W==null&&Ce<=ee,Math.min(Le,xe),U==null&&Le>=pe,ye.dir)}if(Re=Oe.to+1,Re>=xe)break}return G.length==0&&Z(ee,W==null,pe,U==null,n.textDirection),{top:ie,bottom:z,horizontal:G}}function V(W,U){let q=l.top+(U?W.top:W.bottom);return{top:q,bottom:q,horizontal:[]}}}function Mm(n,e){return n.constructor==e.constructor&&n.eq(e)}class Um{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(er)!=e.state.facet(er)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(er);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!Mm(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const er=ne.define();function zf(n){return[Fe.define(e=>new Um(e,n)),er.of(n)]}const Kf=!te.ios,Qi=ne.define({combine(n){return Yt(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Fm(n={}){return[Qi.of(n),Bm,Hm,Wm,_f.of(!0)]}function $f(n){return n.startState.facet(Qi)!=n.state.facet(Qi)}const Bm=zf({above:!0,markers(n){let{state:e}=n,t=e.facet(Qi),i=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty?!o||Kf:t.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=s.empty?s:B.cursor(s.head,s.head>s.anchor?-1:1);for(let c of ds.forRange(n,a,l))i.push(c)}}return i},update(n,e){n.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=$f(n);return t&&ac(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){ac(e.state,n)},class:"cm-cursorLayer"});function ac(n,e){e.style.animationDuration=n.facet(Qi).cursorBlinkRate+"ms"}const Hm=zf({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:ds.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||$f(n)},class:"cm-selectionLayer"}),ha={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Kf&&(ha[".cm-line"].caretColor=ha[".cm-content"].caretColor="transparent !important");const Wm=Vn.highest(J.theme(ha)),Jf=ge.define({map(n,e){return n==null?null:e.mapPos(n)}}),Bi=Ze.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(Jf)?i.value:t,n)}}),Gm=Fe.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Bi);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Bi)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:n}=this,e=n.state.field(Bi),t=e!=null&&n.coordsAtPos(e);if(!t)return null;let i=n.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+n.scrollDOM.scrollLeft*n.scaleX,top:t.top-i.top+n.scrollDOM.scrollTop*n.scaleY,height:t.bottom-t.top}}drawCursor(n){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;n?(this.cursor.style.left=n.left/e+"px",this.cursor.style.top=n.top/t+"px",this.cursor.style.height=n.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Bi)!=n&&this.view.dispatch({effects:Jf.of(n)})}},{eventObservers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Vm(){return[Bi,Gm]}function lc(n,e,t,i,s){e.lastIndex=0;for(let o=n.iterRange(t,i),a=t,l;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;l=e.exec(o.value);)s(a+l.index,l)}function qm(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:s,to:o}of t)s=Math.max(n.state.doc.lineAt(s).from,s-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}class Ym{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:o,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(l,c,h,f)=>s(f,h,h+l[0].length,l,c);else if(typeof i=="function")this.addMatch=(l,c,h,f)=>{let u=i(l,c,h);u&&f(h,h+l[0].length,u)};else if(i)this.addMatch=(l,c,h,f)=>f(h,h+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let t=new Tn,i=t.add.bind(t);for(let{from:s,to:o}of qm(e,this.maxLength))lc(e.state.doc,this.regexp,s,o,(a,l)=>this.addMatch(l,e,a,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,a,l,c)=>{c>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),s=Math.max(c,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let o of e.visibleRanges){let a=Math.max(o.from,i),l=Math.min(o.to,s);if(l>a){let c=e.state.doc.lineAt(a),h=c.to<l?e.state.doc.lineAt(l):c,f=Math.max(o.from,c.from),u=Math.min(o.to,h.to);if(this.boundary){for(;a>c.from;a--)if(this.boundary.test(c.text[a-1-c.from])){f=a;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let m=[],T,y=(b,E,I)=>m.push(I.range(b,E));if(c==h)for(this.regexp.lastIndex=f-c.from;(T=this.regexp.exec(c.text))&&T.index<u-c.from;)this.addMatch(T,e,T.index+c.from,y);else lc(e.state.doc,this.regexp,f,u,(b,E)=>this.addMatch(E,e,b,y));t=t.update({filterFrom:f,filterTo:u,filter:(b,E)=>b<f||E>u,add:m})}}return t}}const fa=/x/.unicode!=null?"gu":"g",jm=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,fa),Xm={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ro=null;function zm(){var n;if(ro==null&&typeof document<"u"&&document.body){let e=document.body.style;ro=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return ro||!1}const tr=ne.define({combine(n){let e=Yt(n,{render:null,specialChars:jm,addSpecialChars:null});return(e.replaceTabs=!zm())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,fa)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,fa)),e}});function Km(n={}){return[tr.of(n),$m()]}let cc=null;function $m(){return cc||(cc=Fe.fromClass(class{constructor(n){this.view=n,this.decorations=ae.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(tr)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new Ym({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,o=Ke(e[0],0);if(o==9){let a=s.lineAt(i),l=t.state.tabSize,c=Ei(a.text,l,i-a.from);return ae.replace({widget:new eE((l-c%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=ae.replace({widget:new Zm(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(tr);n.startState.facet(tr)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const Jm="•";function Qm(n){return n>=32?Jm:n==10?"␤":String.fromCharCode(9216+n)}class Zm extends nn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Qm(this.code),i=e.state.phrase("Control character")+" "+(Xm[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class eE extends nn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function tE(){return iE}const nE=ae.line({class:"cm-activeLine"}),iE=Fe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let s=n.lineBlockAt(i.head);s.from>e&&(t.push(nE.range(s.from)),e=s.from)}return ae.set(t)}},{decorations:n=>n.decorations});class sE extends nn{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?ci(e.firstChild):[];if(!t.length)return null;let i=window.getComputedStyle(e.parentNode),s=cs(t[0],i.direction!="rtl"),o=parseInt(i.lineHeight);return s.bottom-s.top>o*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+o}:s}ignoreEvent(){return!1}}function rE(n){return Fe.fromClass(class{constructor(e){this.view=e,this.placeholder=n?ae.set([ae.widget({widget:new sE(n),side:1}).range(0)]):ae.none}get decorations(){return this.view.state.doc.length?ae.none:this.placeholder}},{decorations:e=>e.decorations})}const ua=2e3;function oE(n,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),o=[];if(e.off>ua||t.off>ua||e.col<0||t.col<0){let a=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let c=i;c<=s;c++){let h=n.doc.line(c);h.length<=l&&o.push(B.range(h.from+a,h.to+l))}}else{let a=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let c=i;c<=s;c++){let h=n.doc.line(c),f=Go(h.text,a,n.tabSize,!0);if(f<0)o.push(B.cursor(h.to));else{let u=Go(h.text,l,n.tabSize);o.push(B.range(h.from+f,h.from+u))}}}return o}function aE(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function hc(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),s=t-i.from,o=s>ua?-1:s==i.length?aE(n,e.clientX):Ei(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:o,off:s}}function lE(n,e){let t=hc(n,e),i=n.state.selection;return t?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(t.line).from),a=s.state.doc.lineAt(o);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(s.changes)}},get(s,o,a){let l=hc(n,s);if(!l)return i;let c=oE(n.state,t,l);return c.length?a?B.create(c.concat(i.ranges)):B.create(c):i}}:null}function cE(n){let e=t=>t.altKey&&t.button==0;return J.mouseSelectionStyle.of((t,i)=>e(i)?lE(t,i):null)}const hE={Alt:[18,n=>!!n.altKey],Control:[17,n=>!!n.ctrlKey],Shift:[16,n=>!!n.shiftKey],Meta:[91,n=>!!n.metaKey]},fE={style:"cursor: crosshair"};function uE(n={}){let[e,t]=hE[n.key||"Alt"],i=Fe.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,J.contentAttributes.of(s=>{var o;return!((o=s.plugin(i))===null||o===void 0)&&o.isDown?fE:null})]}const Li="-10000px";class Qf{constructor(e,t,i,s){this.facet=t,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=i(a,o))}update(e,t){var i;let s=e.state.facet(this.facet),o=s.filter(c=>c);if(s===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let a=[],l=t?[]:null;for(let c=0;c<o.length;c++){let h=o[c],f=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let m=this.tooltips[u];m&&m.create==h.create&&(f=u)}if(f<0)a[c]=this.createTooltipView(h,c?a[c-1]:null),l&&(l[c]=!!h.above);else{let u=a[c]=this.tooltipViews[f];l&&(l[c]=t[f]),u.update&&u.update(e)}}}for(let c of this.tooltipViews)a.indexOf(c)<0&&(this.removeTooltipView(c),(i=c.destroy)===null||i===void 0||i.call(c));return t&&(l.forEach((c,h)=>t[h]=c),t.length=l.length),this.input=s,this.tooltips=o,this.tooltipViews=a,!0}}function dE(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const oo=ne.define({combine:n=>{var e,t,i;return{position:te.ios?"absolute":((e=n.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||dE}}}),fc=new WeakMap,qa=Fe.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(oo);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Qf(n,Ya,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(oo);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=Li,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(n=i.destroy)===null||n===void 0||n.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(te.gecko)i=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Li&&s.style.left=="0px"){let o=s.getBoundingClientRect();i=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(i||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(oo).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:s,scaleY:o}=n,a=[];for(let l=0;l<this.manager.tooltips.length;l++){let c=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:f}=h,u=n.pos[l],m=n.size[l];if(!u||u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1){f.style.top=Li;continue}let T=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,y=T?7:0,b=m.right-m.left,E=(e=fc.get(h))!==null&&e!==void 0?e:m.bottom-m.top,I=h.offset||gE,D=this.view.textDirection==De.LTR,Y=m.width>i.right-i.left?D?i.left:i.right-m.width:D?Math.max(i.left,Math.min(u.left-(T?14:0)+I.x,i.right-b)):Math.min(Math.max(i.left,u.left-b+(T?14:0)-I.x),i.right-b),V=this.above[l];!c.strictSide&&(V?u.top-(m.bottom-m.top)-I.y<i.top:u.bottom+(m.bottom-m.top)+I.y>i.bottom)&&V==i.bottom-u.bottom>u.top-i.top&&(V=this.above[l]=!V);let W=(V?u.top-i.top:i.bottom-u.bottom)-y;if(W<E&&h.resize!==!1){if(W<this.view.defaultLineHeight){f.style.top=Li;continue}fc.set(h,E),f.style.height=(E=W)/o+"px"}else f.style.height&&(f.style.height="");let U=V?u.top-E-y-I.y:u.bottom+y+I.y,q=Y+b;if(h.overlap!==!0)for(let ie of a)ie.left<q&&ie.right>Y&&ie.top<U+E&&ie.bottom>U&&(U=V?ie.top-E-2-y:ie.bottom+y+2);if(this.position=="absolute"?(f.style.top=(U-n.parent.top)/o+"px",f.style.left=(Y-n.parent.left)/s+"px"):(f.style.top=U/o+"px",f.style.left=Y/s+"px"),T){let ie=u.left+(D?I.x:-I.x)-(Y+14-7);T.style.left=ie/s+"px"}h.overlap!==!0&&a.push({left:Y,top:U,right:q,bottom:U+E}),f.classList.toggle("cm-tooltip-above",V),f.classList.toggle("cm-tooltip-below",!V),h.positioned&&h.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Li}},{eventObservers:{scroll(){this.maybeMeasure()}}}),pE=J.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),gE={x:0,y:0},Ya=ne.define({enables:[qa,pE]}),pr=ne.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])});class Fr{static create(e){return new Fr(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Qf(e,pr,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const mE=Ya.compute([pr],n=>{let e=n.facet(pr);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:Fr.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class EE{constructor(e,t,i,s,o){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let s,o=1;if(i instanceof dn)s=i.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let l=e.coordsAtPos(s);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(s)).find(f=>f.from<=s&&f.to>=s),h=c&&c.dir==De.RTL?-1:1;o=t.x<l.left?-h:h}let a=this.source(e,s,o);if(a?.then){let l=this.pending={pos:s};a.then(c=>{this.pending==l&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>dt(e.state,c,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(qa),t=e?e.manager.tooltips.findIndex(i=>i.create==Fr.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!TE(o.dom,e)||this.pending){let{pos:a}=s[0]||this.pending,l=(i=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:a;(a==l?this.view.posAtCoords(this.lastMove)!=a:!SE(this.view,a,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Us=4;function TE(n,e){let t=n.getBoundingClientRect();return e.clientX>=t.left-Us&&e.clientX<=t.right+Us&&e.clientY>=t.top-Us&&e.clientY<=t.bottom+Us}function SE(n,e,t,i,s,o){let a=n.scrollDOM.getBoundingClientRect(),l=n.documentTop+n.documentPadding.top+n.contentHeight;if(a.left>i||a.right<i||a.top>s||Math.min(a.bottom,l)<s)return!1;let c=n.posAtCoords({x:i,y:s},!1);return c>=e&&c<=t}function AE(n,e={}){let t=ge.define(),i=Ze.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(a=>!e.hideOn(o,a))),o.docChanged)){let a=[];for(let l of s){let c=o.changes.mapPos(l.pos,-1,ot.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),l);h.pos=c,h.end!=null&&(h.end=o.changes.mapPos(h.end)),a.push(h)}}s=a}for(let a of o.effects)a.is(t)&&(s=a.value),a.is(RE)&&(s=[]);return s},provide:s=>pr.from(s)});return{active:i,extension:[i,Fe.define(s=>new EE(s,n,i,t,e.hoverTime||300)),mE]}}function Zf(n,e){let t=n.plugin(qa);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const RE=ge.define(),uc=ne.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Zi(n,e){let t=n.plugin(eu),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const eu=Fe.fromClass(class{constructor(n){this.input=n.state.facet(es),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(uc);this.top=new Fs(n,!0,e.topContainer),this.bottom=new Fs(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(uc);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Fs(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Fs(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(es);if(t!=this.input){let i=t.filter(c=>c),s=[],o=[],a=[],l=[];for(let c of i){let h=this.specs.indexOf(c),f;h<0?(f=c(n.view),l.push(f)):(f=this.panels[h],f.update&&f.update(n)),s.push(f),(f.top?o:a).push(f)}this.specs=i,this.panels=s,this.top.sync(o),this.bottom.sync(a);for(let c of l)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>J.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Fs{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=dc(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=dc(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function dc(n){let e=n.nextSibling;return n.remove(),e}const es=ne.define({enables:eu});class tn extends Fn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}tn.prototype.elementClass="";tn.prototype.toDOM=void 0;tn.prototype.mapMode=ot.TrackBefore;tn.prototype.startSide=tn.prototype.endSide=-1;tn.prototype.point=!0;const nr=ne.define(),_E=ne.define(),OE={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ae.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Yi=ne.define();function NE(n){return[tu(),Yi.of(Object.assign(Object.assign({},OE),n))]}const pc=ne.define({combine:n=>n.some(e=>e)});function tu(n){return[bE]}const bE=Fe.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Yi).map(e=>new mc(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(pc),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(pc)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Ae.iter(this.view.state.facet(nr),this.view.viewport.from),i=[],s=this.gutters.map(o=>new yE(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let a=!0;for(let l of o.type)if(l.type==at.Text&&a){da(t,i,l.from);for(let c of s)c.line(this.view,l,i);a=!1}else if(l.widget)for(let c of s)c.widget(this.view,l)}else if(o.type==at.Text){da(t,i,o.from);for(let a of s)a.line(this.view,o,i)}else if(o.widget)for(let a of s)a.widget(this.view,o);for(let o of s)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Yi),t=n.state.facet(Yi),i=n.docChanged||n.heightChanged||n.viewportChanged||!Ae.eq(n.startState.facet(nr),n.state.facet(nr),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(i=!0);else{i=!0;let s=[];for(let o of t){let a=e.indexOf(o);a<0?s.push(new mc(this.view,o)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)this.dom.appendChild(o.dom);this.gutters=s}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>J.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==De.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function gc(n){return Array.isArray(n)?n:[n]}function da(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class yE{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ae.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,o=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let l=new nu(e,a,o,i);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,a,o,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];da(this.cursor,s,t.from),i.length&&(s=s.concat(i));let o=this.gutter.config.lineMarker(e,t,s);o&&s.unshift(o);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),s=i?[i]:null;for(let o of e.state.facet(_E)){let a=o(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class mc{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let o=s.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let c=o.getBoundingClientRect();a=(c.top+c.bottom)/2}else a=s.clientY;let l=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,l,s)&&s.preventDefault()});this.markers=gc(t.markers(e)),t.initialSpacer&&(this.spacer=new nu(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=gc(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Ae.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class nu{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),CE(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let o=0,a=0;;){let l=a,c=o<t.length?t[o++]:null,h=!1;if(c){let f=c.elementClass;f&&(i+=" "+f);for(let u=a;u<this.markers.length;u++)if(this.markers[u].compare(c)){l=u,h=!0;break}}else l=this.markers.length;for(;a<l;){let f=this.markers[a++];if(f.toDOM){f.destroy(s);let u=s.nextSibling;s.remove(),s=u}}if(!c)break;c.toDOM&&(h?s=s.nextSibling:this.dom.insertBefore(c.toDOM(e),s)),h&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function CE(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const LE=ne.define(),IE=ne.define(),Qn=ne.define({combine(n){return Yt(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let o=i[s],a=t[s];i[s]=o?(l,c,h)=>o(l,c,h)||a(l,c,h):a}return i}})}});class ao extends tn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function lo(n,e){return n.state.facet(Qn).formatNumber(e,n.state)}const wE=Yi.compute([Qn],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(LE)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new ao(lo(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let s of e.state.facet(IE)){let o=s(e,t,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(Qn)!=e.state.facet(Qn),initialSpacer(e){return new ao(lo(e,Ec(e.state.doc.lines)))},updateSpacer(e,t){let i=lo(t.view,Ec(t.view.state.doc.lines));return i==e.number?e:new ao(i)},domEventHandlers:n.facet(Qn).domEventHandlers}));function xE(n={}){return[Qn.of(n),tu(),wE]}function Ec(n){let e=9;for(;e<n;)e=e*10+9;return e}const vE=new class extends tn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},DE=nr.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.head).from;s>t&&(t=s,e.push(vE.range(s)))}return Ae.of(e)});function kE(){return DE}const iu=1024;let PE=0;class co{constructor(e,t){this.from=e,this.to=t}}class me{constructor(e={}){this.id=PE++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=gt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}me.closedBy=new me({deserialize:n=>n.split(" ")});me.openedBy=new me({deserialize:n=>n.split(" ")});me.group=new me({deserialize:n=>n.split(" ")});me.isolate=new me({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});me.contextHash=new me({perNode:!0});me.lookAhead=new me({perNode:!0});me.mounted=new me({perNode:!0});class gr{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[me.mounted.id]}}const ME=Object.create(null);class gt{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):ME,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new gt(e.name||"",t,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(me.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(me.group),o=-1;o<(s?s.length:0);o++){let a=t[o<0?i.name:s[o]];if(a)return a}}}}gt.none=new gt("",Object.create(null),0,8);class ja{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let o of e){let a=o(i);a&&(s||(s=Object.assign({},i.props)),s[a[0].id]=a[1])}t.push(s?new gt(i.name,s,i.id,i.flags):i)}return new ja(t)}}const Bs=new WeakMap,Tc=new WeakMap;var Ye;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Ye||(Ye={}));class We{constructor(e,t,i,s,o){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,l]of o)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=gr.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ga(this.topNode,e)}cursorAt(e,t=0,i=0){let s=Bs.get(this)||this.topNode,o=new ga(s);return o.moveTo(e,t),Bs.set(this,o._tree),o}get topNode(){return new Ct(this,0,0,null)}resolve(e,t=0){let i=ts(Bs.get(this)||this.topNode,e,t,!1);return Bs.set(this,i),i}resolveInner(e,t=0){let i=ts(Tc.get(this)||this.topNode,e,t,!0);return Tc.set(this,i),i}resolveStack(e,t=0){return BE(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:o=this.length}=e,a=e.mode||0,l=(a&Ye.IncludeAnonymous)>0;for(let c=this.cursor(a|Ye.IncludeAnonymous);;){let h=!1;if(c.from<=o&&c.to>=s&&(!l&&c.type.isAnonymous||t(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&i&&(l||!c.type.isAnonymous)&&i(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ka(gt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new We(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new We(gt.none,t,i,s)))}static build(e){return HE(e)}}We.empty=new We(gt.none,[],[],0);class Xa{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Xa(this.buffer,this.index)}}class _n{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return gt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,t,i,s,o){let{buffer:a}=this,l=-1;for(let c=e;c!=t&&!(su(o,s,a[c+1],a[c+2])&&(l=c,i>0));c=a[c+3]);return l}slice(e,t,i){let s=this.buffer,o=new Uint16Array(t-e),a=0;for(let l=e,c=0;l<t;){o[c++]=s[l++],o[c++]=s[l++]-i;let h=o[c++]=s[l++]-i;o[c++]=s[l++]-e,a=Math.max(a,h)}return new _n(o,a,this.set)}}function su(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function ts(n,e,t,i){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!i&&n instanceof Ct&&n.index<0?null:n.parent;if(!a)return n;n=a}let o=i?0:Ye.IgnoreOverlays;if(i)for(let a=n,l=a.parent;l;a=l,l=a.parent)a instanceof Ct&&a.index<0&&((s=l.enter(e,t,o))===null||s===void 0?void 0:s.from)!=a.from&&(n=l);for(;;){let a=n.enter(e,t,o);if(!a)return n;n=a}}class ru{cursor(e=0){return new ga(this,e)}getChild(e,t=null,i=null){let s=Sc(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return Sc(this,e,t,i)}resolve(e,t=0){return ts(this,e,t,!1)}resolveInner(e,t=0){return ts(this,e,t,!0)}matchContext(e){return pa(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class Ct extends ru{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,o=0){for(let a=this;;){for(let{children:l,positions:c}=a._tree,h=t>0?l.length:-1;e!=h;e+=t){let f=l[e],u=c[e]+a.from;if(su(s,i,u,u+f.length)){if(f instanceof _n){if(o&Ye.ExcludeBuffers)continue;let m=f.findChild(0,f.buffer.length,t,i-u,s);if(m>-1)return new gn(new UE(a,f,e,u),null,m)}else if(o&Ye.IncludeAnonymous||!f.type.isAnonymous||za(f)){let m;if(!(o&Ye.IgnoreMounts)&&(m=gr.get(f))&&!m.overlay)return new Ct(m.tree,u,e,a);let T=new Ct(f,u,e,a);return o&Ye.IncludeAnonymous||!T.type.isAnonymous?T:T.nextChild(t<0?f.children.length-1:0,t,i,s)}}}if(o&Ye.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&Ye.IgnoreOverlays)&&(s=gr.get(this._tree))&&s.overlay){let o=e-this.from;for(let{from:a,to:l}of s.overlay)if((t>0?a<=o:a<o)&&(t<0?l>=o:l>o))return new Ct(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Sc(n,e,t,i){let s=n.cursor(),o=[];if(!s.firstChild())return o;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return o}for(;;){if(i!=null&&s.type.is(i))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return i==null?o:[]}}function pa(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class UE{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class gn extends ru{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return o<0?null:new gn(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ye.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new gn(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new gn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new gn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,o=i.buffer[this.index+3];if(o>s){let a=i.buffer[this.index+1];e.push(i.slice(s,o,a)),t.push(0)}return new We(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ou(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let a=n[o];(a.from>t.from||a.to<t.to)&&(t=a,e=o)}let i=t instanceof Ct&&t.index<0?null:t.parent,s=n.slice();return i?s[e]=i:s.splice(e,1),new FE(s,t)}class FE{constructor(e,t){this.heads=e,this.node=t}get next(){return ou(this.heads)}}function BE(n,e,t){let i=n.resolveInner(e,t),s=null;for(let o=i instanceof Ct?i:i.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(s||(s=[i])).push(a.resolve(e,t)),o=a}else{let a=gr.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let l=new Ct(a.tree,a.overlay[0].from+o.from,-1,o);(s||(s=[i])).push(ts(l,e,t,!1))}}return s?ou(s):i}class ga{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ct)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Ct?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ye.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ye.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ye.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let o=t+e,a=e<0?-1:i._tree.children.length;o!=a;o+=e){let l=i._tree.children[o];if(this.mode&Ye.IncludeAnonymous||l instanceof _n||!l.type.isAnonymous||za(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,i=o+1;break e}s=this.stack[--o]}for(let s=i;s<this.stack.length;s++)t=new gn(this.buffer,t,this.stack[s]);return this.bufferNode=new gn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return pa(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return pa(this.node,e,s);let a=i[t.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function za(n){return n.children.some(e=>e instanceof _n||!e.type.isAnonymous||za(e))}function HE(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=iu,reused:o=[],minRepeatType:a=i.types.length}=n,l=Array.isArray(t)?new Xa(t,t.length):t,c=i.types,h=0,f=0;function u(W,U,q,ie,z,G){let{id:Z,start:ee,end:pe,size:ue}=l,Re=f;for(;ue<0;)if(l.next(),ue==-1){let Le=o[Z];q.push(Le),ie.push(ee-W);return}else if(ue==-3){h=Z;return}else if(ue==-4){f=Z;return}else throw new RangeError(`Unrecognized record size: ${ue}`);let xe=c[Z],Oe,ye,Ce=ee-W;if(pe-ee<=s&&(ye=E(l.pos-U,z))){let Le=new Uint16Array(ye.size-ye.skip),Xe=l.pos-ye.size,rt=Le.length;for(;l.pos>Xe;)rt=I(ye.start,Le,rt);Oe=new _n(Le,pe-ye.start,i),Ce=ye.start-W}else{let Le=l.pos-ue;l.next();let Xe=[],rt=[],Xt=Z>=a?Z:-1,sn=0,qn=pe;for(;l.pos>Le;)Xt>=0&&l.id==Xt&&l.size>=0?(l.end<=qn-s&&(y(Xe,rt,ee,sn,l.end,qn,Xt,Re),sn=Xe.length,qn=l.end),l.next()):G>2500?m(ee,Le,Xe,rt):u(ee,Le,Xe,rt,Xt,G+1);if(Xt>=0&&sn>0&&sn<Xe.length&&y(Xe,rt,ee,sn,ee,qn,Xt,Re),Xe.reverse(),rt.reverse(),Xt>-1&&sn>0){let Es=T(xe);Oe=Ka(xe,Xe,rt,0,Xe.length,0,pe-ee,Es,Es)}else Oe=b(xe,Xe,rt,pe-ee,Re-pe)}q.push(Oe),ie.push(Ce)}function m(W,U,q,ie){let z=[],G=0,Z=-1;for(;l.pos>U;){let{id:ee,start:pe,end:ue,size:Re}=l;if(Re>4)l.next();else{if(Z>-1&&pe<Z)break;Z<0&&(Z=ue-s),z.push(ee,pe,ue),G++,l.next()}}if(G){let ee=new Uint16Array(G*4),pe=z[z.length-2];for(let ue=z.length-3,Re=0;ue>=0;ue-=3)ee[Re++]=z[ue],ee[Re++]=z[ue+1]-pe,ee[Re++]=z[ue+2]-pe,ee[Re++]=Re;q.push(new _n(ee,z[2]-pe,i)),ie.push(pe-W)}}function T(W){return(U,q,ie)=>{let z=0,G=U.length-1,Z,ee;if(G>=0&&(Z=U[G])instanceof We){if(!G&&Z.type==W&&Z.length==ie)return Z;(ee=Z.prop(me.lookAhead))&&(z=q[G]+Z.length+ee)}return b(W,U,q,ie,z)}}function y(W,U,q,ie,z,G,Z,ee){let pe=[],ue=[];for(;W.length>ie;)pe.push(W.pop()),ue.push(U.pop()+q-z);W.push(b(i.types[Z],pe,ue,G-z,ee-G)),U.push(z-q)}function b(W,U,q,ie,z=0,G){if(h){let Z=[me.contextHash,h];G=G?[Z].concat(G):[Z]}if(z>25){let Z=[me.lookAhead,z];G=G?[Z].concat(G):[Z]}return new We(W,U,q,ie,G)}function E(W,U){let q=l.fork(),ie=0,z=0,G=0,Z=q.end-s,ee={size:0,start:0,skip:0};e:for(let pe=q.pos-W;q.pos>pe;){let ue=q.size;if(q.id==U&&ue>=0){ee.size=ie,ee.start=z,ee.skip=G,G+=4,ie+=4,q.next();continue}let Re=q.pos-ue;if(ue<0||Re<pe||q.start<Z)break;let xe=q.id>=a?4:0,Oe=q.start;for(q.next();q.pos>Re;){if(q.size<0)if(q.size==-3)xe+=4;else break e;else q.id>=a&&(xe+=4);q.next()}z=Oe,ie+=ue,G+=xe}return(U<0||ie==W)&&(ee.size=ie,ee.start=z,ee.skip=G),ee.size>4?ee:void 0}function I(W,U,q){let{id:ie,start:z,end:G,size:Z}=l;if(l.next(),Z>=0&&ie<a){let ee=q;if(Z>4){let pe=l.pos-(Z-4);for(;l.pos>pe;)q=I(W,U,q)}U[--q]=ee,U[--q]=G-W,U[--q]=z-W,U[--q]=ie}else Z==-3?h=ie:Z==-4&&(f=ie);return q}let D=[],Y=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,D,Y,-1,0);let V=(e=n.length)!==null&&e!==void 0?e:D.length?Y[0]+D[0].length:0;return new We(c[n.topID],D.reverse(),Y.reverse(),V)}const Ac=new WeakMap;function ir(n,e){if(!n.isAnonymous||e instanceof _n||e.type!=n)return 1;let t=Ac.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof We)){t=1;break}t+=ir(n,i)}Ac.set(e,t)}return t}function Ka(n,e,t,i,s,o,a,l,c){let h=0;for(let y=i;y<s;y++)h+=ir(n,e[y]);let f=Math.ceil(h*1.5/8),u=[],m=[];function T(y,b,E,I,D){for(let Y=E;Y<I;){let V=Y,W=b[Y],U=ir(n,y[Y]);for(Y++;Y<I;Y++){let q=ir(n,y[Y]);if(U+q>=f)break;U+=q}if(Y==V+1){if(U>f){let q=y[V];T(q.children,q.positions,0,q.children.length,b[V]+D);continue}u.push(y[V])}else{let q=b[Y-1]+y[Y-1].length-W;u.push(Ka(n,y,b,V,Y,W,q,null,c))}m.push(W+D-o)}}return T(e,t,i,s,0),(l||c)(u,m,a)}class Un{constructor(e,t,i,s,o=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new Un(0,e.length,e,0,!1,i)];for(let o of t)o.to>e.length&&s.push(o);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],o=1,a=e.length?e[0]:null;for(let l=0,c=0,h=0;;l++){let f=l<t.length?t[l]:null,u=f?f.fromA:1e9;if(u-c>=i)for(;a&&a.from<u;){let m=a;if(c>=m.from||u<=m.to||h){let T=Math.max(m.from,c)-h,y=Math.min(m.to,u)-h;m=T>=y?null:new Un(T,y,m.tree,m.offset+h,l>0,!!f)}if(m&&s.push(m),a.to>u)break;a=o<e.length?e[o++]:null}if(!f)break;c=f.toA,h=f.toA-f.toB}return s}}class au{startParse(e,t,i){return typeof e=="string"&&(e=new WE(e)),i=i?i.length?i.map(s=>new co(s.from,s.to)):[new co(0,0)]:[new co(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let o=s.advance();if(o)return o}}}class WE{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new me({perNode:!0});let GE=0;class Ot{constructor(e,t,i,s){this.name=e,this.set=t,this.base=i,this.modified=s,this.id=GE++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Ot&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let s=new Ot(i,[],null,[]);if(s.set.push(s),t)for(let o of t.set)s.set.push(o);return s}static defineModifier(e){let t=new mr(e);return i=>i.modified.indexOf(t)>-1?i:mr.get(i.base||i,i.modified.concat(t).sort((s,o)=>s.id-o.id))}}let VE=0;class mr{constructor(e){this.name=e,this.instances=[],this.id=VE++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&qE(t,l.modified));if(i)return i;let s=[],o=new Ot(e.name,s,e,t);for(let l of t)l.instances.push(o);let a=YE(t);for(let l of e.set)if(!l.modified.length)for(let c of a)s.push(mr.get(l,c));return o}}function qE(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function YE(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function lu(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let o=[],a=2,l=s;for(let u=0;;){if(l=="..."&&u>0&&u+3==s.length){a=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!m)throw new RangeError("Invalid path: "+s);if(o.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),u+=m[0].length,u==s.length)break;let T=s[u++];if(u==s.length&&T=="!"){a=0;break}if(T!="/")throw new RangeError("Invalid path: "+s);l=s.slice(u)}let c=o.length-1,h=o[c];if(!h)throw new RangeError("Invalid path: "+s);let f=new Er(i,a,c>0?o.slice(0,c):null);e[h]=f.sort(e[h])}}return cu.add(e)}const cu=new me;class Er{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Er.empty=new Er([],2,null);function hu(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let a of o.tag)t[a.id]=o.class;let{scope:i,all:s=null}=e||{};return{style:o=>{let a=s;for(let l of o)for(let c of l.set){let h=t[c.id];if(h){a=a?a+" "+h:h;break}}return a},scope:i}}function jE(n,e){let t=null;for(let i of n){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function XE(n,e,t,i=0,s=n.length){let o=new zE(i,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),i,s,"",o.highlighters),o.flush(s)}class zE{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,o){let{type:a,from:l,to:c}=e;if(l>=i||c<=t)return;a.isTop&&(o=this.highlighters.filter(T=>!T.scope||T.scope(a)));let h=s,f=KE(e)||Er.empty,u=jE(o,f.tags);if(u&&(h&&(h+=" "),h+=u,f.mode==1&&(s+=(s?" ":"")+u)),this.startSpan(Math.max(t,l),h),f.opaque)return;let m=e.tree&&e.tree.prop(me.mounted);if(m&&m.overlay){let T=e.node.enter(m.overlay[0].from+l,1),y=this.highlighters.filter(E=>!E.scope||E.scope(m.tree.type)),b=e.firstChild();for(let E=0,I=l;;E++){let D=E<m.overlay.length?m.overlay[E]:null,Y=D?D.from+l:c,V=Math.max(t,I),W=Math.min(i,Y);if(V<W&&b)for(;e.from<W&&(this.highlightRange(e,V,W,s,o),this.startSpan(Math.min(W,e.to),h),!(e.to>=Y||!e.nextSibling())););if(!D||Y>i)break;I=D.to+l,I>t&&(this.highlightRange(T.cursor(),Math.max(t,D.from+l),Math.min(i,I),"",y),this.startSpan(Math.min(i,I),h))}b&&e.parent()}else if(e.firstChild()){m&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function KE(n){let e=n.type.prop(cu);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const $=Ot.define,Hs=$(),an=$(),Rc=$(an),_c=$(an),ln=$(),Ws=$(ln),ho=$(ln),Ft=$(),yn=$(Ft),Mt=$(),Ut=$(),ma=$(),Ii=$(ma),Gs=$(),w={comment:Hs,lineComment:$(Hs),blockComment:$(Hs),docComment:$(Hs),name:an,variableName:$(an),typeName:Rc,tagName:$(Rc),propertyName:_c,attributeName:$(_c),className:$(an),labelName:$(an),namespace:$(an),macroName:$(an),literal:ln,string:Ws,docString:$(Ws),character:$(Ws),attributeValue:$(Ws),number:ho,integer:$(ho),float:$(ho),bool:$(ln),regexp:$(ln),escape:$(ln),color:$(ln),url:$(ln),keyword:Mt,self:$(Mt),null:$(Mt),atom:$(Mt),unit:$(Mt),modifier:$(Mt),operatorKeyword:$(Mt),controlKeyword:$(Mt),definitionKeyword:$(Mt),moduleKeyword:$(Mt),operator:Ut,derefOperator:$(Ut),arithmeticOperator:$(Ut),logicOperator:$(Ut),bitwiseOperator:$(Ut),compareOperator:$(Ut),updateOperator:$(Ut),definitionOperator:$(Ut),typeOperator:$(Ut),controlOperator:$(Ut),punctuation:ma,separator:$(ma),bracket:Ii,angleBracket:$(Ii),squareBracket:$(Ii),paren:$(Ii),brace:$(Ii),content:Ft,heading:yn,heading1:$(yn),heading2:$(yn),heading3:$(yn),heading4:$(yn),heading5:$(yn),heading6:$(yn),contentSeparator:$(Ft),list:$(Ft),quote:$(Ft),emphasis:$(Ft),strong:$(Ft),link:$(Ft),monospace:$(Ft),strikethrough:$(Ft),inserted:$(),deleted:$(),changed:$(),invalid:$(),meta:Gs,documentMeta:$(Gs),annotation:$(Gs),processingInstruction:$(Gs),definition:Ot.defineModifier("definition"),constant:Ot.defineModifier("constant"),function:Ot.defineModifier("function"),standard:Ot.defineModifier("standard"),local:Ot.defineModifier("local"),special:Ot.defineModifier("special")};for(let n in w){let e=w[n];e instanceof Ot&&(e.name=n)}hu([{tag:w.link,class:"tok-link"},{tag:w.heading,class:"tok-heading"},{tag:w.emphasis,class:"tok-emphasis"},{tag:w.strong,class:"tok-strong"},{tag:w.keyword,class:"tok-keyword"},{tag:w.atom,class:"tok-atom"},{tag:w.bool,class:"tok-bool"},{tag:w.url,class:"tok-url"},{tag:w.labelName,class:"tok-labelName"},{tag:w.inserted,class:"tok-inserted"},{tag:w.deleted,class:"tok-deleted"},{tag:w.literal,class:"tok-literal"},{tag:w.string,class:"tok-string"},{tag:w.number,class:"tok-number"},{tag:[w.regexp,w.escape,w.special(w.string)],class:"tok-string2"},{tag:w.variableName,class:"tok-variableName"},{tag:w.local(w.variableName),class:"tok-variableName tok-local"},{tag:w.definition(w.variableName),class:"tok-variableName tok-definition"},{tag:w.special(w.variableName),class:"tok-variableName2"},{tag:w.definition(w.propertyName),class:"tok-propertyName tok-definition"},{tag:w.typeName,class:"tok-typeName"},{tag:w.namespace,class:"tok-namespace"},{tag:w.className,class:"tok-className"},{tag:w.macroName,class:"tok-macroName"},{tag:w.propertyName,class:"tok-propertyName"},{tag:w.operator,class:"tok-operator"},{tag:w.comment,class:"tok-comment"},{tag:w.meta,class:"tok-meta"},{tag:w.invalid,class:"tok-invalid"},{tag:w.punctuation,class:"tok-punctuation"}]);var fo;const Zn=new me;function $E(n){return ne.define({combine:n?e=>e.concat(n):void 0})}const JE=new me;class wt{constructor(e,t,i=[],s=""){this.data=e,this.name=s,Ee.prototype.hasOwnProperty("tree")||Object.defineProperty(Ee.prototype,"tree",{get(){return je(this)}}),this.parser=t,this.extension=[On.of(this),Ee.languageData.of((o,a,l)=>{let c=Oc(o,a,l),h=c.type.prop(Zn);if(!h)return[];let f=o.facet(h),u=c.type.prop(JE);if(u){let m=c.resolve(a-c.from,l);for(let T of u)if(T.test(m,o)){let y=o.facet(T.facet);return T.type=="replace"?y:y.concat(f)}}return f})].concat(i)}isActiveAt(e,t,i=-1){return Oc(e,t,i).type.prop(Zn)==this.data}findRegions(e){let t=e.facet(On);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(o,a)=>{if(o.prop(Zn)==this.data){i.push({from:a,to:a+o.length});return}let l=o.prop(me.mounted);if(l){if(l.tree.prop(Zn)==this.data){if(l.overlay)for(let c of l.overlay)i.push({from:c.from+a,to:c.to+a});else i.push({from:a,to:a+o.length});return}else if(l.overlay){let c=i.length;if(s(l.tree,l.overlay[0].from+a),i.length>c)return}}for(let c=0;c<o.children.length;c++){let h=o.children[c];h instanceof We&&s(h,o.positions[c]+a)}};return s(je(e),0),i}get allowsNesting(){return!0}}wt.setState=ge.define();function Oc(n,e,t){let i=n.facet(On),s=je(n).topNode;if(!i||i.allowsNesting)for(let o=s;o;o=o.enter(e,t,Ye.ExcludeBuffers))o.type.isTop&&(s=o);return s}class Tr extends wt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=$E(e.languageData);return new Tr(t,e.parser.configure({props:[Zn.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Tr(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function je(n){let e=n.field(wt.state,!1);return e?e.tree:We.empty}class QE{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let wi=null;class Sr{constructor(e,t,i=[],s,o,a,l,c){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=o,this.viewport=a,this.skipped=l,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Sr(e,t,[],We.empty,0,i,[],null)}startParse(){return this.parser.startParse(new QE(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=We.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Un.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Un.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=wi;wi=this;try{return e()}finally{wi=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Nc(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:o,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,f,u,m)=>c.push({fromA:h,toA:f,fromB:u,toB:m})),i=Un.applyChanges(i,c),s=We.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let f=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);f<u&&l.push({from:f,to:u})}}}return new Sr(this.parser,t,i,s,o,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:o}=this.skipped[i];s<e.to&&o>e.from&&(this.fragments=Nc(this.fragments,s,o),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends au{createParse(t,i,s){let o=s[0].from,a=s[s.length-1].to;return{parsedPos:o,advance(){let c=wi;if(c){for(let h of s)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=a,new We(gt.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return wi}}function Nc(n,e,t){return Un.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class di{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new di(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Sr.create(e.facet(On).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new di(i)}}wt.state=Ze.define({create:di.init,update(n,e){for(let t of e.effects)if(t.is(wt.setState))return t.value;return e.startState.facet(On)!=e.state.facet(On)?di.init(e.state):n.apply(e)}});let fu=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(fu=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const uo=typeof navigator<"u"&&(!((fo=navigator.scheduling)===null||fo===void 0)&&fo.isInputPending)?()=>navigator.scheduling.isInputPending():null,ZE=Fe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(wt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(wt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=fu(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,o=i.field(wt.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!uo?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<s&&i.doc.length>s+1e3,c=o.context.work(()=>uo&&uo()||Date.now()>a,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(c||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:wt.setState.of(new di(o.context))})),this.chunkBudget>0&&!(c&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>dt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),On=ne.define({combine(n){return n.length?n[0]:null},enables:n=>[wt.state,ZE,J.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class eT{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const tT=ne.define(),Br=ne.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Ar(n){let e=n.facet(Br);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function ns(n,e){let t="",i=n.tabSize,s=n.facet(Br)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let o=0;o<e;o++)t+=s;return t}function $a(n,e){n instanceof Ee&&(n=new Hr(n));for(let i of n.state.facet(tT)){let s=i(n,e);if(s!==void 0)return s}let t=je(n.state);return t.length>=e?nT(n,t,e):null}class Hr{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ar(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=i.from&&s<=i.to?o&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.countColumn(i,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(o+=a-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,t=e.length){return Ei(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let a=o(s);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const uu=new me;function nT(n,e,t){let i=e.resolveStack(t),s=i.node.enterUnfinishedNodesBefore(t);if(s!=i.node){let o=[];for(let a=s;a!=i.node;a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)i={node:o[a],next:i}}return du(i,n,t)}function du(n,e,t){for(let i=n;i;i=i.next){let s=sT(i.node);if(s)return s(Ja.create(e,t,i))}return 0}function iT(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function sT(n){let e=n.type.prop(uu);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(me.closedBy))){let s=n.lastChild,o=s&&i.indexOf(s.name)>-1;return a=>lT(a,!0,1,void 0,o&&!iT(a)?s.from:void 0)}return n.parent==null?rT:null}function rT(){return 0}class Ja extends Hr{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Ja(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(oT(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return du(this.context.next,this.base,this.pos)}}function oT(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function aT(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),a=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let l=t.to;;){let c=e.childAfter(l);if(!c||c==i)return null;if(!c.type.isSkipped)return c.from<a?t:null;l=c.to}}function lT(n,e,t,i,s){let o=n.textAfter,a=o.match(/^\s*/)[0].length,l=s==n.pos+a,c=aT(n);return c?l?n.column(c.from):n.column(c.to):n.baseIndent+(l?0:n.unit*t)}function cT({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const hT=200;function fT(){return Ee.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,s=t.lineAt(i);if(i>s.from+hT)return n;let o=t.sliceString(s.from,i);if(!e.some(h=>h.test(o)))return n;let{state:a}=n,l=-1,c=[];for(let{head:h}of a.selection.ranges){let f=a.doc.lineAt(h);if(f.from==l)continue;l=f.from;let u=$a(a,f.from);if(u==null)continue;let m=/^\s*/.exec(f.text)[0],T=ns(a,u);m!=T&&c.push({from:f.from,to:f.from+m.length,insert:T})}return c.length?[n,{changes:c,sequential:!0}]:n})}const uT=ne.define(),pu=new me;function dT(n,e,t){let i=je(n);if(i.length<t)return null;let s=i.resolveStack(t,1),o=null;for(let a=s;a;a=a.next){let l=a.node;if(l.to<=t||l.from>t)continue;if(o&&l.from<e)break;let c=l.type.prop(pu);if(c&&(l.to<i.length-50||i.length==n.doc.length||!pT(l))){let h=c(l,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}function pT(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Rr(n,e,t){for(let i of n.facet(uT)){let s=i(n,e,t);if(s)return s}return dT(n,e,t)}function gu(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const Wr=ge.define({map:gu}),ps=ge.define({map:gu});function mu(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Gn=Ze.define({create(){return ae.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Wr)&&!gT(n,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Su),s=i?ae.replace({widget:new _T(i(e.state,t.value))}):bc;n=n.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(ps)&&(n=n.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(s,o)=>{s<i&&o>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(s,o)=>o<=i||s>=i}))}return n},provide:n=>J.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],s=n[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(bc.range(i,s))}return ae.set(e,!0)}});function _r(n,e,t){var i;let s=null;return(i=n.field(Gn,!1))===null||i===void 0||i.between(e,t,(o,a)=>{(!s||s.from>o)&&(s={from:o,to:a})}),s}function gT(n,e,t){let i=!1;return n.between(e,e,(s,o)=>{s==e&&o==t&&(i=!0)}),i}function Eu(n,e){return n.field(Gn,!1)?e:e.concat(ge.appendConfig.of(Au()))}const mT=n=>{for(let e of mu(n)){let t=Rr(n.state,e.from,e.to);if(t)return n.dispatch({effects:Eu(n.state,[Wr.of(t),Tu(n,t)])}),!0}return!1},ET=n=>{if(!n.state.field(Gn,!1))return!1;let e=[];for(let t of mu(n)){let i=_r(n.state,t.from,t.to);i&&e.push(ps.of(i),Tu(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Tu(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return J.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${s}.`)}const TT=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let s=n.lineBlockAt(i),o=Rr(e,s.from,s.to);o&&t.push(Wr.of(o)),i=(o?n.lineBlockAt(o.to):s).to+1}return t.length&&n.dispatch({effects:Eu(n.state,t)}),!!t.length},ST=n=>{let e=n.state.field(Gn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,s)=>{t.push(ps.of({from:i,to:s}))}),n.dispatch({effects:t}),!0},AT=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:mT},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ET},{key:"Ctrl-Alt-[",run:TT},{key:"Ctrl-Alt-]",run:ST}],RT={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Su=ne.define({combine(n){return Yt(n,RT)}});function Au(n){return[Gn,bT]}function Ru(n,e){let{state:t}=n,i=t.facet(Su),s=a=>{let l=n.lineBlockAt(n.posAtDOM(a.target)),c=_r(n.state,l.from,l.to);c&&n.dispatch({effects:ps.of(c)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(n,s,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const bc=ae.replace({widget:new class extends nn{toDOM(n){return Ru(n,null)}}});class _T extends nn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Ru(e,this.value)}}const OT={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class po extends tn{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function NT(n={}){let e=Object.assign(Object.assign({},OT),n),t=new po(e,!0),i=new po(e,!1),s=Fe.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(On)!=a.state.facet(On)||a.startState.field(Gn,!1)!=a.state.field(Gn,!1)||je(a.startState)!=je(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let l=new Tn;for(let c of a.viewportLineBlocks){let h=_r(a.state,c.from,c.to)?i:Rr(a.state,c.from,c.to)?t:null;h&&l.add(c.from,c.from,h)}return l.finish()}}),{domEventHandlers:o}=e;return[s,NE({class:"cm-foldGutter",markers(a){var l;return((l=a.plugin(s))===null||l===void 0?void 0:l.markers)||Ae.empty},initialSpacer(){return new po(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(a,l,c)=>{if(o.click&&o.click(a,l,c))return!0;let h=_r(a.state,l.from,l.to);if(h)return a.dispatch({effects:ps.of(h)}),!0;let f=Rr(a.state,l.from,l.to);return f?(a.dispatch({effects:Wr.of(f)}),!0):!1}})}),Au()]}const bT=J.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ti{constructor(e,t){this.specs=e;let i;function s(l){let c=Sn.newName();return(i||(i=Object.create(null)))["."+c]=l,c}const o=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof wt?l=>l.prop(Zn)==a.data:a?l=>l==a:void 0,this.style=hu(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=i?new Sn(i):null,this.themeType=t.themeType}static define(e,t){return new Ti(e,t||{})}}const Ea=ne.define(),_u=ne.define({combine(n){return n.length?[n[0]]:null}});function go(n){let e=n.facet(Ea);return e.length?e:n.facet(_u)}function Qa(n,e){let t=[CT],i;return n instanceof Ti&&(n.module&&t.push(J.styleModule.of(n.module)),i=n.themeType),e?.fallback?t.push(_u.of(n)):i?t.push(Ea.computeN([J.darkTheme],s=>s.facet(J.darkTheme)==(i=="dark")?[n]:[])):t.push(Ea.of(n)),t}class yT{constructor(e){this.markCache=Object.create(null),this.tree=je(e.state),this.decorations=this.buildDeco(e,go(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=je(e.state),i=go(e.state),s=i!=go(e.startState),{viewport:o}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!s&&t.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return ae.none;let i=new Tn;for(let{from:s,to:o}of e.visibleRanges)XE(this.tree,t,(a,l,c)=>{i.add(a,l,this.markCache[c]||(this.markCache[c]=ae.mark({class:c})))},s,o);return i.finish()}}const CT=Vn.high(Fe.fromClass(yT,{decorations:n=>n.decorations})),LT=Ti.define([{tag:w.meta,color:"#404740"},{tag:w.link,textDecoration:"underline"},{tag:w.heading,textDecoration:"underline",fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strong,fontWeight:"bold"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.keyword,color:"#708"},{tag:[w.atom,w.bool,w.url,w.contentSeparator,w.labelName],color:"#219"},{tag:[w.literal,w.inserted],color:"#164"},{tag:[w.string,w.deleted],color:"#a11"},{tag:[w.regexp,w.escape,w.special(w.string)],color:"#e40"},{tag:w.definition(w.variableName),color:"#00f"},{tag:w.local(w.variableName),color:"#30a"},{tag:[w.typeName,w.namespace],color:"#085"},{tag:w.className,color:"#167"},{tag:[w.special(w.variableName),w.macroName],color:"#256"},{tag:w.definition(w.propertyName),color:"#00c"},{tag:w.comment,color:"#940"},{tag:w.invalid,color:"#f00"}]),IT=J.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Ou=1e4,Nu="()[]{}",bu=ne.define({combine(n){return Yt(n,{afterCursor:!0,brackets:Nu,maxScanDistance:Ou,renderMatch:vT})}}),wT=ae.mark({class:"cm-matchingBracket"}),xT=ae.mark({class:"cm-nonmatchingBracket"});function vT(n){let e=[],t=n.matched?wT:xT;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const DT=Ze.define({create(){return ae.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(bu);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=Wt(e.state,s.head,-1,i)||s.head>0&&Wt(e.state,s.head-1,1,i)||i.afterCursor&&(Wt(e.state,s.head,1,i)||s.head<e.state.doc.length&&Wt(e.state,s.head+1,-1,i));o&&(t=t.concat(i.renderMatch(o,e.state)))}return ae.set(t,!0)},provide:n=>J.decorations.from(n)}),kT=[DT,IT];function PT(n={}){return[bu.of(n),kT]}const MT=new me;function Ta(n,e,t){let i=n.prop(e<0?me.openedBy:me.closedBy);if(i)return i;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function Sa(n){let e=n.type.prop(MT);return e?e(n.node):n}function Wt(n,e,t,i={}){let s=i.maxScanDistance||Ou,o=i.brackets||Nu,a=je(n),l=a.resolveInner(e,t);for(let c=l;c;c=c.parent){let h=Ta(c.type,t,o);if(h&&c.from<c.to){let f=Sa(c);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return UT(n,e,t,c,f,h,o)}}return FT(n,e,t,a,l.type,s,o)}function UT(n,e,t,i,s,o,a){let l=i.parent,c={from:s.from,to:s.to},h=0,f=l?.cursor();if(f&&(t<0?f.childBefore(i.from):f.childAfter(i.to)))do if(t<0?f.to<=i.from:f.from>=i.to){if(h==0&&o.indexOf(f.type.name)>-1&&f.from<f.to){let u=Sa(f);return{start:c,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(Ta(f.type,t,a))h++;else if(Ta(f.type,-t,a)){if(h==0){let u=Sa(f);return{start:c,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?f.prevSibling():f.nextSibling());return{start:c,matched:!1}}function FT(n,e,t,i,s,o,a){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),c=a.indexOf(l);if(c<0||c%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let m=0;!f.next().done&&m<=o;){let T=f.value;t<0&&(m+=T.length);let y=e+m*t;for(let b=t>0?0:T.length-1,E=t>0?T.length:-1;b!=E;b+=t){let I=a.indexOf(T[b]);if(!(I<0||i.resolveInner(y+b,1).type!=s))if(I%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:y+b,to:y+b+1},matched:I>>1==c>>1};u--}}t>0&&(m+=T.length)}return f.done?{start:h,matched:!1}:null}const BT=Object.create(null),yc=[gt.none],Cc=[],Lc=Object.create(null),HT=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])HT[n]=WT(BT,e);function mo(n,e){Cc.indexOf(n)>-1||(Cc.push(n),console.warn(e))}function WT(n,e){let t=[];for(let l of e.split(" ")){let c=[];for(let h of l.split(".")){let f=n[h]||w[h];f?typeof f=="function"?c.length?c=c.map(f):mo(h,`Modifier ${h} used at start of tag`):c.length?mo(h,`Tag ${h} used as modifier`):c=Array.isArray(f)?f:[f]:mo(h,`Unknown highlighting tag ${h}`)}for(let h of c)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+t.map(l=>l.id),o=Lc[s];if(o)return o.id;let a=Lc[s]=gt.define({id:yc.length,name:i,props:[lu({[i]:t})]});return yc.push(a),a.id}De.RTL,De.LTR;const GT=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),i=el(n.state,t.from);return i.line?VT(n):i.block?YT(n):!1};function Za(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(i(t.update(s)),!0):!1}}const VT=Za(zT,0),qT=Za(yu,0),YT=Za((n,e)=>yu(n,e,XT(e)),0);function el(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const xi=50;function jT(n,{open:e,close:t},i,s){let o=n.sliceDoc(i-xi,i),a=n.sliceDoc(s,s+xi),l=/\s*$/.exec(o)[0].length,c=/^\s*/.exec(a)[0].length,h=o.length-l;if(o.slice(h-e.length,h)==e&&a.slice(c,c+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:s+c,margin:c&&1}};let f,u;s-i<=2*xi?f=u=n.sliceDoc(i,s):(f=n.sliceDoc(i,i+xi),u=n.sliceDoc(s-xi,s));let m=/^\s*/.exec(f)[0].length,T=/\s*$/.exec(u)[0].length,y=u.length-T-t.length;return f.slice(m,m+e.length)==e&&u.slice(y,y+t.length)==t?{open:{pos:i+m+e.length,margin:/\s/.test(f.charAt(m+e.length))?1:0},close:{pos:s-T-t.length,margin:/\s/.test(u.charAt(y-1))?1:0}}:null}function XT(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),s=t.to<=i.to?i:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function yu(n,e,t=e.selection.ranges){let i=t.map(o=>el(e,o.from).block);if(!i.every(o=>o))return null;let s=t.map((o,a)=>jT(e,i[a],o.from,o.to));if(n!=2&&!s.every(o=>o))return{changes:e.changes(t.map((o,a)=>s[a]?[]:[{from:o.from,insert:i[a].open+" "},{from:o.to,insert:" "+i[a].close}]))};if(n!=1&&s.some(o=>o)){let o=[];for(let a=0,l;a<s.length;a++)if(l=s[a]){let c=i[a],{open:h,close:f}=l;o.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:f.pos-f.margin,to:f.pos+c.close.length})}return{changes:o}}return null}function zT(n,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:o,to:a}of t){let l=i.length,c=1e9,h=el(e,o).line;if(h){for(let f=o;f<=a;){let u=e.doc.lineAt(f);if(u.from>s&&(o==a||a>u.from)){s=u.from;let m=/^\s*/.exec(u.text)[0].length,T=m==u.length,y=u.text.slice(m,m+h.length)==h?m:-1;m<u.text.length&&m<c&&(c=m),i.push({line:u,comment:y,token:h,indent:m,empty:T,single:!1})}f=u.to+1}if(c<1e9)for(let f=l;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=c);i.length==l+1&&(i[l].single=!0)}}if(n!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:c,indent:h,empty:f,single:u}of i)(u||!f)&&o.push({from:l.from+h,insert:c+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:l,token:c}of i)if(l>=0){let h=a.from+l,f=h+c.length;a.text[f-a.from]==" "&&f++,o.push({from:h,to:f})}return{changes:o}}return null}const Aa=qt.define(),KT=qt.define(),$T=ne.define(),Cu=ne.define({combine(n){return Yt(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}}),Lu=Ze.define({create(){return Gt.empty},update(n,e){let t=e.state.facet(Cu),i=e.annotation(Aa);if(i){let c=pt.fromTransaction(e,i.selection),h=i.side,f=h==0?n.undone:n.done;return c?f=Or(f,f.length,t.minDepth,c):f=xu(f,e.startState.selection),new Gt(h==0?i.rest:f,h==0?f:i.rest)}let s=e.annotation(KT);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(Ve.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=pt.fromTransaction(e),a=e.annotation(Ve.time),l=e.annotation(Ve.userEvent);return o?n=n.addChanges(o,a,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,l,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Gt(n.done.map(pt.fromJSON),n.undone.map(pt.fromJSON))}});function JT(n={}){return[Lu,Cu.of(n),J.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Iu:e.inputType=="historyRedo"?Ra:null;return i?(e.preventDefault(),i(t)):!1}})]}function Gr(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(Lu,!1);if(!s)return!1;let o=s.pop(n,t,e);return o?(i(o),!0):!1}}const Iu=Gr(0,!1),Ra=Gr(1,!1),QT=Gr(0,!0),ZT=Gr(1,!0);class pt{constructor(e,t,i,s,o){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new pt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new pt(e.changes&&Ge.fromJSON(e.changes),[],e.mapped&&Vt.fromJSON(e.mapped),e.startSelection&&B.fromJSON(e.startSelection),e.selectionsAfter.map(B.fromJSON))}static fromTransaction(e,t){let i=bt;for(let s of e.startState.facet($T)){let o=s(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new pt(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,bt)}static selection(e){return new pt(void 0,bt,void 0,void 0,e)}}function Or(n,e,t,i){let s=e+1>t+20?e-t-1:0,o=n.slice(s,e);return o.push(i),o}function eS(n,e){let t=[],i=!1;return n.iterChangedRanges((s,o)=>t.push(s,o)),e.iterChangedRanges((s,o,a,l)=>{for(let c=0;c<t.length;){let h=t[c++],f=t[c++];l>=h&&a<=f&&(i=!0)}}),i}function tS(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function wu(n,e){return n.length?e.length?n.concat(e):n:e}const bt=[],nS=200;function xu(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-nS));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Or(n,n.length-1,1e9,t.setSelAfter(i)))}else return[pt.selection([e])]}function iS(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Eo(n,e){if(!n.length)return n;let t=n.length,i=bt;for(;t;){let s=sS(n[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let o=n.slice(0,t);return o[t-1]=s,o}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[pt.selection(i)]:bt}function sS(n,e,t){let i=wu(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):bt,t);if(!n.changes)return pt.selection(i);let s=n.changes.map(e),o=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(o):o;return new pt(s,ge.mapEffects(n.effects,e),a,n.startSelection.map(o),i)}const rS=/^(input\.type|delete)($|\.)/;class Gt{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Gt(this.done,this.undone):this}addChanges(e,t,i,s,o){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||rS.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,eS(l.changes,e.changes))||i=="input.type.compose")?a=Or(a,a.length-1,s.minDepth,new pt(e.changes.compose(l.changes),wu(e.effects,l.effects),l.mapped,l.startSelection,bt)):a=Or(a,a.length,s.minDepth,e),new Gt(a,bt,t,i)}addSelection(e,t,i,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:bt;return o.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&tS(o[o.length-1],e)?this:new Gt(xu(this.done,e),this.undone,t,i)}addMapping(e){return new Gt(Eo(this.done,e),Eo(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],a=o.selectionsAfter[0]||t.selection;if(i&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Aa.of({side:e,rest:iS(s),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=s.length==1?bt:s.slice(0,s.length-1);return o.mapped&&(l=Eo(l,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Aa.of({side:e,rest:l,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Gt.empty=new Gt(bt,bt);const oS=[{key:"Mod-z",run:Iu,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ra,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ra,preventDefault:!0},{key:"Mod-u",run:QT,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:ZT,preventDefault:!0}];function Si(n,e){return B.create(n.ranges.map(e),n.mainIndex)}function jt(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Dt({state:n,dispatch:e},t){let i=Si(n.selection,t);return i.eq(n.selection,!0)?!1:(e(jt(n,i)),!0)}function Vr(n,e){return B.cursor(e?n.to:n.from)}function vu(n,e){return Dt(n,t=>t.empty?n.moveByChar(t,e):Vr(t,e))}function st(n){return n.textDirectionAt(n.state.selection.main.head)==De.LTR}const Du=n=>vu(n,!st(n)),ku=n=>vu(n,st(n));function Pu(n,e){return Dt(n,t=>t.empty?n.moveByGroup(t,e):Vr(t,e))}const aS=n=>Pu(n,!st(n)),lS=n=>Pu(n,st(n));function cS(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function qr(n,e,t){let i=je(n).resolveInner(e.head),s=t?me.closedBy:me.openedBy;for(let c=e.head;;){let h=t?i.childAfter(c):i.childBefore(c);if(!h)break;cS(n,h,s)?i=h:c=t?h.to:h.from}let o=i.type.prop(s),a,l;return o&&(a=t?Wt(n,i.from,1):Wt(n,i.to,-1))&&a.matched?l=t?a.end.to:a.end.from:l=t?i.to:i.from,B.cursor(l,t?-1:1)}const hS=n=>Dt(n,e=>qr(n.state,e,!st(n))),fS=n=>Dt(n,e=>qr(n.state,e,st(n)));function Mu(n,e){return Dt(n,t=>{if(!t.empty)return Vr(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const Uu=n=>Mu(n,!1),Fu=n=>Mu(n,!0);function Bu(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let o of n.state.facet(J.scrollMargins)){let a=o(n);a?.top&&(t=Math.max(a?.top,t)),a?.bottom&&(i=Math.max(a?.bottom,i))}s=n.scrollDOM.clientHeight-t-i}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function Hu(n,e){let t=Bu(n),{state:i}=n,s=Si(i.selection,a=>a.empty?n.moveVertically(a,e,t.height):Vr(a,e));if(s.eq(i.selection))return!1;let o;if(t.selfScroll){let a=n.coordsAtPos(i.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),c=l.top+t.marginTop,h=l.bottom-t.marginBottom;a&&a.top>c&&a.bottom<h&&(o=J.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-c}))}return n.dispatch(jt(i,s),{effects:o}),!0}const Ic=n=>Hu(n,!1),_a=n=>Hu(n,!0);function Nn(n,e,t){let i=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let o=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(s=B.cursor(i.from+o))}return s}const uS=n=>Dt(n,e=>Nn(n,e,!0)),dS=n=>Dt(n,e=>Nn(n,e,!1)),pS=n=>Dt(n,e=>Nn(n,e,!st(n))),gS=n=>Dt(n,e=>Nn(n,e,st(n))),mS=n=>Dt(n,e=>B.cursor(n.lineBlockAt(e.head).from,1)),ES=n=>Dt(n,e=>B.cursor(n.lineBlockAt(e.head).to,-1));function TS(n,e,t){let i=!1,s=Si(n.selection,o=>{let a=Wt(n,o.head,-1)||Wt(n,o.head,1)||o.head>0&&Wt(n,o.head-1,1)||o.head<n.doc.length&&Wt(n,o.head+1,-1);if(!a||!a.end)return o;i=!0;let l=a.start.from==o.head?a.end.to:a.end.from;return B.cursor(l)});return i?(e(jt(n,s)),!0):!1}const SS=({state:n,dispatch:e})=>TS(n,e);function It(n,e){let t=Si(n.state.selection,i=>{let s=e(i);return B.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(jt(n.state,t)),!0)}function Wu(n,e){return It(n,t=>n.moveByChar(t,e))}const Gu=n=>Wu(n,!st(n)),Vu=n=>Wu(n,st(n));function qu(n,e){return It(n,t=>n.moveByGroup(t,e))}const AS=n=>qu(n,!st(n)),RS=n=>qu(n,st(n)),_S=n=>It(n,e=>qr(n.state,e,!st(n))),OS=n=>It(n,e=>qr(n.state,e,st(n)));function Yu(n,e){return It(n,t=>n.moveVertically(t,e))}const ju=n=>Yu(n,!1),Xu=n=>Yu(n,!0);function zu(n,e){return It(n,t=>n.moveVertically(t,e,Bu(n).height))}const wc=n=>zu(n,!1),xc=n=>zu(n,!0),NS=n=>It(n,e=>Nn(n,e,!0)),bS=n=>It(n,e=>Nn(n,e,!1)),yS=n=>It(n,e=>Nn(n,e,!st(n))),CS=n=>It(n,e=>Nn(n,e,st(n))),LS=n=>It(n,e=>B.cursor(n.lineBlockAt(e.head).from)),IS=n=>It(n,e=>B.cursor(n.lineBlockAt(e.head).to)),vc=({state:n,dispatch:e})=>(e(jt(n,{anchor:0})),!0),Dc=({state:n,dispatch:e})=>(e(jt(n,{anchor:n.doc.length})),!0),kc=({state:n,dispatch:e})=>(e(jt(n,{anchor:n.selection.main.anchor,head:0})),!0),Pc=({state:n,dispatch:e})=>(e(jt(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),wS=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),xS=({state:n,dispatch:e})=>{let t=Yr(n).map(({from:i,to:s})=>B.range(i,Math.min(s+1,n.doc.length)));return e(n.update({selection:B.create(t),userEvent:"select"})),!0},vS=({state:n,dispatch:e})=>{let t=Si(n.selection,i=>{var s;let o=je(n).resolveStack(i.from,1);for(let a=o;a;a=a.next){let{node:l}=a;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&(!((s=l.parent)===null||s===void 0)&&s.parent))return B.range(l.to,l.from)}return i});return e(jt(n,t)),!0},DS=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=B.create([t.main]):t.main.empty||(i=B.create([B.cursor(t.main.head)])),i?(e(jt(n,i)),!0):!1};function gs(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,s=i.changeByRange(o=>{let{from:a,to:l}=o;if(a==l){let c=e(o);c<a?(t="delete.backward",c=Vs(n,c,!1)):c>a&&(t="delete.forward",c=Vs(n,c,!0)),a=Math.min(a,c),l=Math.max(l,c)}else a=Vs(n,a,!1),l=Vs(n,l,!0);return a==l?{range:o}:{changes:{from:a,to:l},range:B.cursor(a,a<o.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?J.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Vs(n,e,t){if(n instanceof J)for(let i of n.state.facet(J.atomicRanges).map(s=>s(n)))i.between(e,e,(s,o)=>{s<e&&o>e&&(e=t?o:s)});return e}const Ku=(n,e,t)=>gs(n,i=>{let s=i.from,{state:o}=n,a=o.doc.lineAt(s),l,c;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(l=a.text.slice(0,s-a.from))){if(l[l.length-1]=="	")return s-1;let h=Ei(l,o.tabSize),f=h%Ar(o)||Ar(o);for(let u=0;u<f&&l[l.length-1-u]==" ";u++)s--;c=s}else c=Qe(a.text,s-a.from,e,e)+a.from,c==s&&a.number!=(e?o.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(c-a.from,s-a.from))&&(c=Qe(a.text,c-a.from,!1,!1)+a.from);return c}),Oa=n=>Ku(n,!1,!0),$u=n=>Ku(n,!0,!1),Ju=(n,e)=>gs(n,t=>{let i=t.head,{state:s}=n,o=s.doc.lineAt(i),a=s.charCategorizer(i);for(let l=null;;){if(i==(e?o.to:o.from)){i==t.head&&o.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let c=Qe(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,c)-o.from,Math.max(i,c)-o.from),f=a(h);if(l!=null&&f!=l)break;(h!=" "||i!=t.head)&&(l=f),i=c}return i}),Qu=n=>Ju(n,!1),kS=n=>Ju(n,!0),PS=n=>gs(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),MS=n=>gs(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),US=n=>gs(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),FS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:_e.of(["",""])},range:B.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},BS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let s=i.from,o=n.doc.lineAt(s),a=s==o.from?s-1:Qe(o.text,s-o.from,!1)+o.from,l=s==o.to?s+1:Qe(o.text,s-o.from,!0)+o.from;return{changes:{from:a,to:l,insert:n.doc.slice(s,l).append(n.doc.slice(a,s))},range:B.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Yr(n){let e=[],t=-1;for(let i of n.selection.ranges){let s=n.doc.lineAt(i.from),o=n.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=n.doc.lineAt(i.to-1)),t>=s.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(i)}else e.push({from:s.from,to:o.to,ranges:[i]});t=o.number+1}return e}function Zu(n,e,t){if(n.readOnly)return!1;let i=[],s=[];for(let o of Yr(n)){if(t?o.to==n.doc.length:o.from==0)continue;let a=n.doc.lineAt(t?o.to+1:o.from-1),l=a.length+1;if(t){i.push({from:o.to,to:a.to},{from:o.from,insert:a.text+n.lineBreak});for(let c of o.ranges)s.push(B.range(Math.min(n.doc.length,c.anchor+l),Math.min(n.doc.length,c.head+l)))}else{i.push({from:a.from,to:o.from},{from:o.to,insert:n.lineBreak+a.text});for(let c of o.ranges)s.push(B.range(c.anchor-l,c.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:B.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const HS=({state:n,dispatch:e})=>Zu(n,e,!1),WS=({state:n,dispatch:e})=>Zu(n,e,!0);function ed(n,e,t){if(n.readOnly)return!1;let i=[];for(let s of Yr(n))t?i.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):i.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const GS=({state:n,dispatch:e})=>ed(n,e,!1),VS=({state:n,dispatch:e})=>ed(n,e,!0),qS=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Yr(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),i=Si(e.selection,s=>{let o;if(n.lineWrapping){let a=n.lineBlockAt(s.head),l=n.coordsAtPos(s.head,s.assoc||1);l&&(o=a.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,o)}).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function YS(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=je(n).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),o;return i&&s&&i.to<=e&&s.from>=e&&(o=i.type.prop(me.closedBy))&&o.indexOf(s.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const jS=td(!1),XS=td(!0);function td(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:o,to:a}=s,l=e.doc.lineAt(o),c=!n&&o==a&&YS(e,o);n&&(o=a=(a<=l.to?l:e.doc.lineAt(a)).to);let h=new Hr(e,{simulateBreak:o,simulateDoubleBreak:!!c}),f=$a(h,o);for(f==null&&(f=Ei(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;c?{from:o,to:a}=c:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let u=["",ns(e,f)];return c&&u.push(ns(e,h.lineIndent(l.from,-1))),{changes:{from:o,to:a,insert:_e.of(u)},range:B.cursor(o+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function tl(n,e){let t=-1;return n.changeByRange(i=>{let s=[];for(let a=i.from;a<=i.to;){let l=n.doc.lineAt(a);l.number>t&&(i.empty||i.to>l.from)&&(e(l,s,i),t=l.number),a=l.to+1}let o=n.changes(s);return{changes:s,range:B.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const zS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new Hr(n,{overrideIndentation:o=>{let a=t[o];return a??-1}}),s=tl(n,(o,a,l)=>{let c=$a(i,o.from);if(c==null)return;/\S/.test(o.text)||(c=0);let h=/^\s*/.exec(o.text)[0],f=ns(n,c);(h!=f||l.from<o.from+h.length)&&(t[o.from]=c,a.push({from:o.from,to:o.from+h.length,insert:f}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},nd=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(tl(n,(t,i)=>{i.push({from:t.from,insert:n.facet(Br)})}),{userEvent:"input.indent"})),!0),id=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(tl(n,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let o=Ei(s,n.tabSize),a=0,l=ns(n,Math.max(0,o-Ar(n)));for(;a<s.length&&a<l.length&&s.charCodeAt(a)==l.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+s.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),KS=n=>(n.setTabFocusMode(),!0),$S=[{key:"Ctrl-b",run:Du,shift:Gu,preventDefault:!0},{key:"Ctrl-f",run:ku,shift:Vu},{key:"Ctrl-p",run:Uu,shift:ju},{key:"Ctrl-n",run:Fu,shift:Xu},{key:"Ctrl-a",run:mS,shift:LS},{key:"Ctrl-e",run:ES,shift:IS},{key:"Ctrl-d",run:$u},{key:"Ctrl-h",run:Oa},{key:"Ctrl-k",run:PS},{key:"Ctrl-Alt-h",run:Qu},{key:"Ctrl-o",run:FS},{key:"Ctrl-t",run:BS},{key:"Ctrl-v",run:_a}],JS=[{key:"ArrowLeft",run:Du,shift:Gu,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:aS,shift:AS,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:pS,shift:yS,preventDefault:!0},{key:"ArrowRight",run:ku,shift:Vu,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:lS,shift:RS,preventDefault:!0},{mac:"Cmd-ArrowRight",run:gS,shift:CS,preventDefault:!0},{key:"ArrowUp",run:Uu,shift:ju,preventDefault:!0},{mac:"Cmd-ArrowUp",run:vc,shift:kc},{mac:"Ctrl-ArrowUp",run:Ic,shift:wc},{key:"ArrowDown",run:Fu,shift:Xu,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Dc,shift:Pc},{mac:"Ctrl-ArrowDown",run:_a,shift:xc},{key:"PageUp",run:Ic,shift:wc},{key:"PageDown",run:_a,shift:xc},{key:"Home",run:dS,shift:bS,preventDefault:!0},{key:"Mod-Home",run:vc,shift:kc},{key:"End",run:uS,shift:NS,preventDefault:!0},{key:"Mod-End",run:Dc,shift:Pc},{key:"Enter",run:jS},{key:"Mod-a",run:wS},{key:"Backspace",run:Oa,shift:Oa},{key:"Delete",run:$u},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Qu},{key:"Mod-Delete",mac:"Alt-Delete",run:kS},{mac:"Mod-Backspace",run:MS},{mac:"Mod-Delete",run:US}].concat($S.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),sd=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:hS,shift:_S},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:fS,shift:OS},{key:"Alt-ArrowUp",run:HS},{key:"Shift-Alt-ArrowUp",run:GS},{key:"Alt-ArrowDown",run:WS},{key:"Shift-Alt-ArrowDown",run:VS},{key:"Escape",run:DS},{key:"Mod-Enter",run:XS},{key:"Alt-l",mac:"Ctrl-l",run:xS},{key:"Mod-i",run:vS,preventDefault:!0},{key:"Mod-[",run:id},{key:"Mod-]",run:nd},{key:"Mod-Alt-\\",run:zS},{key:"Shift-Mod-k",run:qS},{key:"Shift-Mod-\\",run:SS},{key:"Mod-/",run:GT},{key:"Alt-A",run:qT},{key:"Ctrl-m",mac:"Shift-Alt-m",run:KS}].concat(JS),QS={key:"Tab",run:nd,shift:id};function we(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?n.setAttribute(i,s):s!=null&&(n[i]=s)}e++}for(;e<arguments.length;e++)rd(n,arguments[e]);return n}function rd(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)rd(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Mc=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class pi{constructor(e,t,i=0,s=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=o?l=>o(Mc(l)):Mc,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ke(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Da(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Nt(e);let s=this.normalize(t);for(let o=0,a=i;;o++){let l=s.charCodeAt(o),c=this.match(l,a,this.bufferPos+this.bufferStart);if(o==s.length-1){if(c)return this.value=c,this;break}a==i&&o<t.length&&t.charCodeAt(o)==l&&a++}}}match(e,t,i){let s=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],l=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?s={from:this.matches[o+1],to:i}:(this.matches[o]++,l=!0)),l||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:t,to:i}:this.matches.push(1,t)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(pi.prototype[Symbol.iterator]=function(){return this});const od={from:-1,to:-1,match:/.*/.exec("")},nl="gm"+(/x/.unicode==null?"":"u");class ad{constructor(e,t,i,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=od,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new ld(e,t,i,s,o);this.re=new RegExp(t,nl+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=Nr(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=Nr(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const To=new WeakMap;class ri{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=To.get(e);if(!s||s.from>=i||s.to<=t){let l=new ri(t,e.sliceString(t,i));return To.set(e,l),l}if(s.from==t&&s.to==i)return s;let{text:o,from:a}=s;return a>t&&(o=e.sliceString(t,a)+o,a=t),s.to<i&&(o+=e.sliceString(s.to,i)),To.set(e,new ri(a,o)),new ri(t,o.slice(t-a,i-a))}}class ld{constructor(e,t,i,s,o){this.text=e,this.to=o,this.done=!1,this.value=od,this.matchPos=Nr(e,s),this.re=new RegExp(t,nl+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=ri.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=Nr(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ri.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ad.prototype[Symbol.iterator]=ld.prototype[Symbol.iterator]=function(){return this});function ZS(n){try{return new RegExp(n,nl),!0}catch{return!1}}function Nr(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Na(n){let e=String(n.state.doc.lineAt(n.state.selection.main.head).number),t=we("input",{class:"cm-textfield",name:"line",value:e}),i=we("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),n.dispatch({effects:br.of(!1)}),n.focus()):o.keyCode==13&&(o.preventDefault(),s())},onsubmit:o=>{o.preventDefault(),s()}},we("label",n.state.phrase("Go to line"),": ",t)," ",we("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function s(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!o)return;let{state:a}=n,l=a.doc.lineAt(a.selection.main.head),[,c,h,f,u]=o,m=f?+f.slice(1):0,T=h?+h:l.number;if(h&&u){let E=T/100;c&&(E=E*(c=="-"?-1:1)+l.number/a.doc.lines),T=Math.round(a.doc.lines*E)}else h&&c&&(T=T*(c=="-"?-1:1)+l.number);let y=a.doc.line(Math.max(1,Math.min(a.doc.lines,T))),b=B.cursor(y.from+Math.max(0,Math.min(m,y.length)));n.dispatch({effects:[br.of(!1),J.scrollIntoView(b.from,{y:"center"})],selection:b}),n.focus()}return{dom:i}}const br=ge.define(),Uc=Ze.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(br)&&(n=t.value);return n},provide:n=>es.from(n,e=>e?Na:null)}),eA=n=>{let e=Zi(n,Na);if(!e){let t=[br.of(!0)];n.state.field(Uc,!1)==null&&t.push(ge.appendConfig.of([Uc,tA])),n.dispatch({effects:t}),e=Zi(n,Na)}return e&&e.dom.querySelector("input").select(),!0},tA=J.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),nA={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},iA=ne.define({combine(n){return Yt(n,nA,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function sA(n){return[cA,lA]}const rA=ae.mark({class:"cm-selectionMatch"}),oA=ae.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Fc(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Pe.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Pe.Word)}function aA(n,e,t,i){return n(e.sliceDoc(t,t+1))==Pe.Word&&n(e.sliceDoc(i-1,i))==Pe.Word}const lA=Fe.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(iA),{state:t}=n,i=t.selection;if(i.ranges.length>1)return ae.none;let s=i.main,o,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return ae.none;let c=t.wordAt(s.head);if(!c)return ae.none;a=t.charCategorizer(s.head),o=t.sliceDoc(c.from,c.to)}else{let c=s.to-s.from;if(c<e.minSelectionLength||c>200)return ae.none;if(e.wholeWords){if(o=t.sliceDoc(s.from,s.to),a=t.charCategorizer(s.head),!(Fc(a,t,s.from,s.to)&&aA(a,t,s.from,s.to)))return ae.none}else if(o=t.sliceDoc(s.from,s.to),!o)return ae.none}let l=[];for(let c of n.visibleRanges){let h=new pi(t.doc,o,c.from,c.to);for(;!h.next().done;){let{from:f,to:u}=h.value;if((!a||Fc(a,t,f,u))&&(s.empty&&f<=s.from&&u>=s.to?l.push(oA.range(f,u)):(f>=s.to||u<=s.from)&&l.push(rA.range(f,u)),l.length>e.maxMatches))return ae.none}}return ae.set(l)}},{decorations:n=>n.decorations}),cA=J.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),hA=({state:n,dispatch:e})=>{let{selection:t}=n,i=B.create(t.ranges.map(s=>n.wordAt(s.head)||B.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function fA(n,e){let{main:t,ranges:i}=n.selection,s=n.wordAt(t.head),o=s&&s.from==t.from&&s.to==t.to;for(let a=!1,l=new pi(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new pi(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(c=>c.from==l.value.from))continue;if(o){let c=n.wordAt(l.value.from);if(!c||c.from!=l.value.from||c.to!=l.value.to)continue}return l.value}}const uA=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return hA({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=i))return!1;let s=fA(n,i);return s?(e(n.update({selection:n.selection.addRange(B.range(s.from,s.to),!1),effects:J.scrollIntoView(s.to)})),!0):!1},Ai=ne.define({combine(n){return Yt(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new NA(e),scrollToMatch:e=>J.scrollIntoView(e)})}});class cd{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||ZS(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new mA(this):new pA(this)}getCursor(e,t=0,i){let s=e.doc?e:Ee.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?$n(this,s,t,i):Kn(this,s,t,i)}}class hd{constructor(e){this.spec=e}}function Kn(n,e,t,i){return new pi(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:s=>s.toLowerCase(),n.wholeWord?dA(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function dA(n,e){return(t,i,s,o)=>((o>t||o+s.length<i)&&(o=Math.max(0,t-2),s=n.sliceString(o,Math.min(n.length,i+2))),(e(yr(s,t-o))!=Pe.Word||e(Cr(s,t-o))!=Pe.Word)&&(e(Cr(s,i-o))!=Pe.Word||e(yr(s,i-o))!=Pe.Word))}class pA extends hd{constructor(e){super(e)}nextMatch(e,t,i){let s=Kn(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=Kn(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let o=Math.max(t,s-1e4-this.spec.unquoted.length),a=Kn(this.spec,e,o,s),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(o==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Kn(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=Kn(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function $n(n,e,t,i){return new ad(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?gA(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function yr(n,e){return n.slice(Qe(n,e,!1),e)}function Cr(n,e){return n.slice(e,Qe(n,e))}function gA(n){return(e,t,i)=>!i[0].length||(n(yr(i.input,i.index))!=Pe.Word||n(Cr(i.input,i.index))!=Pe.Word)&&(n(Cr(i.input,i.index+i[0].length))!=Pe.Word||n(yr(i.input,i.index+i[0].length))!=Pe.Word)}class mA extends hd{nextMatch(e,t,i){let s=$n(this.spec,e,i,e.doc.length).next();return s.done&&(s=$n(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let o=Math.max(t,i-s*1e4),a=$n(this.spec,e,o,i),l=null;for(;!a.next().done;)l=a.value;if(l&&(o==t||l.from>o+10))return l;if(o==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=$n(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let o=$n(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const is=ge.define(),il=ge.define(),mn=Ze.define({create(n){return new So(ba(n).create(),null)},update(n,e){for(let t of e.effects)t.is(is)?n=new So(t.value.create(),n.panel):t.is(il)&&(n=new So(n.query,t.value?sl:null));return n},provide:n=>es.from(n,e=>e.panel)});class So{constructor(e,t){this.query=e,this.panel=t}}const EA=ae.mark({class:"cm-searchMatch"}),TA=ae.mark({class:"cm-searchMatch cm-searchMatch-selected"}),SA=Fe.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(mn))}update(n){let e=n.state.field(mn);(e!=n.startState.field(mn)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return ae.none;let{view:t}=this,i=new Tn;for(let s=0,o=t.visibleRanges,a=o.length;s<a;s++){let{from:l,to:c}=o[s];for(;s<a-1&&c>o[s+1].from-2*250;)c=o[++s].to;n.highlight(t.state,l,c,(h,f)=>{let u=t.state.selection.ranges.some(m=>m.from==h&&m.to==f);i.add(h,f,u?TA:EA)})}return i.finish()}},{decorations:n=>n.decorations});function ms(n){return e=>{let t=e.state.field(mn,!1);return t&&t.query.spec.valid?n(e,t):dd(e)}}const Lr=ms((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);if(!i)return!1;let s=B.single(i.from,i.to),o=n.state.facet(Ai);return n.dispatch({selection:s,effects:[rl(n,i),o.scrollToMatch(s.main,n)],userEvent:"select.search"}),ud(n),!0}),Ir=ms((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);if(!s)return!1;let o=B.single(s.from,s.to),a=n.state.facet(Ai);return n.dispatch({selection:o,effects:[rl(n,s),a.scrollToMatch(o.main,n)],userEvent:"select.search"}),ud(n),!0}),AA=ms((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:B.create(t.map(i=>B.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),RA=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,o=[],a=0;for(let l=new pi(n.doc,n.sliceDoc(i,s));!l.next().done;){if(o.length>1e3)return!1;l.value.from==i&&(a=o.length),o.push(B.range(l.value.from,l.value.to))}return e(n.update({selection:B.create(o,a),userEvent:"select.search.matches"})),!0},Bc=ms((n,{query:e})=>{let{state:t}=n,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,i,i);if(!o)return!1;let a=[],l,c,h=[];if(o.from==i&&o.to==s&&(c=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(t,o.from,o.to),h.push(J.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),o){let f=a.length==0||a[0].from>=o.to?0:o.to-o.from-c.length;l=B.single(o.from-f,o.to-f),h.push(rl(n,o)),h.push(t.facet(Ai).scrollToMatch(l.main,n))}return n.dispatch({changes:a,selection:l,effects:h,userEvent:"input.replace"}),!0}),_A=ms((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(s=>{let{from:o,to:a}=s;return{from:o,to:a,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:J.announce.of(i),userEvent:"input.replace.all"}),!0});function sl(n){return n.state.facet(Ai).createPanel(n)}function ba(n,e){var t,i,s,o,a;let l=n.selection.main,c=l.empty||l.to>l.from+100?"":n.sliceDoc(l.from,l.to);if(e&&!c)return e;let h=n.facet(Ai);return new cd({search:((t=e?.literal)!==null&&t!==void 0?t:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:h.wholeWord})}function fd(n){let e=Zi(n,sl);return e&&e.dom.querySelector("[main-field]")}function ud(n){let e=fd(n);e&&e==n.root.activeElement&&e.select()}const dd=n=>{let e=n.state.field(mn,!1);if(e&&e.panel){let t=fd(n);if(t&&t!=n.root.activeElement){let i=ba(n.state,e.query.spec);i.valid&&n.dispatch({effects:is.of(i)}),t.focus(),t.select()}}else n.dispatch({effects:[il.of(!0),e?is.of(ba(n.state,e.query.spec)):ge.appendConfig.of(yA)]});return!0},pd=n=>{let e=n.state.field(mn,!1);if(!e||!e.panel)return!1;let t=Zi(n,sl);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:il.of(!1)}),!0},OA=[{key:"Mod-f",run:dd,scope:"editor search-panel"},{key:"F3",run:Lr,shift:Ir,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Lr,shift:Ir,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:pd,scope:"editor search-panel"},{key:"Mod-Shift-l",run:RA},{key:"Mod-Alt-g",run:eA},{key:"Mod-d",run:uA,preventDefault:!0}];class NA{constructor(e){this.view=e;let t=this.query=e.state.field(mn).query.spec;this.commit=this.commit.bind(this),this.searchField=we("input",{value:t.search,placeholder:Et(e,"Find"),"aria-label":Et(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=we("input",{value:t.replace,placeholder:Et(e,"Replace"),"aria-label":Et(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=we("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=we("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=we("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,o,a){return we("button",{class:"cm-button",name:s,onclick:o,type:"button"},a)}this.dom=we("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Lr(e),[Et(e,"next")]),i("prev",()=>Ir(e),[Et(e,"previous")]),i("select",()=>AA(e),[Et(e,"all")]),we("label",null,[this.caseField,Et(e,"match case")]),we("label",null,[this.reField,Et(e,"regexp")]),we("label",null,[this.wordField,Et(e,"by word")]),...e.state.readOnly?[]:[we("br"),this.replaceField,i("replace",()=>Bc(e),[Et(e,"replace")]),i("replaceAll",()=>_A(e),[Et(e,"replace all")])],we("button",{name:"close",onclick:()=>pd(e),"aria-label":Et(e,"close"),type:"button"},["×"])])}commit(){let e=new cd({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:is.of(e)}))}keydown(e){vm(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ir:Lr)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Bc(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(is)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ai).top}}function Et(n,e){return n.state.phrase(e)}const qs=30,Ys=/[\s\.,:;?!]/;function rl(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),s=n.state.doc.lineAt(t).to,o=Math.max(i.from,e-qs),a=Math.min(s,t+qs),l=n.state.sliceDoc(o,a);if(o!=i.from){for(let c=0;c<qs;c++)if(!Ys.test(l[c+1])&&Ys.test(l[c])){l=l.slice(c);break}}if(a!=s){for(let c=l.length-1;c>l.length-qs;c--)if(!Ys.test(l[c-1])&&Ys.test(l[c])){l=l.slice(0,c);break}}return J.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const bA=J.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),yA=[mn,Vn.low(SA),bA];class gd{constructor(e,t,i,s){this.state=e,this.pos=t,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=je(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),o=s.search(Ed(e,!1));return o<0?null:{from:i+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Hc(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function CA(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let o=1;o<s.length;o++)t[s[o]]=!0}let i=Hc(e)+Hc(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function md(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:CA(e);return s=>{let o=s.matchBefore(i);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:t}:null}}function LA(n,e){return t=>{for(let i=je(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(n.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class Wc{constructor(e,t,i,s){this.completion=e,this.source=t,this.match=i,this.score=s}}function En(n){return n.selection.main.from}function Ed(n,e){var t;let{source:i}=n,s=e&&i[0]!="^",o=i[i.length-1]!="$";return!s&&!o?n:new RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Td=qt.define();function IA(n,e,t,i){let{main:s}=n.selection,o=t-s.from,a=i-s.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=s&&t!=i&&n.sliceDoc(l.from+o,l.from+a)!=n.sliceDoc(t,i)?{range:l}:{changes:{from:l.from+o,to:i==s.from?l.to:l.from+a,insert:e},range:B.cursor(l.from+o+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Gc=new WeakMap;function wA(n){if(!Array.isArray(n))return n;let e=Gc.get(n);return e||Gc.set(n,e=md(n)),e}const wr=ge.define(),ss=ge.define();class xA{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Ke(e,t),s=Nt(i);this.chars.push(i);let o=e.slice(t,t+s),a=o.toUpperCase();this.folded.push(Ke(a==o?o.toLowerCase():a,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:o,byWord:a}=this;if(t.length==1){let D=Ke(e,0),Y=Nt(D),V=Y==e.length?0:-100;if(D!=t[0])if(D==i[0])V+=-200;else return null;return this.ret(V,[0,Y])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=t.length,h=0;if(l<0){for(let D=0,Y=Math.min(e.length,200);D<Y&&h<c;){let V=Ke(e,D);(V==t[h]||V==i[h])&&(s[h++]=D),D+=Nt(V)}if(h<c)return null}let f=0,u=0,m=!1,T=0,y=-1,b=-1,E=/[a-z]/.test(e),I=!0;for(let D=0,Y=Math.min(e.length,200),V=0;D<Y&&u<c;){let W=Ke(e,D);l<0&&(f<c&&W==t[f]&&(o[f++]=D),T<c&&(W==t[T]||W==i[T]?(T==0&&(y=D),b=D+1,T++):T=0));let U,q=W<255?W>=48&&W<=57||W>=97&&W<=122?2:W>=65&&W<=90?1:0:(U=Da(W))!=U.toLowerCase()?1:U!=U.toUpperCase()?2:0;(!D||q==1&&E||V==0&&q!=0)&&(t[u]==W||i[u]==W&&(m=!0)?a[u++]=D:a.length&&(I=!1)),V=q,D+=Nt(W)}return u==c&&a[0]==0&&I?this.result(-100+(m?-200:0),a,e):T==c&&y==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):T==c?this.ret(-900-e.length,[y,b]):u==c?this.result(-100+(m?-200:0)+-700+(I?0:-1100),a,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[],o=0;for(let a of t){let l=a+(this.astral?Nt(Ke(i,a)):1);o&&s[o-1]==a?s[o-1]=l:(s[o++]=a,s[o++]=l)}return this.ret(e-i.length,s)}}class vA{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Je=ne.define({combine(n){return Yt(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:DA,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Vc(e(i),t(i)),optionClass:(e,t)=>i=>Vc(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Vc(n,e){return n?e?n+" "+e:n:e}function DA(n,e,t,i,s,o){let a=n.textDirection==De.RTL,l=a,c=!1,h="top",f,u,m=e.left-s.left,T=s.right-e.right,y=i.right-i.left,b=i.bottom-i.top;if(l&&m<Math.min(y,T)?l=!1:!l&&T<Math.min(y,m)&&(l=!0),y<=(l?m:T))f=Math.max(s.top,Math.min(t.top,s.bottom-b))-e.top,u=Math.min(400,l?m:T);else{c=!0,u=Math.min(400,(a?e.right:s.right-e.left)-30);let D=s.bottom-e.bottom;D>=b||D>e.top?f=t.bottom-e.top:(h="bottom",f=e.bottom-t.top)}let E=(e.bottom-e.top)/o.offsetHeight,I=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${f/E}px; max-width: ${u/I}px`,class:"cm-completionInfo-"+(c?a?"left-narrow":"right-narrow":l?"left":"right")}}function kA(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s,o){let a=document.createElement("span");a.className="cm-completionLabel";let l=t.displayLabel||t.label,c=0;for(let h=0;h<o.length;){let f=o[h++],u=o[h++];f>c&&a.appendChild(document.createTextNode(l.slice(c,f)));let m=a.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(l.slice(f,u))),m.className="cm-completionMatchedText",c=u}return c<l.length&&a.appendChild(document.createTextNode(l.slice(c))),a},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Ao(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class PA{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:o,selected:a}=s.open,l=e.state.facet(Je);this.optionContent=kA(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Ao(o.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(t).open;for(let f=c.target,u;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(u=/-(\d+)$/.exec(f.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Je).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:ss.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:o,selected:a,disabled:l}=i.open;(!s.open||s.open.options!=o)&&(this.range=Ao(o.length,a,e.state.facet(Je).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),l!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Ao(t.options.length,t.selected,this.view.state.facet(Je).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>dt(this.view.state,a,"completion info")):this.addInfoPane(o,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;i.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&UA(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return s.top>Math.min(o.bottom,t.bottom)-10||s.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(Je).positionInfo(this.view,t,s,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let a=i.from;a<i.to;a++){let{completion:l,match:c}=e[a],{section:h}=l;if(h){let m=typeof h=="string"?h:h.name;if(m!=o&&(a>i.from||i.from==0))if(o=m,typeof h!="string"&&h.header)s.appendChild(h.header(h));else{let T=s.appendChild(document.createElement("completion-section"));T.textContent=m}}const f=s.appendChild(document.createElement("li"));f.id=t+"-"+a,f.setAttribute("role","option");let u=this.optionClass(l);u&&(f.className=u);for(let m of this.optionContent){let T=m(l,this.view.state,this.view,c);T&&f.appendChild(T)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function MA(n,e){return t=>new PA(t,n,e)}function UA(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.height/n.offsetHeight;i.top<t.top?n.scrollTop-=(t.top-i.top)/s:i.bottom>t.bottom&&(n.scrollTop+=(i.bottom-t.bottom)/s)}function qc(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function FA(n,e){let t=[],i=null,s=h=>{t.push(h);let{section:f}=h.completion;if(f){i||(i=[]);let u=typeof f=="string"?f:f.name;i.some(m=>m.name==u)||i.push(typeof f=="string"?{name:u}:f)}},o=e.facet(Je);for(let h of n)if(h.hasResult()){let f=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)s(new Wc(u,h.source,f?f(u):[],1e9-t.length));else{let u=e.sliceDoc(h.from,h.to),m,T=o.filterStrict?new vA(u):new xA(u);for(let y of h.result.options)if(m=T.match(y.label)){let b=y.displayLabel?f?f(y,m.matched):[]:m.matched;s(new Wc(y,h.source,b,m.score+(y.boost||0)))}}}if(i){let h=Object.create(null),f=0,u=(m,T)=>{var y,b;return((y=m.rank)!==null&&y!==void 0?y:1e9)-((b=T.rank)!==null&&b!==void 0?b:1e9)||(m.name<T.name?-1:1)};for(let m of i.sort(u))f-=1e5,h[m.name]=f;for(let m of t){let{section:T}=m.completion;T&&(m.score+=h[typeof T=="string"?T:T.name])}}let a=[],l=null,c=o.compareCompletions;for(let h of t.sort((f,u)=>u.score-f.score||c(f.completion,u.completion))){let f=h.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?a.push(h):qc(h.completion)>qc(l)&&(a[a.length-1]=h),l=h.completion}return a}class ei{constructor(e,t,i,s,o,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=o,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ei(this.options,Yc(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,o){let a=FA(e,t);if(!a.length)return s&&e.some(c=>c.state==1)?new ei(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let l=t.facet(Je).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let c=s.options[s.selected].completion;for(let h=0;h<a.length;h++)if(a[h].completion==c){l=h;break}}return new ei(a,Yc(i,l),{pos:e.reduce((c,h)=>h.hasResult()?Math.min(c,h.from):c,1e8),create:qA,above:o.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new ei(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class xr{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new xr(GA,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Je),o=(i.override||t.languageDataAt("autocomplete",En(t)).map(wA)).map(l=>(this.active.find(h=>h.source==l)||new At(l,this.active.some(h=>h.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((l,c)=>l==this.active[c])&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!BA(o,this.active)?a=ei.build(o,t,this.id,a,i):a&&a.disabled&&!o.some(l=>l.state==1)&&(a=null),!a&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new At(l.source,0):l));for(let l of e.effects)l.is(Rd)&&(a=a&&a.setSelected(l.value,this.id));return o==this.active&&a==this.open?this:new xr(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?HA:WA}}function BA(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==n.length,o=i==e.length;if(s||o)return s==o;if(n[t++].result!=e[i++].result)return!1}}const HA={"aria-autocomplete":"list"},WA={};function Yc(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const GA=[];function Sd(n,e){if(n.isUserEvent("input.complete")){let i=n.annotation(Td);if(i&&e.activateOnCompletion(i))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class At{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=Sd(e,t),s=this;(i&8||i&16&&this.touches(e))&&(s=new At(s.source,0)),i&4&&s.state==0&&(s=new At(this.source,1)),s=s.updateFor(e,i);for(let o of e.effects)if(o.is(wr))s=new At(s.source,1,o.value?En(e.state):-1);else if(o.is(ss))s=new At(s.source,0);else if(o.is(Ad))for(let a of o.value)a.source==s.source&&(s=a);return s}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new At(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(En(e.state))}}class oi extends At{constructor(e,t,i,s,o){super(e,2,t),this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=En(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>a||!s||t&2&&En(e.startState)==this.from)return new At(this.source,t&4?1:0);let c=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return VA(s.validFor,e.state,o,a)?new oi(this.source,c,s,o,a):s.update&&(s=s.update(s,o,a,new gd(e.state,l,c>=0)))?new oi(this.source,c,s,s.from,(i=s.to)!==null&&i!==void 0?i:En(e.state)):new At(this.source,1,c)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new oi(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new At(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function VA(n,e,t,i){if(!n)return!1;let s=e.sliceDoc(t,i);return typeof n=="function"?n(s,t,i,e):Ed(n,!0).test(s)}const Ad=ge.define({map(n,e){return n.map(t=>t.map(e))}}),Rd=ge.define(),ut=Ze.define({create(){return xr.start()},update(n,e){return n.update(e)},provide:n=>[Ya.from(n,e=>e.tooltip),J.contentAttributes.from(n,e=>e.attrs)]});function ol(n,e){const t=e.completion.apply||e.completion.label;let i=n.state.field(ut).active.find(s=>s.source==e.source);return i instanceof oi?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},IA(n.state,t,i.from,i.to)),{annotations:Td.of(e.completion)})):t(n,e.completion,i.from,i.to),!0):!1}const qA=MA(ut,ol);function js(n,e="option"){return t=>{let i=t.state.field(ut,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Je).interactionDelay)return!1;let s=1,o;e=="page"&&(o=Zf(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,l=i.open.selected>-1?i.open.selected+s*(n?1:-1):n?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),t.dispatch({effects:Rd.of(l)}),!0}}const YA=n=>{let e=n.state.field(ut,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Je).interactionDelay?!1:ol(n,e.open.options[e.open.selected])},jA=n=>n.state.field(ut,!1)?(n.dispatch({effects:wr.of(!0)}),!0):!1,XA=n=>{let e=n.state.field(ut,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:ss.of(null)}),!0)};class zA{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const KA=50,$A=1e3,JA=Fe.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(ut).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(ut),t=n.state.facet(Je);if(!n.selectionSet&&!n.docChanged&&n.startState.field(ut)==e)return;let i=n.transactions.some(o=>{let a=Sd(o,t);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(i||a.context.abortOnDocChange&&n.docChanged||a.updates.length+n.transactions.length>KA&&Date.now()-a.time>$A){for(let l of a.context.abortListeners)try{l()}catch(c){dt(this.view.state,c)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(o=>o.effects.some(a=>a.is(wr)))&&(this.pendingStart=!0);let s=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.state==1&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of n.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(ut);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=En(e),i=new gd(e,t,n.explicitPos==t,this.view),s=new zA(n,i);this.running.push(s),Promise.resolve(n.source(i)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:ss.of(null)}),dt(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Je).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Je);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=new oi(s.active.source,s.active.explicitPos,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:En(s.updates.length?s.updates[0].startState:this.view.state));for(let l of s.updates)a=a.update(l,t);if(a.hasResult()){e.push(a);continue}}let o=this.view.state.field(ut).active.find(a=>a.source==s.active.source);if(o&&o.state==1)if(s.done==null){let a=new At(s.active.source,0);for(let l of s.updates)a=a.update(l,t);a.state!=1&&e.push(a)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:Ad.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(ut,!1);if(e&&e.tooltip&&this.view.state.facet(Je).closeOnBlur){let t=e.open&&Zf(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ss.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:wr.of(!1)}),20),this.composing=0}}}),QA=typeof navigator=="object"&&/Win/.test(navigator.platform),ZA=Vn.highest(J.domEventHandlers({keydown(n,e){let t=e.state.field(ut,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!(QA&&n.altKey)||n.metaKey)return!1;let i=t.open.options[t.open.selected],s=t.active.find(a=>a.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(n.key)>-1&&ol(e,i),!1}})),eR=J.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),rs={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Mn=ge.define({map(n,e){let t=e.mapPos(n,-1,ot.TrackAfter);return t??void 0}}),al=new class extends Fn{};al.startSide=1;al.endSide=-1;const _d=Ze.define({create(){return Ae.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Mn)&&(n=n.update({add:[al.range(t.value,t.value+1)]}));return n}});function tR(){return[iR,_d]}const Ro="()[]{}<>";function Od(n){for(let e=0;e<Ro.length;e+=2)if(Ro.charCodeAt(e)==n)return Ro.charAt(e+1);return Da(n<128?n:n+1)}function Nd(n,e){return n.languageDataAt("closeBrackets",e)[0]||rs}const nR=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),iR=J.inputHandler.of((n,e,t,i)=>{if((nR?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(i.length>2||i.length==2&&Nt(Ke(i,0))==1||e!=s.from||t!=s.to)return!1;let o=oR(n.state,i);return o?(n.dispatch(o),!0):!1}),sR=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Nd(n,n.selection.main.head).brackets||rs.brackets,s=null,o=n.changeByRange(a=>{if(a.empty){let l=aR(n.doc,a.head);for(let c of i)if(c==l&&jr(n.doc,a.head)==Od(Ke(c,0)))return{changes:{from:a.head-c.length,to:a.head+c.length},range:B.cursor(a.head-c.length)}}return{range:s=a}});return s||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},rR=[{key:"Backspace",run:sR}];function oR(n,e){let t=Nd(n,n.selection.main.head),i=t.brackets||rs.brackets;for(let s of i){let o=Od(Ke(s,0));if(e==s)return o==s?hR(n,s,i.indexOf(s+s+s)>-1,t):lR(n,s,o,t.before||rs.before);if(e==o&&bd(n,n.selection.main.from))return cR(n,s,o)}return null}function bd(n,e){let t=!1;return n.field(_d).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function jr(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Nt(Ke(t,0)))}function aR(n,e){let t=n.sliceString(e-2,e);return Nt(Ke(t,0))==t.length?t:t.slice(1)}function lR(n,e,t,i){let s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Mn.of(a.to+e.length),range:B.range(a.anchor+e.length,a.head+e.length)};let l=jr(n.doc,a.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:a.head},effects:Mn.of(a.head+e.length),range:B.cursor(a.head+e.length)}:{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function cR(n,e,t){let i=null,s=n.changeByRange(o=>o.empty&&jr(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:B.cursor(o.head+t.length)}:i={range:o});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function hR(n,e,t,i){let s=i.stringPrefixes||rs.stringPrefixes,o=null,a=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Mn.of(l.to+e.length),range:B.range(l.anchor+e.length,l.head+e.length)};let c=l.head,h=jr(n.doc,c),f;if(h==e){if(jc(n,c))return{changes:{insert:e+e,from:c},effects:Mn.of(c+e.length),range:B.cursor(c+e.length)};if(bd(n,c)){let m=t&&n.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:B.cursor(c+m.length)}}}else{if(t&&n.sliceDoc(c-2*e.length,c)==e+e&&(f=Xc(n,c-2*e.length,s))>-1&&jc(n,f))return{changes:{insert:e+e+e+e,from:c},effects:Mn.of(c+e.length),range:B.cursor(c+e.length)};if(n.charCategorizer(c)(h)!=Pe.Word&&Xc(n,c,s)>-1&&!fR(n,c,e,s))return{changes:{insert:e+e,from:c},effects:Mn.of(c+e.length),range:B.cursor(c+e.length)}}return{range:o=l}});return o?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function jc(n,e){let t=je(n).resolveInner(e+1);return t.parent&&t.from==e}function fR(n,e,t,i){let s=je(n).resolveInner(e,-1),o=i.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+o)),c=l.indexOf(t);if(!c||c>-1&&i.indexOf(l.slice(0,c))>-1){let f=s.firstChild;for(;f&&f.from==s.from&&f.to-f.from>t.length+c;){if(n.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let h=s.to==e&&s.parent;if(!h)break;s=h}return!1}function Xc(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Pe.Word)return e;for(let s of t){let o=e-s.length;if(n.sliceDoc(o,e)==s&&i(n.sliceDoc(o-1,o))!=Pe.Word)return o}return-1}function uR(n={}){return[ZA,ut,Je.of(n),JA,dR,eR]}const yd=[{key:"Ctrl-Space",run:jA},{key:"Escape",run:XA},{key:"ArrowDown",run:js(!0)},{key:"ArrowUp",run:js(!1)},{key:"PageDown",run:js(!0,"page")},{key:"PageUp",run:js(!1,"page")},{key:"Enter",run:YA}],dR=Vn.highest(us.computeN([Je],n=>n.facet(Je).defaultKeymap?[yd]:[]));class pR{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class kn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,o=i.facet(os).markerFilter;o&&(s=o(s,i));let a=ae.set(s.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?ae.widget({widget:new OR(l),diagnostic:l}).range(l.from):ae.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new kn(a,t,gi(a))}}function gi(n,e=null,t=0){let i=null;return n.between(t,1e9,(s,o,{spec:a})=>{if(!(e&&a.diagnostic!=e))return i=new pR(s,o,a.diagnostic),!1}),i}function gR(n,e){let t=e.pos,i=e.end||t,s=n.state.facet(os).hideOn(n,t,i);if(s!=null)return s;let o=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(a=>a.is(Cd))||n.changes.touchesRange(o.from,Math.max(o.to,i)))}function mR(n,e){return n.field(Rt,!1)?e:e.concat(ge.appendConfig.of(yR))}const Cd=ge.define(),ll=ge.define(),Ld=ge.define(),Rt=Ze.define({create(){return new kn(ae.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),i=null,s=n.panel;if(n.selected){let o=e.changes.mapPos(n.selected.from,1);i=gi(t,n.selected.diagnostic,o)||gi(t,null,o)}!t.size&&s&&e.state.facet(os).autoPanel&&(s=null),n=new kn(t,s,i)}for(let t of e.effects)if(t.is(Cd)){let i=e.state.facet(os).autoPanel?t.value.length?as.open:null:n.panel;n=kn.init(t.value,i,e.state)}else t.is(ll)?n=new kn(n.diagnostics,t.value?as.open:null,n.selected):t.is(Ld)&&(n=new kn(n.diagnostics,n.panel,t.value));return n},provide:n=>[es.from(n,e=>e.panel),J.decorations.from(n,e=>e.diagnostics)]}),ER=ae.mark({class:"cm-lintRange cm-lintRange-active"});function TR(n,e,t){let{diagnostics:i}=n.state.field(Rt),s=[],o=2e8,a=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(c,h,{spec:f})=>{e>=c&&e<=h&&(c==h||(e>c||t>0)&&(e<h||t<0))&&(s.push(f.diagnostic),o=Math.min(c,o),a=Math.max(h,a))});let l=n.state.facet(os).tooltipFilter;return l&&(s=l(s,n.state)),s.length?{pos:o,end:a,above:n.state.doc.lineAt(o).to<a,create(){return{dom:SR(n,s)}}}:null}function SR(n,e){return we("ul",{class:"cm-tooltip-lint"},e.map(t=>wd(n,t,!1)))}const AR=n=>{let e=n.state.field(Rt,!1);(!e||!e.panel)&&n.dispatch({effects:mR(n.state,[ll.of(!0)])});let t=Zi(n,as.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},zc=n=>{let e=n.state.field(Rt,!1);return!e||!e.panel?!1:(n.dispatch({effects:ll.of(!1)}),!0)},RR=n=>{let e=n.state.field(Rt,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},_R=[{key:"Mod-Shift-m",run:AR,preventDefault:!0},{key:"F8",run:RR}],os=ne.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},Yt(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function Id(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function wd(n,e,t){var i;let s=t?Id(e.actions):[];return we("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},we("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,a)=>{let l=!1,c=m=>{if(m.preventDefault(),l)return;l=!0;let T=gi(n.state.field(Rt).diagnostics,e);T&&o.apply(n,T.from,T.to)},{name:h}=o,f=s[a]?h.indexOf(s[a]):-1,u=f<0?h:[h.slice(0,f),we("u",h.slice(f,f+1)),h.slice(f+1)];return we("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${h}${f<0?"":` (access key "${s[a]})"`}.`},u)}),e.source&&we("div",{class:"cm-diagnosticSource"},e.source))}class OR extends nn{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return we("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Kc{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=wd(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class as{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)zc(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=Id(o.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==s.keyCode){let c=gi(this.view.state.field(Rt).diagnostics,o);c&&o.actions[l].apply(e,c.from,c.to)}}else return;s.preventDefault()},i=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=we("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=we("div",{class:"cm-panel-lint"},this.list,we("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>zc(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Rt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Rt),i=0,s=!1,o=null;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{let h=-1,f;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==c.diagnostic){h=u;break}h<0?(f=new Kc(this.view,c.diagnostic),this.items.splice(i,0,f),s=!0):(f=this.items[h],h>i&&(this.items.splice(i,h-i),s=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),o=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new Kc(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Rt),i=gi(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ld.of(i)})}static open(e){return new as(e)}}function NR(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Xs(n){return NR(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bR=J.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Xs("#d11")},".cm-lintRange-warning":{backgroundImage:Xs("orange")},".cm-lintRange-info":{backgroundImage:Xs("#999")},".cm-lintRange-hint":{backgroundImage:Xs("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),yR=[Rt,J.decorations.compute([Rt],n=>{let{selected:e,panel:t}=n.field(Rt);return!e||!t||e.from==e.to?ae.none:ae.set([ER.range(e.from,e.to)])}),AE(TR,{hideOn:gR}),bR];var $c=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(rR)),e.defaultKeymap!==!1&&(i=i.concat(sd)),e.searchKeymap!==!1&&(i=i.concat(OA)),e.historyKeymap!==!1&&(i=i.concat(oS)),e.foldKeymap!==!1&&(i=i.concat(AT)),e.completionKeymap!==!1&&(i=i.concat(yd)),e.lintKeymap!==!1&&(i=i.concat(_R));var s=[];return e.lineNumbers!==!1&&s.push(xE()),e.highlightActiveLineGutter!==!1&&s.push(kE()),e.highlightSpecialChars!==!1&&s.push(Km()),e.history!==!1&&s.push(JT()),e.foldGutter!==!1&&s.push(NT()),e.drawSelection!==!1&&s.push(Fm()),e.dropCursor!==!1&&s.push(Vm()),e.allowMultipleSelections!==!1&&s.push(Ee.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&s.push(fT()),e.syntaxHighlighting!==!1&&s.push(Qa(LT,{fallback:!0})),e.bracketMatching!==!1&&s.push(PT()),e.closeBrackets!==!1&&s.push(tR()),e.autocompletion!==!1&&s.push(uR()),e.rectangularSelection!==!1&&s.push(cE()),t!==!1&&s.push(uE()),e.highlightActiveLine!==!1&&s.push(tE()),e.highlightSelectionMatches!==!1&&s.push(sA()),e.tabSize&&typeof e.tabSize=="number"&&s.push(Br.of(" ".repeat(e.tabSize))),s.concat([us.of(i.flat())]).filter(Boolean)};const CR="#e5c07b",Jc="#e06c75",LR="#56b6c2",IR="#ffffff",sr="#abb2bf",ya="#7d8799",wR="#61afef",xR="#98c379",Qc="#d19a66",vR="#c678dd",DR="#21252b",Zc="#2c313a",eh="#282c34",_o="#353a42",kR="#3E4451",th="#528bff",PR=J.theme({"&":{color:sr,backgroundColor:eh},".cm-content":{caretColor:th},".cm-cursor, .cm-dropCursor":{borderLeftColor:th},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:kR},".cm-panels":{backgroundColor:DR,color:sr},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:eh,color:ya,border:"none"},".cm-activeLineGutter":{backgroundColor:Zc},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:_o},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:_o,borderBottomColor:_o},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Zc,color:sr}}},{dark:!0}),MR=Ti.define([{tag:w.keyword,color:vR},{tag:[w.name,w.deleted,w.character,w.propertyName,w.macroName],color:Jc},{tag:[w.function(w.variableName),w.labelName],color:wR},{tag:[w.color,w.constant(w.name),w.standard(w.name)],color:Qc},{tag:[w.definition(w.name),w.separator],color:sr},{tag:[w.typeName,w.className,w.number,w.changed,w.annotation,w.modifier,w.self,w.namespace],color:CR},{tag:[w.operator,w.operatorKeyword,w.url,w.escape,w.regexp,w.link,w.special(w.string)],color:LR},{tag:[w.meta,w.comment],color:ya},{tag:w.strong,fontWeight:"bold"},{tag:w.emphasis,fontStyle:"italic"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.link,color:ya,textDecoration:"underline"},{tag:w.heading,fontWeight:"bold",color:Jc},{tag:[w.atom,w.bool,w.special(w.variableName)],color:Qc},{tag:[w.processingInstruction,w.string,w.inserted],color:xR},{tag:w.invalid,color:IR}]),UR=[PR,Qa(MR)];var FR=J.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),BR=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:s=!1,theme:o="light",placeholder:a="",basicSetup:l=!0}=e,c=[];switch(t&&c.unshift(us.of([QS])),l&&(typeof l=="boolean"?c.unshift($c()):c.unshift($c(l))),a&&c.unshift(rE(a)),o){case"light":c.push(FR);break;case"dark":c.push(UR);break;case"none":break;default:c.push(o);break}return i===!1&&c.push(J.editable.of(!1)),s&&c.push(Ee.readOnly.of(!0)),[...c]},HR=n=>({line:n.state.doc.lineAt(n.state.selection.main.from),lineCount:n.state.doc.lines,lineBreak:n.state.lineBreak,length:n.state.doc.length,readOnly:n.state.readOnly,tabSize:n.state.tabSize,selection:n.state.selection,selectionAsSingle:n.state.selection.asSingle().main,ranges:n.state.selection.ranges,selectionCode:n.state.sliceDoc(n.state.selection.main.from,n.state.selection.main.to),selections:n.state.selection.ranges.map(e=>n.state.sliceDoc(e.from,e.to)),selectedText:n.state.selection.ranges.some(e=>!e.empty)}),nh=qt.define(),WR=[];function GR(n){var{value:e,selection:t,onChange:i,onStatistics:s,onCreateEditor:o,onUpdate:a,extensions:l=WR,autoFocus:c,theme:h="light",height:f=null,minHeight:u=null,maxHeight:m=null,width:T=null,minWidth:y=null,maxWidth:b=null,placeholder:E="",editable:I=!0,readOnly:D=!1,indentWithTab:Y=!0,basicSetup:V=!0,root:W,initialState:U}=n,[q,ie]=Te.useState(),[z,G]=Te.useState(),[Z,ee]=Te.useState(),pe=J.theme({"&":{height:f,minHeight:u,maxHeight:m,width:T,minWidth:y,maxWidth:b},"& .cm-scroller":{height:"100% !important"}}),ue=J.updateListener.of(Oe=>{if(Oe.docChanged&&typeof i=="function"&&!Oe.transactions.some(Le=>Le.annotation(nh))){var ye=Oe.state.doc,Ce=ye.toString();i(Ce,Oe)}s&&s(HR(Oe))}),Re=BR({theme:h,editable:I,readOnly:D,placeholder:E,indentWithTab:Y,basicSetup:V}),xe=[ue,pe,...Re];return a&&typeof a=="function"&&xe.push(J.updateListener.of(a)),xe=xe.concat(l),Te.useEffect(()=>{if(q&&!Z){var Oe={doc:e,selection:t,extensions:xe},ye=U?Ee.fromJSON(U.json,Oe,U.fields):Ee.create(Oe);if(ee(ye),!z){var Ce=new J({state:ye,parent:q,root:W});G(Ce),o&&o(Ce,ye)}}return()=>{z&&(ee(void 0),G(void 0))}},[q,Z]),Te.useEffect(()=>ie(n.container),[n.container]),Te.useEffect(()=>()=>{z&&(z.destroy(),G(void 0))},[z]),Te.useEffect(()=>{c&&z&&z.focus()},[c,z]),Te.useEffect(()=>{z&&z.dispatch({effects:ge.reconfigure.of(xe)})},[h,l,f,u,m,T,y,b,E,I,D,Y,V,i,a]),Te.useEffect(()=>{if(e!==void 0){var Oe=z?z.state.doc.toString():"";z&&e!==Oe&&z.dispatch({changes:{from:0,to:Oe.length,insert:e||""},annotations:[nh.of(!0)]})}},[e,z]),{state:Z,setState:ee,view:z,setView:G,container:q,setContainer:ie}}var VR=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],xd=Te.forwardRef((n,e)=>{var{className:t,value:i="",selection:s,extensions:o=[],onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,autoFocus:f,theme:u="light",height:m,minHeight:T,maxHeight:y,width:b,minWidth:E,maxWidth:I,basicSetup:D,placeholder:Y,indentWithTab:V,editable:W,readOnly:U,root:q,initialState:ie}=n,z=Fp(n,VR),G=Te.useRef(null),{state:Z,view:ee,container:pe}=GR({container:G.current,root:q,value:i,autoFocus:f,theme:u,height:m,minHeight:T,maxHeight:y,width:b,minWidth:E,maxWidth:I,basicSetup:D,placeholder:Y,indentWithTab:V,editable:W,readOnly:U,selection:s,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,extensions:o,initialState:ie});if(Te.useImperativeHandle(e,()=>({editor:G.current,state:Z,view:ee}),[G,pe,Z,ee]),typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var ue=typeof u=="string"?"cm-theme-"+u:"cm-theme";return he.jsx("div",ji({ref:G,className:""+ue+(t?" "+t:"")},z))});xd.displayName="CodeMirror";var ih={};class vr{constructor(e,t,i,s,o,a,l,c,h,f=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=o,this.score=a,this.buffer=l,this.bufferBase=c,this.curContext=h,this.lookAhead=f,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new vr(e,[],t,i,i,0,[],0,s?new sh(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:o}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let l=o.dynamicPrecedence(s);if(l&&(this.score+=l),i==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let c=this.stack.length-(i-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,f=this.reducePos-h;f>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=f));let u=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-u;if(s<o.minRepeatTerm||e&131072){let T=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,h,T,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let T=this.stack[c-3];this.state=o.getGoto(T,s,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(s,h)}storeNode(e,t,i,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,l=this.buffer.length;if(l==0&&a.parent&&(l=a.bufferBase-a.parent.bufferBase,a=a.parent),l>0&&a.buffer[l-4]==0&&a.buffer[l-1]>-1){if(t==i)return;if(a.buffer[l-2]>=t){a.buffer[l-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,t,i,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let l=!1;for(let c=a;c>0&&this.buffer[c-2]>i;c-=4)if(this.buffer[c-1]>=0){l=!0;break}if(l)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4);else{let o=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(o,1)||(this.reducePos=s)),this.pushState(o,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,s,4)}}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new vr(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new qR(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let o=0,a;o<t.length;o+=2)(a=t[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[o],a);if(this.stack.length<120)for(let o=0;s.length<8&&o<t.length;o+=2){let a=t[o+1];s.some((l,c)=>c&1&&l==a)||s.push(t[o],a)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let o=t[s+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,o)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let l=(a>>19)-o;if(l>1){let c=a&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return l<<19|65536|c}}else{let l=i(a,o+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new sh(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class sh{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class qR{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Dr{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Dr(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Dr(this.stack,this.pos,this.index)}}function zs(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,s=0;i<n.length;){let o=0;for(;;){let a=n.charCodeAt(i++),l=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let c=a-32;if(c>=46&&(c-=46,l=!0),o+=c,l)break;o*=46}t?t[s++]=o:t=new e(o)}return t}class rr{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const rh=new rr;class YR{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=rh,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!s)return null;let a=this.ranges[--s];o-=i.from-a.to,i=a}for(;t<0?o>i.to:o>=i.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];o+=a.from-i.to,i=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=rh,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class ai{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;XR(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}ai.prototype.contextual=ai.prototype.fallback=ai.prototype.extend=!1;ai.prototype.fallback=ai.prototype.extend=!1;class jR{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function XR(n,e,t,i,s,o){let a=0,l=1<<i,{dialect:c}=t.p.parser;e:for(;l&n[a];){let h=n[a+1];for(let T=a+3;T<h;T+=2)if((n[T+1]&l)>0){let y=n[T];if(c.allows(y)&&(e.token.value==-1||e.token.value==y||zR(y,e.token.value,s,o))){e.acceptToken(y);break}}let f=e.next,u=0,m=n[a+2];if(e.next<0&&m>u&&n[h+m*3-3]==65535){a=n[h+m*3-1];continue e}for(;u<m;){let T=u+m>>1,y=h+T+(T<<1),b=n[y],E=n[y+1]||65536;if(f<b)m=T;else if(f>=E)u=T+1;else{a=n[y+2],e.advance();continue e}}break}}function oh(n,e,t){for(let i=e,s;(s=n[i])!=65535;i++)if(s==t)return i-e;return-1}function zR(n,e,t,i){let s=oh(t,i,e);return s<0||oh(t,i,n)<s}const Tt=typeof process<"u"&&ih&&/\bparse\b/.test(ih.LOG);let Oo=null;function ah(n,e,t){let i=n.cursor(Ye.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class KR{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ah(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ah(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[s],a=this.start[t]+i.positions[s];if(a>e)return this.nextStart=a,null;if(o instanceof We){if(a==e){if(a<this.safeFrom)return null;let l=a+o.length;if(l<=this.safeTo){let c=o.prop(me.lookAhead);if(!c||l+c<this.fragment.to)return o}}this.index[t]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+o.length}}}class $R{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new rr)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,a=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<o.length;h++){if(!(1<<h&a))continue;let f=o[h],u=this.tokens[h];if(!(i&&!f.fallback)&&((f.contextual||u.start!=e.pos||u.mask!=a||u.context!=l)&&(this.updateCachedToken(u,f,e),u.mask=a,u.context=l),u.lookAhead>u.end+25&&(c=Math.max(u.lookAhead,c)),u.value!=0)){let m=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!f.extend&&(i=u,t>m))break}}for(;this.actions.length>t;)this.actions.pop();return c&&e.setLookAhead(c),!i&&e.pos==this.stream.end&&(i=new rr,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new rr,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:o}=i.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let l=o.specializers[a](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:o}=e,{parser:a}=e.p,{data:l}=a;for(let c=0;c<2;c++)for(let h=a.stateSlot(o,c?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=Jt(l,h+2);else{s==0&&l[h+1]==2&&(s=this.putAction(Jt(l,h+2),t,i,s));break}l[h]==t&&(s=this.putAction(Jt(l,h+1),t,i,s))}return s}}class JR{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new YR(t,s),this.tokens=new $R(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[vr.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new KR(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let l=e[a];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{s||(s=[],o=[]),s.push(l);let c=this.tokens.getMainToken(l);o.push(c.value,c.end)}}break}}if(!i.length){let a=s&&ZR(s);if(a)return Tt&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Tt&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,i);if(a)return Tt&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((l,c)=>c.score-l.score);i.length>a;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let l=i[a];for(let c=a+1;c<i.length;c++){let h=i[c];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(c--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:o}=this,a=Tt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,f=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(s);u;){let m=this.parser.nodeSet.types[u.type.id]==u.type?o.getGoto(e.state,u.type.id):-1;if(m>-1&&u.length&&(!h||(u.prop(me.contextHash)||0)==f))return e.useNode(u,m),Tt&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(u.type.id)})`),!0;if(!(u instanceof We)||u.children.length==0||u.positions[0]>0)break;let T=u.children[0];if(T instanceof We&&u.positions[0]==0)u=T;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),Tt&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let f=c[h++],u=c[h++],m=c[h++],T=h==c.length||!i,y=T?e:e.split(),b=this.tokens.mainToken;if(y.apply(f,u,b?b.start:y.pos,m),Tt&&console.log(a+this.stackID(y)+` (via ${f&65536?`reduce of ${o.getName(f&65535)}`:"shift"} for ${o.getName(u)} @ ${s}${y==e?"":", split"})`),T)return!0;y.pos>s?t.push(y):i.push(y)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return lh(e,t),!0}}runRecovery(e,t,i){let s=null,o=!1;for(let a=0;a<e.length;a++){let l=e[a],c=t[a<<1],h=t[(a<<1)+1],f=Tt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(o||(o=!0,l.restart(),Tt&&console.log(f+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),m=f;for(let T=0;u.forceReduce()&&T<10&&(Tt&&console.log(m+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));T++)Tt&&(m=this.stackID(u)+" -> ");for(let T of l.recoverByInsert(c))Tt&&console.log(f+this.stackID(T)+" (via recover-insert)"),this.advanceFully(T,i);this.stream.end>l.pos?(h==l.pos&&(h++,c=0),l.recoverByDelete(c,h),Tt&&console.log(f+this.stackID(l)+` (via recover-delete ${this.parser.getName(c)})`),lh(l,i)):(!s||s.score<l.score)&&(s=l)}return s}stackToTree(e){return e.close(),We.build({buffer:Dr.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Oo||(Oo=new WeakMap)).get(e);return t||Oo.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function lh(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class QR{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class kr extends au{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),s=[];for(let l=0;l<t.length;l++)s.push([]);function o(l,c,h){s[l].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let c=l[0];typeof c=="string"&&(c=me[c]);for(let h=1;h<l.length;){let f=l[h++];if(f>=0)o(f,c,l[h++]);else{let u=l[h+-f];for(let m=-f;m>0;m--)o(l[h++],c,u);h++}}}this.nodeSet=new ja(t.map((l,c)=>gt.define({name:c>=this.minRepeatTerm?void 0:l,id:c,props:s[c],top:i.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=iu;let a=zs(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(ch),this.states=zs(e.states,Uint32Array),this.data=zs(e.stateData),this.goto=zs(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new ai(a,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new JR(this,e,t,i);for(let o of this.wrappers)s=o(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let o=s[t+1];;){let a=s[o++],l=a&1,c=s[o++];if(l&&i)return c;for(let h=o+(a>>1);o<h;o++)if(s[o]==e)return c;if(l)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),a;;o+=3){if((a=i[o])==65535)if(i[o+1]==1)a=i[o=Jt(i,o+2)];else{if(i[o+1]==2)return Jt(i,o+2);break}if(a==t||a==0)return Jt(i,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Jt(this.data,o+2);else break;s=t(Jt(this.data,o+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Jt(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];t.some((o,a)=>a&1&&o==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(kr.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(o=>o.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let o=e.specializers.find(l=>l.from==i.external);if(!o)return i;let a=Object.assign(Object.assign({},i),{external:o.to});return t.specializers[s]=ch(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let o of e.split(" ")){let a=t.indexOf(o);a>=0&&(i[a]=!0)}let s=null;for(let o=0;o<t.length;o++)if(!i[o])for(let a=this.dialects[t[o]],l;(l=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[l]=1;return new QR(e,i,s)}static deserialize(e){return new kr(e)}}function Jt(n,e){return n[e]|n[e+1]<<16}function ZR(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function ch(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const e0=36,hh=1,t0=2,jn=3,No=4,n0=5,i0=6,s0=7,r0=8,o0=9,a0=10,l0=11,c0=12,h0=13,f0=14,u0=15,d0=16,p0=17,fh=18,g0=19,vd=20,Dd=21,uh=22,m0=23,E0=24;function Ca(n){return n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57}function T0(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function vn(n,e,t){for(let i=!1;;){if(n.next<0)return;if(n.next==e&&!i){n.advance();return}i=t&&!i&&n.next==92,n.advance()}}function S0(n,e){e:for(;;){if(n.next<0)return console.log("exit at end",n.pos);if(n.next==36){n.advance();for(let t=0;t<e.length;t++){if(n.next!=e.charCodeAt(t))continue e;n.advance()}if(n.next==36){n.advance();return}}else n.advance()}}function A0(n,e){let t="[{<(".indexOf(String.fromCharCode(e)),i=t<0?e:"]}>)".charCodeAt(t);for(;;){if(n.next<0)return;if(n.next==i&&n.peek(1)==39){n.advance(2);return}n.advance()}}function La(n,e){for(;!(n.next!=95&&!Ca(n.next));)e!=null&&(e+=String.fromCharCode(n.next)),n.advance();return e}function R0(n){if(n.next==39||n.next==34||n.next==96){let e=n.next;n.advance(),vn(n,e,!1)}else La(n)}function dh(n,e){for(;n.next==48||n.next==49;)n.advance();e&&n.next==e&&n.advance()}function ph(n,e){for(;;){if(n.next==46){if(e)break;e=!0}else if(n.next<48||n.next>57)break;n.advance()}if(n.next==69||n.next==101)for(n.advance(),(n.next==43||n.next==45)&&n.advance();n.next>=48&&n.next<=57;)n.advance()}function gh(n){for(;!(n.next<0||n.next==10);)n.advance()}function Cn(n,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==n)return!0;return!1}const bo=` 	\r
`;function kd(n,e,t){let i=Object.create(null);i.true=i.false=n0,i.null=i.unknown=i0;for(let s of n.split(" "))s&&(i[s]=vd);for(let s of e.split(" "))s&&(i[s]=Dd);for(let s of(t||"").split(" "))s&&(i[s]=E0);return i}const Pd="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",Md="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",Ia={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:kd(Md,Pd)};function _0(n,e,t,i){let s={};for(let o in Ia)s[o]=(n.hasOwnProperty(o)?n:Ia)[o];return e&&(s.words=kd(e,t||"",i)),s}function Ud(n){return new jR(e=>{var t;let{next:i}=e;if(e.advance(),Cn(i,bo)){for(;Cn(e.next,bo);)e.advance();e.acceptToken(e0)}else if(i==36&&n.doubleDollarQuotedStrings){let s=La(e,"");e.next==36&&(e.advance(),S0(e,s),e.acceptToken(jn))}else if(i==39||i==34&&n.doubleQuotedStrings)vn(e,i,n.backslashEscapes),e.acceptToken(jn);else if(i==35&&n.hashComments||i==47&&e.next==47&&n.slashComments)gh(e),e.acceptToken(hh);else if(i==45&&e.next==45&&(!n.spaceAfterDashes||e.peek(1)==32))gh(e),e.acceptToken(hh);else if(i==47&&e.next==42){e.advance();for(let s=1;;){let o=e.next;if(e.next<0)break;if(e.advance(),o==42&&e.next==47){if(s--,e.advance(),!s)break}else o==47&&e.next==42&&(s++,e.advance())}e.acceptToken(t0)}else if((i==101||i==69)&&e.next==39)e.advance(),vn(e,39,!0),e.acceptToken(jn);else if((i==110||i==78)&&e.next==39&&n.charSetCasts)e.advance(),vn(e,39,n.backslashEscapes),e.acceptToken(jn);else if(i==95&&n.charSetCasts)for(let s=0;;s++){if(e.next==39&&s>1){e.advance(),vn(e,39,n.backslashEscapes),e.acceptToken(jn);break}if(!Ca(e.next))break;e.advance()}else if(n.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!Cn(e.peek(1),bo)){let s=e.peek(1);e.advance(2),A0(e,s),e.acceptToken(jn)}else if(i==40)e.acceptToken(s0);else if(i==41)e.acceptToken(r0);else if(i==123)e.acceptToken(o0);else if(i==125)e.acceptToken(a0);else if(i==91)e.acceptToken(l0);else if(i==93)e.acceptToken(c0);else if(i==59)e.acceptToken(h0);else if(n.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),dh(e),e.acceptToken(uh);else if((i==98||i==66)&&(e.next==39||e.next==34)){const s=e.next;e.advance(),n.treatBitsAsBytes?(vn(e,s,n.backslashEscapes),e.acceptToken(m0)):(dh(e,s),e.acceptToken(uh))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let s=e.next==39;for(e.advance();T0(e.next);)e.advance();s&&e.next==39&&e.advance(),e.acceptToken(No)}else if(i==46&&e.next>=48&&e.next<=57)ph(e,!0),e.acceptToken(No);else if(i==46)e.acceptToken(f0);else if(i>=48&&i<=57)ph(e,!1),e.acceptToken(No);else if(Cn(i,n.operatorChars)){for(;Cn(e.next,n.operatorChars);)e.advance();e.acceptToken(u0)}else if(Cn(i,n.specialVar))e.next==i&&e.advance(),R0(e),e.acceptToken(p0);else if(Cn(i,n.identifierQuotes))vn(e,i,!1),e.acceptToken(g0);else if(i==58||i==44)e.acceptToken(d0);else if(Ca(i)){let s=La(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-s.length-1)==46?fh:(t=n.words[s.toLowerCase()])!==null&&t!==void 0?t:fh)}})}const Fd=Ud(Ia),O0=kr.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"⚠ LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,Fd],topRules:{Script:[0,25]},tokenPrec:0});function wa(n){let e=n.cursor().moveTo(n.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function ls(n,e){let t=n.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(t);return i?i[2]:t}function Pr(n){return n&&(n.name=="Identifier"||n.name=="QuotedIdentifier")}function N0(n,e){if(e.name=="CompositeIdentifier"){let t=[];for(let i=e.firstChild;i;i=i.nextSibling)Pr(i)&&t.push(ls(n,i));return t}return[ls(n,e)]}function mh(n,e){for(let t=[];;){if(!e||e.name!=".")return t;let i=wa(e);if(!Pr(i))return t;t.unshift(ls(n,i)),e=wa(i)}}function b0(n,e){let t=je(n).resolveInner(e,-1),i=C0(n.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?n.doc.sliceString(t.from,t.from+1):null,parents:mh(n.doc,wa(t)),aliases:i}:t.name=="."?{from:e,quoted:null,parents:mh(n.doc,t),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const y0=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function C0(n,e){let t;for(let s=e;!t;s=s.parent){if(!s)return null;s.name=="Statement"&&(t=s)}let i=null;for(let s=t.firstChild,o=!1,a=null;s;s=s.nextSibling){let l=s.name=="Keyword"?n.sliceString(s.from,s.to).toLowerCase():null,c=null;if(!o)o=l=="from";else if(l=="as"&&a&&Pr(s.nextSibling))c=ls(n,s.nextSibling);else{if(l&&y0.has(l))break;a&&Pr(s)&&(c=ls(n,s))}c&&(i||(i=Object.create(null)),i[c]=N0(n,a)),a=/Identifier$/.test(s.name)?s:null}return i}function L0(n,e){return n?e.map(t=>Object.assign(Object.assign({},t),{label:t.label[0]==n?t.label:n+t.label+n,apply:void 0})):e}const I0=/^\w*$/,w0=/^[`'"]?\w*[`'"]?$/;function Eh(n){return n.self&&typeof n.self.label=="string"}class cl{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(s=>s.label==e)&&this.list.push(Th(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new cl(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(i=>i.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?Th(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):Eh(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],s=null,o=t.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),a=this;Eh(i)&&(s=i.self,i=i.children);for(let l=0;l<o.length;l++)s&&l==o.length-1&&a.addCompletion(s),a=a.child(o[l].replace(/\\\./g,"."));a.addNamespace(i)}}}function Th(n,e,t,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(n)?{label:n,type:e}:{label:n,type:e,apply:t+n+t}}function x0(n,e,t,i,s,o){var a;let l=((a=o?.spec.identifierQuotes)===null||a===void 0?void 0:a[0])||'"',c=new cl(l,!!o?.spec.caseInsensitiveIdentifiers),h=s?c.child(s):null;return c.addNamespace(n),e&&(h||c).addCompletions(e),t&&c.addCompletions(t),h&&c.addCompletions(h.list),i&&c.addCompletions((h||c).child(i).list),f=>{let{parents:u,from:m,quoted:T,empty:y,aliases:b}=b0(f.state,f.pos);if(y&&!f.explicit)return null;b&&u.length==1&&(u=b[u[0]]||u);let E=c;for(let Y of u){for(;!E.children||!E.children[Y];)if(E==c&&h)E=h;else if(E==h&&i)E=E.child(i);else return null;let V=E.maybeChild(Y);if(!V)return null;E=V}let I=T&&f.state.sliceDoc(f.pos,f.pos+1)==T,D=E.list;return E==c&&b&&(D=D.concat(Object.keys(b).map(Y=>({label:Y,type:"constant"})))),{from:m,to:I?f.pos+1:void 0,options:L0(T,D),validFor:T?w0:I0}}}function v0(n,e){let t=Object.keys(n).map(i=>({label:e?i.toUpperCase():i,type:n[i]==Dd?"type":n[i]==vd?"keyword":"variable",boost:-1}));return LA(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],md(t))}let D0=O0.configure({props:[uu.add({Statement:cT()}),pu.add({Statement(n,e){return{from:Math.min(n.from+100,e.doc.lineAt(n.from).to),to:n.to}},BlockComment(n){return{from:n.from+2,to:n.to-2}}}),lu({Keyword:w.keyword,Type:w.typeName,Builtin:w.standard(w.name),Bits:w.number,Bytes:w.string,Bool:w.bool,Null:w.null,Number:w.number,String:w.string,Identifier:w.name,QuotedIdentifier:w.special(w.string),SpecialVar:w.special(w.name),LineComment:w.lineComment,BlockComment:w.blockComment,Operator:w.operator,"Semi Punctuation":w.punctuation,"( )":w.paren,"{ }":w.brace,"[ ]":w.squareBracket})]});class Xr{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}static define(e){let t=_0(e,e.keywords,e.types,e.builtin),i=Tr.define({name:"sql",parser:D0.configure({tokenizers:[{from:Fd,to:Ud(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Xr(t,i,e)}}function k0(n,e=!1){return v0(n.dialect.words,e)}function P0(n){return n.schema?x0(n.schema,n.tables,n.schemas,n.defaultTable,n.defaultSchema,n.dialect||M0):()=>null}const M0=Xr.define({}),Bd=Xr.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:Md+"a abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom c cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion g generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull k key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower m mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner p parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time t table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:Pd+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"}),U0="E",F0="b",B0="i",H0="a",W0="e",G0="r",V0="S",q0="f",Y0="T",j0="n",X0="a",z0="d",K0="s",zt="r",Ln="i",$0="S",vi="t",Di="v",_t="m",yo="c",Kt="f",ht="p",$t="I";function J0(n,e,t,i,s=!1,o=null,a=1,l=c=>`https://www.postgresql.org/docs/current/${c}.html`){let c=!1;function h(){c=!0,i=()=>{}}function f(){if(c)throw new Error("cancelled")}async function u(){const m=n.match(/^\\([?hdzsl]\S*)(.*)/);if(!m)return i(`unsupported command: ${n}`),!1;let[,T,y]=m;if(T=T.replace(/^lo_list/,"dl"),T=T.replace(/^z/,"dp"),T==="?")return i(i_),!1;if(T==="h"){const O=(y??"").trim().toUpperCase().replace(/\s+/g," ");if(O==="")return i(`Available help:
`+ki.map(R=>R[0]).join(`
`)),!1;{let R=O==="*"?ki:ki.filter(p=>p[0]===O);if(R.length===0&&(R=ki.filter(p=>p[0].startsWith(O))),R.length===0){const p=O.split(" ");for(let g=p.length;g>0;g--){const A=p.slice(0,g).join(" ");if(R=ki.filter(d=>d[0].startsWith(A)),R.length>0)break}}if(R.length===0)return i(`No help available for "${y.trim()}".
Try \\h with no arguments to see available help.`),!1;for(const p of R){const g={};Q(g),p[3](g),i(`Command:     ${p[0]}
Description: ${p[1]}
Syntax:
${g.data}

URL: ${l(p[2])}

`)}return!1}}const b=async(O,R=!1)=>{f(),s&&!R&&i(`/******** QUERY *********/
${O}
/************************/`);const p=await t(O);return f(),p};let E;try{if(!o){const g=await b("SHOW server_version_num",!0);o=parseInt(g.rows[0][0],10)}E={sversion:o,db:{dbName:e,sversion:o,std_strings:a,status:0,encoding:6},popt:{topt:{default_footer:!0},nullPrint:""}};const O=[y,0];await(T[0]==="d"?Xe(O,!0,T):T[0]==="s"?T[1]==="f"||T[1]==="v"?pe(O,!0,T,T[1]==="f"):0:T[0]==="l"?Le(O,!0,T):0)===0&&i(`invalid command \\${T}`);let R,p=[];for(;R=xn(O,0,null,!0);)p.push(tt('\\%s: extra argument "%s" ignored',T,R));p.length>0&&i(p.join(`
`))}catch(O){return i("ERROR:  "+O.message),c?null:!1}function I(O,...R){i(tt(O,...R))}function D(O,R,p,g,A,d,C,M,P,L){let X={},j={},H;if(Q(X),H=Y(E.db,O,R,p,g,A,d,C,M,X,j),j=j.value,P&&(P.value=H),j>=L)return I("improper qualified name (too many dotted names): %s",R),!1;if(L>1&&j==L-1){if(_h(E.db)==null)return I("You are currently not connected to a database."),!1;if(re(_h(E.db),X.data)!=0)return I("cross-database references are not implemented: %s",R),!1}return!0}function Y(O,R,p,g,A,d,C,M,P,L,X){let j={},H={},le=!1;return X||(X={}),X.value=0,p==null?(P&&(N(R,g?"  AND ":"WHERE "),g=!0,le=!0,_(R,`%s
`,P)),le):(Q(j),Q(H),V(Hd(O),d?L:null,d?j:null,H,p,A,!0,X),C&&H.len>2&&re(H.data,"^(.*)$")!=0&&(N(R,g?"  AND ":"WHERE "),g=!0,le=!0,M?(_(R,"(%s OPERATOR(pg_catalog.~) ",C),zn(R,H.data,O),Hi(O)>=12e4&&N(R," COLLATE pg_catalog.default"),_(R,`
        OR %s OPERATOR(pg_catalog.~) `,M),zn(R,H.data,O),Hi(O)>=12e4&&N(R," COLLATE pg_catalog.default"),N(R,`)
`)):(_(R,"%s OPERATOR(pg_catalog.~) ",C),zn(R,H.data,O),Hi(O)>=12e4&&N(R," COLLATE pg_catalog.default"),Ie(R,`
`))),d&&j.len>2?re(j.data,"^(.*)$")!=0&&d&&(N(R,g?"  AND ":"WHERE "),g=!0,le=!0,_(R,"%s OPERATOR(pg_catalog.~) ",d),zn(R,j.data,O),Hi(O)>=12e4&&N(R," COLLATE pg_catalog.default"),Ie(R,`
`)):P&&(N(R,g?"  AND ":"WHERE "),g=!0,le=!0,_(R,`%s
`,P)),le)}function V(O,R,p,g,A,d,C,M){let P=[{},{},{}],L=0,X={},j={},H={},le,oe,kt;Xn(A),Xn(g),Xn(!R||p),Xn(M),M.value=0,le=!1,kt=A,R?H=2:p?H=1:H=0,j=P[L],oe=!0,Q(X),Q(j),N(j,"^(");let qe=0,fe;for(;(fe=kt[qe])!=null;)fe=='"'?(le&&kt[qe+1]=='"'?(Ie(j,'"'),oe&&Ie(X,'"'),qe++):le=!le,qe++):!le&&e_(fe)?(Ie(j,xa(fe)),oe&&Ie(X,xa(fe)),qe++):!le&&fe=="*"?(N(j,".*"),oe&&Ie(X,"*"),qe++):!le&&fe=="?"?(Ie(j,"."),oe&&Ie(X,"?"),qe++):!le&&fe=="."?(oe=!1,M.value++,L<H?(N(j,")$"),j=P[++L],Q(j),N(j,"^("),qe++):(Ie(j,fe),qe++)):fe=="$"?(N(j,"\\$"),oe&&Ie(X,"$"),qe++):(((le||d)&&Me("|*+?()[]{}.^$\\",fe)!=null||fe=="["&&kt[qe+1]=="]")&&Ie(j,"\\"),oe&&Ie(X,fe),Ie(j,fe),qe++);N(j,")$"),g&&(N(g,j.data),j=P[--L]),p&&L>=0&&(N(p,j.data),j=P[--L]),R&&L>=0&&N(R,X.data)}function W(O){let R;switch(O){case 21:case 23:case 20:case 700:case 701:case 1700:case 26:case 28:case 5069:case 29:case 790:R="r";break;default:R="l";break}return R}function U(O,R,p,g,A){let d={},C,M,P;for(q(d,R.topt,R.title,Wd(O),de(O)),Xn(R.translate_columns==null||R.translate_columns==null||R.n_translate_columns>=d.ncolumns),C=0;C<d.ncolumns;C++)ie(d,Gd(O,C),R.translate_header,W(n_(O,C)));for(M=0;M<d.nrows;M++)for(P=0;P<d.ncolumns;P++){let L,X;et(O,M,P)?L=R.nullPrint?R.nullPrint:"":(L=v(O,M,P),d.aligns[P]=="r"&&R.topt.numericLocale&&(L=format_numeric_locale(L))),X=R.translate_columns&&R.translate_columns[P],z(d,L,X)}if(R.footers)for(let L of R.footers)G(d,L);ee(d)}function q(O,R,p,g,A){O.opt=R,O.title=p,O.ncolumns=g,O.nrows=A,O.headers=[],O.cells=[],O.footers=null,O.aligns=[]}function ie(O,R,p,g){p&&(R=r(R)),O.headers.push(R),O.header=R,O.aligns.push(g),O.align=g}function z(O,R,p,g){p&&(R=r(R)),O.cells.push(R),O.cell=R}function G(O,R){O.footers==null&&(O.footers=[]),O.footers.push(R),O.footer=R}function Z(O,R){O.footers&&O.footers.pop(),G(O,R)}function ee(O,R,p,g){i({...O})}async function pe(O,R,p,g){let A=2,d=Me(p,"+")!=null,C={},M,P={value:0},L=g?0:1;return Q(C),M=xn(O,4),M?await Re(L,M,P)&&await xe(L,P.value,C)?d?ue(C.data,g):i(C.data):A=5:(I(g?"function name is required":"view name is required"),A=5),A}function ue(O,R){let p=R,g=0,A="";O=O.trimEnd().split(`
`);for(let d of O)p&&(Jn(d,"AS ",3)==0||Jn(d,"BEGIN ",6)==0||Jn(d,"RETURN ",7)==0)&&(p=!1),p||g++,p?A+=tt(`        %s
`,d):A+=tt(`%-7d %s
`,g,d);i(A)}async function Re(O,R,p){let g=!0,A={};Q(A);let d;switch(O){case 0:N(A,"SELECT "),zn(A,R,E.db),_(A,"::pg_catalog.%s::pg_catalog.oid",Me(R,"(")!==null?"regprocedure":"regproc");break;case 1:N(A,"SELECT "),zn(A,R,E.db),N(A,"::pg_catalog.regclass::pg_catalog.oid");break}try{d=await b(A.data),d&&de(d)==1?p.value=Co(v(d,0,0)):(I("Error when querying"),g=!1)}catch(C){I("ERROR:  "+C.message),g=!1}return g}async function xe(O,R,p){let g=!0,A={};Q(A);let d;switch(O){case 0:k(A,"SELECT pg_catalog.pg_get_functiondef(%u)",R);break;case 1:E.sversion>=90400?k(A,"SELECT nspname, relname, relkind, pg_catalog.pg_get_viewdef(c.oid, true), pg_catalog.array_remove(pg_catalog.array_remove(c.reloptions,'check_option=local'),'check_option=cascaded') AS reloptions, CASE WHEN 'check_option=local' = ANY (c.reloptions) THEN 'LOCAL'::text WHEN 'check_option=cascaded' = ANY (c.reloptions) THEN 'CASCADED'::text ELSE NULL END AS checkoption FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON c.relnamespace = n.oid WHERE c.oid = %u",R):k(A,"SELECT nspname, relname, relkind, pg_catalog.pg_get_viewdef(c.oid, true), c.reloptions AS reloptions, NULL AS checkoption FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON c.relnamespace = n.oid WHERE c.oid = %u",R);break}if(d=await b(A.data),d&&de(d)==1){switch(Lo(p),O){case 0:N(p,v(d,0,0));break;case 1:let C=v(d,0,0),M=v(d,0,1),P=v(d,0,2),L=v(d,0,3),X=v(d,0,4),j=v(d,0,5);switch(P[0]){case Di:N(p,"CREATE OR REPLACE VIEW ");break;default:I('"%s.%s" is not a view',C,M),g=!1;break}_(p,"%s.",Ce(C)),N(p,Ce(M)),X!=null&&cn(X)>2&&(N(p,`
 WITH (`),Oe(p,X,"",E.encoding,E.db.standard_strings)||(I("could not parse reloptions array"),g=!1),Ie(p,")")),_(p,` AS
%s`,L),p.len>0&&p.data[p.len-1]==";"&&(p.data=p.data.slice(0,p.len-1)),j&&j[0]!=null&&_(p,`
 WITH %s CHECK OPTION`,j);break}p.len>0&&p.data[p.len-1]!=`
`&&Ie(p,`
`)}else I("Error when querying"),g=!1;return g}function Oe(O,R,p,g,A){let d=[],C={},M;if(!ye(R,d,C))return!1;for(C=C.value,M=0;M<C;M++){let P=d[M],[L,X]=P.split("=");X??(X=""),M>0&&N(O,", "),_(O,"%s%s=",p,Ce(L)),re(Ce(X),X)==0?N(O,X):va(O,X,g,A)}return!0}function ye(O,R,p){let g,A,d;if(g=cn(O),p.value=0,g<2||O[0]!="{"||O[g-1]!="}")return!1;let C=0;for(C++,d=0;O[C]!="}";){if(O[C]==null)return!1;for(A="";O[C]!="}"&&O[C]!=",";){if(O[C]==null)return!1;if(O[C]!='"')A+=O[C++];else{for(C++;O[C]!='"';){if(O[C]==null||O[C]=="\\"&&(C++,O[C]==null))return!1;A+=O[C++]}C++}}R[d]=A,O[C]==","&&C++,d++}return O[C+1]&&O[C+1]!=null?!1:(p.value=d,!0)}function Ce(O){let R={};Q(R);let p=!1;return O[0]>="a"&&O[0]<="z"||O[0]=="_"?/[^a-z0-9_]/.test(O)&&(p=!0):p=!0,p||new Set(["all","analyse","analyze","and","any","array","as","asc","asymmetric","authorization","between","bigint","binary","bit","boolean","both","case","cast","char","character","check","coalesce","collate","collation","column","concurrently","constraint","create","cross","current_catalog","current_date","current_role","current_schema","current_time","current_timestamp","current_user","dec","decimal","default","deferrable","desc","distinct","do","else","end","except","exists","extract","false","fetch","float","for","foreign","freeze","from","full","grant","greatest","group","grouping","having","ilike","in","initially","inner","inout","int","integer","intersect","interval","into","is","isnull","join","json","json_array","json_arrayagg","json_object","json_objectagg","json_scalar","json_serialize","lateral","leading","least","left","like","limit","localtime","localtimestamp","national","natural","nchar","none","normalize","not","notnull","null","nullif","numeric","offset","on","only","or","order","out","outer","overlaps","overlay","placing","position","precision","primary","real","references","returning","right","row","select","session_user","setof","similar","smallint","some","substring","symmetric","system_user","table","tablesample","then","time","timestamp","to","trailing","treat","trim","true","union","unique","user","using","values","varchar","variadic","verbose","when","where","window","with","xmlattributes","xmlconcat","xmlelement","xmlexists","xmlforest","xmlnamespaces","xmlparse","xmlpi","xmlroot","xmlserialize","xmltable"]).has(O)&&(p=!0),p?(Ie(R,'"'),Ie(R,O.replace(/"/g,'""')),Ie(R,'"')):N(R,O),R.data}async function Le(O,R,p){let g,A,d;return A=xn(O,0),d=Me(p,"+")!=null,g=await Xt(A,d),g?2:5}async function Xe(O,R,p){let g=2,A=!0,d,C,M;switch(d=xn(O,0),C=Me(p,"+")!=null,M=Me(p,"S")!=null,p[1]){case void 0:case"+":case"S":d?A=await Jd(d,C,M):A=await ul("tvmsE",null,C,M);break;case"A":{let P=null;switch(d&&p[2]!=null&&p[2]!="+"&&(P=xn(O,0)),p[2]){case void 0:case"+":A=await qn(d,C);break;case"c":A=await Ip(d,P,C);break;case"f":A=await wp(d,P,C);break;case"o":A=await xp(d,P,C);break;case"p":A=await vp(d,P,C);break;default:g=0;break}}break;case"a":A=await sn(d,C,M);break;case"b":A=await Es(d,C);break;case"c":Jn(p,"dconfig",7)==0?A=await rp(d,C):A=await sp(d,C,M);break;case"C":A=await lp(d,C);break;case"d":Jn(p,"ddp",3)==0?A=await Kd(d):A=await $d(d,M);break;case"D":A=await ip(d,C,M);break;case"f":switch(p[2]){case void 0:case"+":case"S":case"a":case"n":case"p":case"t":case"w":A=await rt(O,p,d,C,M);break;default:g=0;break}break;case"g":A=await fl(d,C,M);break;case"l":A=await Dp(C);break;case"L":A=await np(d,C,M);break;case"n":A=await hp(d,C,M);break;case"o":A=await rt(O,p,d,C,M);break;case"O":A=await cp(d,C,M);break;case"p":A=await zd(d,M);break;case"P":switch(p[2]){case void 0:case"+":case"t":case"i":case"n":A=await tp(p.slice(2),d,C);break;default:g=0;break}break;case"T":A=await jd(d,C,M);break;case"t":case"v":case"m":case"i":case"s":case"E":A=await ul(p[1],d,C,M);break;case"r":if(p[2]=="d"&&p[3]=="s"){let P=null;d&&(P=xn(O,0)),A=await Zd(d,P)}else p[2]=="g"?A=await ep(d,M):g=0;break;case"R":switch(p[2]){case"p":C?A=await Cp(d):A=await yp(d);break;case"s":A=await Lp(d,C);break;default:g=0}break;case"u":A=await fl(d,C,M);break;case"F":switch(p[2]){case void 0:case"+":A=await mp(d,C);break;case"p":A=await fp(d,C);break;case"d":A=await pp(d,C);break;case"t":A=await gp(d,C);break;default:g=0;break}break;case"e":switch(p[2]){case"s":A=await Ap(d,C);break;case"u":A=await Rp(d,C);break;case"w":A=await Sp(d,C);break;case"t":A=await _p(d,C);break;default:g=0;break}break;case"x":C?A=await Np(d):A=await Op(d);break;case"X":A=await ap(d);break;case"y":A=await op(d,C);break;default:g=0}return A||(g=5),g}async function rt(O,R,p,g,A){let d,C=[],M=0;if(p){let P;for(;(P=xn(O,0))!=null&&(C[M++]=P,!(M>=100)););}return R[1]=="f"?d=await Yd(R.slice(2),p,C,M,g,A):d=await Xd(p,C,M,g,A),d}async function Xt(O,R){let p,g={},A=E.popt;return Q(g),k(g,`SELECT
  d.datname as "%s",
  pg_catalog.pg_get_userbyid(d.datdba) as "%s",
  pg_catalog.pg_encoding_to_char(d.encoding) as "%s",
`,S("Name"),S("Owner"),S("Encoding")),E.sversion>=15e4?_(g,`  CASE d.datlocprovider WHEN 'c' THEN 'libc' WHEN 'i' THEN 'icu' END AS "%s",
`,S("Locale Provider")):_(g,`  'libc' AS "%s",
`,S("Locale Provider")),_(g,`  d.datcollate as "%s",
  d.datctype as "%s",
`,S("Collate"),S("Ctype")),E.sversion>=15e4?_(g,`  d.daticulocale as "%s",
`,S("ICU Locale")):_(g,`  NULL as "%s",
`,S("ICU Locale")),E.sversion>=16e4?_(g,`  d.daticurules as "%s",
`,S("ICU Rules")):_(g,`  NULL as "%s",
`,S("ICU Rules")),N(g,"  "),mt(g,"d.datacl"),R&&_(g,`,
  CASE WHEN pg_catalog.has_database_privilege(d.datname, 'CONNECT')
       THEN pg_catalog.pg_size_pretty(pg_catalog.pg_database_size(d.datname))
       ELSE 'No Access'
  END as "%s",
  t.spcname as "%s",
  pg_catalog.shobj_description(d.oid, 'pg_database') as "%s"`,S("Size"),S("Tablespace"),S("Description")),N(g,`
FROM pg_catalog.pg_database d
`),R&&N(g,`  JOIN pg_catalog.pg_tablespace t on d.dattablespace = t.oid
`),O&&!D(g,O,!1,!1,null,"d.datname",null,null,null,1)||(N(g,"ORDER BY 1;"),p=await b(g.data),!p)?!1:(A.nullPrint=null,A.title=r("List of databases"),A.translate_header=!0,U(p,A,E.queryFout,!1,E.logfile),!0)}async function sn(O,R,p){let g={},A,d=E.popt;return Q(g),k(g,`SELECT n.nspname as "%s",
  p.proname AS "%s",
  pg_catalog.format_type(p.prorettype, NULL) AS "%s",
  CASE WHEN p.pronargs = 0
    THEN CAST('*' AS pg_catalog.text)
    ELSE pg_catalog.pg_get_function_arguments(p.oid)
  END AS "%s",
`,S("Schema"),S("Name"),S("Result data type"),S("Argument data types")),E.sversion>=11e4?_(g,`  pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
WHERE p.prokind = 'a'
`,S("Description")):_(g,`  pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
WHERE p.proisagg
`,S("Description")),!p&&!O&&N(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,O,!0,!1,"n.nspname","p.proname",null,"pg_catalog.pg_function_is_visible(p.oid)",null,3)||(N(g,"ORDER BY 1, 2, 4;"),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of aggregate functions"),d.translate_header=!0,U(A,d,E.queryFout,!1,E.logfile),!0)}async function qn(O,R){let p={},g,A=E.popt,d=[!1,!0,!1,!1];return E.sversion<90600?(I("The server (version %s) does not support access methods.",on(E.sversion,!1,void 0)),!0):(Q(p),k(p,`SELECT amname AS "%s",
  CASE amtype WHEN 'i' THEN '%s' WHEN 't' THEN '%s' END AS "%s"`,S("Name"),S("Index"),S("Table"),S("Type")),R&&_(p,`,
  amhandler AS "%s",
  pg_catalog.obj_description(oid, 'pg_am') AS "%s"`,S("Handler"),S("Description")),N(p,`
FROM pg_catalog.pg_am
`),!D(p,O,!1,!1,null,"amname",null,null,null,1)||(N(p,"ORDER BY 1;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of access methods"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Be(d),U(g,A,E.queryFout,!1,E.logfile),!0))}async function Es(O,R){let p={},g,A=E.popt;return Q(p),k(p,`SELECT spcname AS "%s",
  pg_catalog.pg_get_userbyid(spcowner) AS "%s",
  pg_catalog.pg_tablespace_location(oid) AS "%s"`,S("Name"),S("Owner"),S("Location")),R&&(N(p,`,
  `),mt(p,"spcacl"),_(p,`,
  spcoptions AS "%s",
  pg_catalog.pg_size_pretty(pg_catalog.pg_tablespace_size(oid)) AS "%s",
  pg_catalog.shobj_description(oid, 'pg_tablespace') AS "%s"`,S("Options"),S("Size"),S("Description"))),N(p,`
FROM pg_catalog.pg_tablespace
`),!D(p,O,!1,!1,null,"spcname",null,null,null,1)||(N(p,"ORDER BY 1;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of tablespaces"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function Yd(O,R,p,g,A,d){let C=Me(O,"a")!=null,M=Me(O,"n")!=null,P=Me(O,"p")!=null,L=Me(O,"t")!=null,X=Me(O,"w")!=null,j,H={},le,oe=E.popt,kt=[!1,!1,!1,!1,!0,!0,!0,!1,!0,!1,!1,!1,!1],qe=[!1,!1,!1,!1,!0,!0,!1,!0,!1,!1,!1,!1];if(cn(O)!=Q0(O,"anptwS+"))return I("\\df only takes [anptwS+] as options"),!0;if(P&&E.sversion<11e4)return I('\\df does not take a "%c" option with server version %s',"p",on(E.sversion,!1,void 0)),!0;!C&&!M&&!P&&!L&&!X&&(C=M=L=X=!0,E.sversion>=11e4&&(P=!0)),Q(H),k(H,`SELECT n.nspname as "%s",
  p.proname as "%s",
`,S("Schema"),S("Name")),E.sversion>=11e4?_(H,`  pg_catalog.pg_get_function_result(p.oid) as "%s",
  pg_catalog.pg_get_function_arguments(p.oid) as "%s",
 CASE p.prokind
  WHEN 'a' THEN '%s'
  WHEN 'w' THEN '%s'
  WHEN 'p' THEN '%s'
  ELSE '%s'
 END as "%s"`,S("Result data type"),S("Argument data types"),S("agg"),S("window"),S("proc"),S("func"),S("Type")):_(H,`  pg_catalog.pg_get_function_result(p.oid) as "%s",
  pg_catalog.pg_get_function_arguments(p.oid) as "%s",
 CASE
  WHEN p.proisagg THEN '%s'
  WHEN p.proiswindow THEN '%s'
  WHEN p.prorettype = 'pg_catalog.trigger'::pg_catalog.regtype THEN '%s'
  ELSE '%s'
 END as "%s"`,S("Result data type"),S("Argument data types"),S("agg"),S("window"),S("trigger"),S("func"),S("Type")),A&&(_(H,`,
 CASE
  WHEN p.provolatile = 'i' THEN '%s'
  WHEN p.provolatile = 's' THEN '%s'
  WHEN p.provolatile = 'v' THEN '%s'
 END as "%s"`,S("immutable"),S("stable"),S("volatile"),S("Volatility")),E.sversion>=90600&&_(H,`,
 CASE
  WHEN p.proparallel = 'r' THEN '%s'
  WHEN p.proparallel = 's' THEN '%s'
  WHEN p.proparallel = 'u' THEN '%s'
 END as "%s"`,S("restricted"),S("safe"),S("unsafe"),S("Parallel")),_(H,`,
 pg_catalog.pg_get_userbyid(p.proowner) as "%s",
 CASE WHEN prosecdef THEN '%s' ELSE '%s' END AS "%s"`,S("Owner"),S("definer"),S("invoker"),S("Security")),N(H,`,
 `),mt(H,"p.proacl"),_(H,`,
 l.lanname as "%s"`,S("Language")),_(H,`,
 CASE WHEN l.lanname IN ('internal', 'c') THEN p.prosrc END as "%s"`,S("Internal name")),_(H,`,
 pg_catalog.obj_description(p.oid, 'pg_proc') as "%s"`,S("Description"))),N(H,`
FROM pg_catalog.pg_proc p
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.pronamespace
`);for(let fe=0;fe<g;fe++)_(H,`     LEFT JOIN pg_catalog.pg_type t%d ON t%d.oid = p.proargtypes[%d]
     LEFT JOIN pg_catalog.pg_namespace nt%d ON nt%d.oid = t%d.typnamespace
`,fe,fe,fe,fe,fe,fe);if(A&&N(H,`     LEFT JOIN pg_catalog.pg_language l ON l.oid = p.prolang
`),j=!1,!(M&&C&&P&&L&&X))if(M)C||(j?N(H,"      AND "):(N(H,"WHERE "),j=!0),E.sversion>=11e4?N(H,`p.prokind <> 'a'
`):N(H,`NOT p.proisagg
`)),!P&&E.sversion>=11e4&&(j?N(H,"      AND "):(N(H,"WHERE "),j=!0),N(H,`p.prokind <> 'p'
`)),L||(j?N(H,"      AND "):(N(H,"WHERE "),j=!0),N(H,`p.prorettype <> 'pg_catalog.trigger'::pg_catalog.regtype
`)),X||(j?N(H,"      AND "):(N(H,"WHERE "),j=!0),E.sversion>=11e4?N(H,`p.prokind <> 'w'
`):N(H,`NOT p.proiswindow
`));else{let fe=!1;N(H,`WHERE (
       `),j=!0,C&&(E.sversion>=11e4?N(H,`p.prokind = 'a'
`):N(H,`p.proisagg
`),fe=!0),L&&(fe&&N(H,"       OR "),N(H,`p.prorettype = 'pg_catalog.trigger'::pg_catalog.regtype
`),fe=!0),P&&(fe&&N(H,"       OR "),N(H,`p.prokind = 'p'
`),fe=!0),X&&(fe&&N(H,"       OR "),E.sversion>=11e4?N(H,`p.prokind = 'w'
`):N(H,`p.proiswindow
`)),N(H,`      )
`)}if(!D(H,R,j,!1,"n.nspname","p.proname",null,"pg_catalog.pg_function_is_visible(p.oid)",null,3))return!1;for(let fe=0;fe<g;fe++)if(re(p[fe],"-")!=0){let Ri,_i,Oi,Ni;if(Ri=tt("nt%d.nspname",fe),_i=tt("t%d.typname",fe),Oi=tt("pg_catalog.format_type(t%d.oid, NULL)",fe),Ni=tt("pg_catalog.pg_type_is_visible(t%d.oid)",fe),!D(H,zr(p[fe]),!0,!1,Ri,_i,Oi,Ni,null,3))return!1}else _(H,`  AND t%d.typname IS NULL
`,fe);return!d&&!R&&N(H,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),N(H,"ORDER BY 1, 2, 4;"),le=await b(H.data),le?(oe.nullPrint=null,oe.title=r("List of functions"),oe.translate_header=!0,E.sversion>=90600?(oe.translate_columns=kt,oe.n_translate_columns=Be(kt)):(oe.translate_columns=qe,oe.n_translate_columns=Be(qe)),U(le,oe,E.queryFout,!1,E.logfile),!0):!1}async function jd(O,R,p){let g={},A,d=E.popt;return Q(g),k(g,`SELECT n.nspname as "%s",
  pg_catalog.format_type(t.oid, NULL) AS "%s",
`,S("Schema"),S("Name")),R&&(_(g,`  t.typname AS "%s",
  CASE WHEN t.typrelid != 0
      THEN CAST('tuple' AS pg_catalog.text)
    WHEN t.typlen < 0
      THEN CAST('var' AS pg_catalog.text)
    ELSE CAST(t.typlen AS pg_catalog.text)
  END AS "%s",
  pg_catalog.array_to_string(
      ARRAY(
          SELECT e.enumlabel
          FROM pg_catalog.pg_enum e
          WHERE e.enumtypid = t.oid
          ORDER BY e.enumsortorder
      ),
      E'\\n'
  ) AS "%s",
  pg_catalog.pg_get_userbyid(t.typowner) AS "%s",
`,S("Internal name"),S("Size"),S("Elements"),S("Owner")),mt(g,"t.typacl"),N(g,`,
  `)),_(g,`  pg_catalog.obj_description(t.oid, 'pg_type') as "%s"
`,S("Description")),N(g,`FROM pg_catalog.pg_type t
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace
`),N(g,"WHERE (t.typrelid = 0 "),N(g,`OR (SELECT c.relkind = 'c' FROM pg_catalog.pg_class c WHERE c.oid = t.typrelid))
`),(O==null||or(O,"[]")==null)&&N(g,`  AND NOT EXISTS(SELECT 1 FROM pg_catalog.pg_type el WHERE el.oid = t.typelem AND el.typarray = t.oid)
`),!p&&!O&&N(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,zr(O),!0,!1,"n.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3)||(N(g,"ORDER BY 1, 2;"),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of data types"),d.translate_header=!0,U(A,d,E.queryFout,!1,E.logfile),!0)}function zr(O){let R=["decimal","numeric","float","double precision","int","integer","bool[]","boolean[]","decimal[]","numeric[]","float[]","double precision[]","float4[]","real[]","float8[]","double precision[]","int[]","integer[]","int2[]","smallint[]","int4[]","integer[]","int8[]","bigint[]","time[]","time without time zone[]","timetz[]","time with time zone[]","timestamp[]","timestamp without time zone[]","timestamptz[]","timestamp with time zone[]","varbit[]","bit varying[]","varchar[]","character varying[]",null];if(O==null)return null;for(let p=0;R[p]!=null;p+=2)if(t_(O,R[p])==0)return R[p+1];return O}async function Xd(O,R,p,g,A){let d={},C,M=E.popt;if(Q(d),k(d,`SELECT n.nspname as "%s",
  o.oprname AS "%s",
  CASE WHEN o.oprkind='l' THEN NULL ELSE pg_catalog.format_type(o.oprleft, NULL) END AS "%s",
  CASE WHEN o.oprkind='r' THEN NULL ELSE pg_catalog.format_type(o.oprright, NULL) END AS "%s",
  pg_catalog.format_type(o.oprresult, NULL) AS "%s",
`,S("Schema"),S("Name"),S("Left arg type"),S("Right arg type"),S("Result type")),g&&_(d,`  o.oprcode AS "%s",
`,S("Function")),_(d,`  coalesce(pg_catalog.obj_description(o.oid, 'pg_operator'),
           pg_catalog.obj_description(o.oprcode, 'pg_proc')) AS "%s"
FROM pg_catalog.pg_operator o
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = o.oprnamespace
`,S("Description")),p>=2?(p=2,N(d,`     LEFT JOIN pg_catalog.pg_type t0 ON t0.oid = o.oprleft
     LEFT JOIN pg_catalog.pg_namespace nt0 ON nt0.oid = t0.typnamespace
     LEFT JOIN pg_catalog.pg_type t1 ON t1.oid = o.oprright
     LEFT JOIN pg_catalog.pg_namespace nt1 ON nt1.oid = t1.typnamespace
`)):p==1&&N(d,`     LEFT JOIN pg_catalog.pg_type t0 ON t0.oid = o.oprright
     LEFT JOIN pg_catalog.pg_namespace nt0 ON nt0.oid = t0.typnamespace
`),!A&&!O&&N(d,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(d,O,!A&&!O,!0,"n.nspname","o.oprname",null,"pg_catalog.pg_operator_is_visible(o.oid)",null,3))return!1;p==1&&N(d,`  AND o.oprleft = 0
`);for(let P=0;P<p;P++)if(re(R[P],"-")!=0){let L,X,j,H;if(L=tt("nt%d.nspname",P),X=tt("t%d.typname",P),j=tt("pg_catalog.format_type(t%d.oid, NULL)",P),H=tt("pg_catalog.pg_type_is_visible(t%d.oid)",P),!D(d,zr(R[P]),!0,!1,L,X,j,H,null,3))return!1}else _(d,`  AND t%d.typname IS NULL
`,P);return N(d,"ORDER BY 1, 2, 3, 4;"),C=await b(d.data),C?(M.nullPrint=null,M.title=r("List of operators"),M.translate_header=!0,U(C,M,E.queryFout,!1,E.logfile),!0):!1}async function zd(O,R){let p={},g,A=E.popt,d=[!1,!1,!0,!1,!1,!1];return Q(p),k(p,`SELECT n.nspname as "%s",
  c.relname as "%s",
  CASE c.relkind WHEN 'r' THEN '%s' WHEN 'v' THEN '%s' WHEN 'm' THEN '%s' WHEN 'S' THEN '%s' WHEN 'f' THEN '%s' WHEN 'p' THEN '%s' END as "%s",
  `,S("Schema"),S("Name"),S("table"),S("view"),S("materialized view"),S("sequence"),S("foreign table"),S("partitioned table"),S("Type")),mt(p,"c.relacl"),_(p,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT attname || E':\\n  ' || pg_catalog.array_to_string(attacl, E'\\n  ')
    FROM pg_catalog.pg_attribute a
    WHERE attrelid = c.oid AND NOT attisdropped AND attacl IS NOT NULL
  ), E'\\n') AS "%s"`,S("Column privileges")),E.sversion>=90500&&E.sversion<1e5&&_(p,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT polname
    || CASE WHEN polcmd != '*' THEN
           E' (' || polcmd::pg_catalog.text || E'):'
       ELSE E':'
       END
    || CASE WHEN polqual IS NOT NULL THEN
           E'\\n  (u): ' || pg_catalog.pg_get_expr(polqual, polrelid)
       ELSE E''
       END
    || CASE WHEN polwithcheck IS NOT NULL THEN
           E'\\n  (c): ' || pg_catalog.pg_get_expr(polwithcheck, polrelid)
       ELSE E''
       END    || CASE WHEN polroles <> '{0}' THEN
           E'\\n  to: ' || pg_catalog.array_to_string(
               ARRAY(
                   SELECT rolname
                   FROM pg_catalog.pg_roles
                   WHERE oid = ANY (polroles)
                   ORDER BY 1
               ), E', ')
       ELSE E''
       END
    FROM pg_catalog.pg_policy pol
    WHERE polrelid = c.oid), E'\\n')
    AS "%s"`,S("Policies")),E.sversion>=1e5&&_(p,`,
  pg_catalog.array_to_string(ARRAY(
    SELECT polname
    || CASE WHEN NOT polpermissive THEN
       E' (RESTRICTIVE)'
       ELSE '' END
    || CASE WHEN polcmd != '*' THEN
           E' (' || polcmd::pg_catalog.text || E'):'
       ELSE E':'
       END
    || CASE WHEN polqual IS NOT NULL THEN
           E'\\n  (u): ' || pg_catalog.pg_get_expr(polqual, polrelid)
       ELSE E''
       END
    || CASE WHEN polwithcheck IS NOT NULL THEN
           E'\\n  (c): ' || pg_catalog.pg_get_expr(polwithcheck, polrelid)
       ELSE E''
       END    || CASE WHEN polroles <> '{0}' THEN
           E'\\n  to: ' || pg_catalog.array_to_string(
               ARRAY(
                   SELECT rolname
                   FROM pg_catalog.pg_roles
                   WHERE oid = ANY (polroles)
                   ORDER BY 1
               ), E', ')
       ELSE E''
       END
    FROM pg_catalog.pg_policy pol
    WHERE polrelid = c.oid), E'\\n')
    AS "%s"`,S("Policies")),N(p,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE c.relkind IN ('r','v','m','S','f','p')
`),!R&&!O&&N(p,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(p,O,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,k(p,r("Access privileges")),A.title=p.data,A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Be(d),U(g,A,E.queryFout,!1,E.logfile),!0)}async function Kd(O){let R={},p,g=E.popt,A=[!1,!1,!0,!1];return Q(R),k(R,`SELECT pg_catalog.pg_get_userbyid(d.defaclrole) AS "%s",
  n.nspname AS "%s",
  CASE d.defaclobjtype WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' WHEN '%c' THEN '%s' END AS "%s",
  `,S("Owner"),S("Schema"),G0,S("table"),V0,S("sequence"),q0,S("function"),Y0,S("type"),j0,S("schema"),S("Type")),mt(R,"d.defaclacl"),N(R,`
FROM pg_catalog.pg_default_acl d
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = d.defaclnamespace
`),!D(R,O,!1,!1,null,"n.nspname","pg_catalog.pg_get_userbyid(d.defaclrole)",null,null,3)||(N(R,"ORDER BY 1, 2, 3;"),p=await b(R.data),!p)?!1:(g.nullPrint=null,k(R,r("Default access privileges")),g.title=R.data,g.translate_header=!0,g.translate_columns=A,g.n_translate_columns=Be(A),U(p,g,E.queryFout,!1,E.logfile),!0)}async function $d(O,R){let p={},g,A=E.popt,d=[!1,!1,!0,!1];return Q(p),_(p,`SELECT DISTINCT tt.nspname AS "%s", tt.name AS "%s", tt.object AS "%s", d.description AS "%s"
FROM (
`,S("Schema"),S("Name"),S("Object"),S("Description")),_(p,`  SELECT pgc.oid as oid, pgc.tableoid AS tableoid,
  n.nspname as nspname,
  CAST(pgc.conname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_constraint pgc
    JOIN pg_catalog.pg_class c ON c.oid = pgc.conrelid
    LEFT JOIN pg_catalog.pg_namespace n     ON n.oid = c.relnamespace
`,S("table constraint")),!R&&!O&&N(p,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(p,O,!R&&!O,!1,"n.nspname","pgc.conname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(_(p,`UNION ALL
  SELECT pgc.oid as oid, pgc.tableoid AS tableoid,
  n.nspname as nspname,
  CAST(pgc.conname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_constraint pgc
    JOIN pg_catalog.pg_type t ON t.oid = pgc.contypid
    LEFT JOIN pg_catalog.pg_namespace n     ON n.oid = t.typnamespace
`,S("domain constraint")),!R&&!O&&N(p,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(p,O,!R&&!O,!1,"n.nspname","pgc.conname",null,"pg_catalog.pg_type_is_visible(t.oid)",null,3))||(_(p,`UNION ALL
  SELECT o.oid as oid, o.tableoid as tableoid,
  n.nspname as nspname,
  CAST(o.opcname AS pg_catalog.text) as name,
  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_opclass o
    JOIN pg_catalog.pg_am am ON o.opcmethod = am.oid
    JOIN pg_catalog.pg_namespace n ON n.oid = o.opcnamespace
`,S("operator class")),!R&&!O&&N(p,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(p,O,!0,!1,"n.nspname","o.opcname",null,"pg_catalog.pg_opclass_is_visible(o.oid)",null,3))||(_(p,`UNION ALL
  SELECT opf.oid as oid, opf.tableoid as tableoid,
  n.nspname as nspname,
  CAST(opf.opfname AS pg_catalog.text) AS name,
  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_opfamily opf
    JOIN pg_catalog.pg_am am ON opf.opfmethod = am.oid
    JOIN pg_catalog.pg_namespace n ON opf.opfnamespace = n.oid
`,S("operator family")),!R&&!O&&N(p,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(p,O,!0,!1,"n.nspname","opf.opfname",null,"pg_catalog.pg_opfamily_is_visible(opf.oid)",null,3))||(_(p,`UNION ALL
  SELECT r.oid as oid, r.tableoid as tableoid,
  n.nspname as nspname,
  CAST(r.rulename AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_rewrite r
       JOIN pg_catalog.pg_class c ON c.oid = r.ev_class
       LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  WHERE r.rulename != '_RETURN'
`,S("rule")),!R&&!O&&N(p,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(p,O,!0,!1,"n.nspname","r.rulename",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3))||(_(p,`UNION ALL
  SELECT t.oid as oid, t.tableoid as tableoid,
  n.nspname as nspname,
  CAST(t.tgname AS pg_catalog.text) as name,  CAST('%s' AS pg_catalog.text) as object
  FROM pg_catalog.pg_trigger t
       JOIN pg_catalog.pg_class c ON c.oid = t.tgrelid
       LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
`,S("trigger")),!R&&!O&&N(p,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(p,O,!R&&!O,!1,"n.nspname","t.tgname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3))||(N(p,`) AS tt
  JOIN pg_catalog.pg_description d ON (tt.oid = d.objoid AND tt.tableoid = d.classoid AND d.objsubid = 0)
`),N(p,"ORDER BY 1, 2, 3;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("Object descriptions"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Be(d),U(g,A,E.queryFout,!1,E.logfile),!0)}async function Jd(O,R,p){let g={},A,d;if(Q(g),k(g,`SELECT c.oid,
  n.nspname,
  c.relname
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
`),!p&&!O&&N(g,`WHERE n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,O,!p&&!O,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(N(g,"ORDER BY 2, 3;"),A=await b(g.data),!A))return!1;if(de(A)==0)return E.quiet||(O?I('Did not find any relation named "%s".',O):I("Did not find any relations.")),!1;for(d=0;d<de(A);d++){let C,M,P;if(C=v(A,d,0),M=v(A,d,1),P=v(A,d,2),!await Qd(M,P,C,R)||c)return!1}return!0}async function Qd(O,R,p,g){let A=!1,d={},C=null,M=E.popt.topt,P={},L,X=null,j=[],H={},le={},oe,kt=-1,qe=-1,fe=-1,Ri=-1,_i=-1,Oi=-1,Ni=-1,Ts=-1,Ss=-1,As=-1,Rs=-1,_s=-1,Os=-1,Ns=-1,$r,F={},bs=!1;if(M.default_footer=!1,M.expanded=!1,Q(d),Q(H),Q(le),E.sversion>=12e4?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, false AS relhasoids, c.relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident, am.amname
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
LEFT JOIN pg_catalog.pg_am am ON (c.relam = am.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",p):E.sversion>=1e5?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, c.relhasoids, c.relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",p):E.sversion>=90500?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relrowsecurity, c.relforcerowsecurity, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",p):E.sversion>=90400?k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, false, false, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence, c.relreplident
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",p):k(d,`SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, false, false, c.relhasoids, false as relispartition, %s, c.reltablespace, CASE WHEN c.reloftype = 0 THEN '' ELSE c.reloftype::pg_catalog.regtype::pg_catalog.text END, c.relpersistence
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '%s';`,g?`pg_catalog.array_to_string(c.reloptions || array(select 'toast.' || x from pg_catalog.unnest(tc.reloptions) x), ', ')
`:"''",p),C=await b(d.data),!C)return A;if(de(C)==0)return E.quiet||I("Did not find any relation with OID %s.",p),A;if(F.checks=Sh(v(C,0,0)),F.relkind=v(C,0,1),F.hasindex=re(v(C,0,2),"t")==0,F.hasrules=re(v(C,0,3),"t")==0,F.hastriggers=re(v(C,0,4),"t")==0,F.rowsecurity=re(v(C,0,5),"t")==0,F.forcerowsecurity=re(v(C,0,6),"t")==0,F.hasoids=re(v(C,0,7),"t")==0,F.ispartition=re(v(C,0,8),"t")==0,F.reloptions=In(v(C,0,9)),F.tablespace=Co(v(C,0,10)),F.reloftype=re(v(C,0,11),"")!=0?In(v(C,0,11)):null,F.relpersistence=v(C,0,12),F.relreplident=E.sversion>=90400?v(C,0,13):"d",E.sversion>=12e4?F.relam=et(C,0,14)?null:In(v(C,0,14)):F.relam=null,C=null,F.relkind==$0){let x=null,K=E.popt,se=[null,null];if(E.sversion>=1e5?(k(d,`SELECT pg_catalog.format_type(seqtypid, NULL) AS "%s",
       seqstart AS "%s",
       seqmin AS "%s",
       seqmax AS "%s",
       seqincrement AS "%s",
       CASE WHEN seqcycle THEN '%s' ELSE '%s' END AS "%s",
       seqcache AS "%s"
`,S("Type"),S("Start"),S("Minimum"),S("Maximum"),S("Increment"),S("yes"),S("no"),S("Cycles?"),S("Cache")),_(d,`FROM pg_catalog.pg_sequence
WHERE seqrelid = '%s';`,p)):(k(d,`SELECT 'bigint' AS "%s",
       start_value AS "%s",
       min_value AS "%s",
       max_value AS "%s",
       increment_by AS "%s",
       CASE WHEN is_cycled THEN '%s' ELSE '%s' END AS "%s",
       cache_value AS "%s"
`,S("Type"),S("Start"),S("Minimum"),S("Maximum"),S("Increment"),S("yes"),S("no"),S("Cycles?"),S("Cache")),_(d,"FROM %s",Ce(O)),_(d,".%s;",Ce(R))),C=await b(d.data),!C)return A;if(k(d,`SELECT pg_catalog.quote_ident(nspname) || '.' ||
   pg_catalog.quote_ident(relname) || '.' ||
   pg_catalog.quote_ident(attname),
   d.deptype
FROM pg_catalog.pg_class c
INNER JOIN pg_catalog.pg_depend d ON c.oid=d.refobjid
INNER JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
INNER JOIN pg_catalog.pg_attribute a ON (
 a.attrelid=c.oid AND
 a.attnum=d.refobjsubid)
WHERE d.classid='pg_catalog.pg_class'::pg_catalog.regclass
 AND d.refclassid='pg_catalog.pg_class'::pg_catalog.regclass
 AND d.objid='%s'
 AND d.deptype IN ('a', 'i')`,p),x=await b(d.data),x){if(de(x)==1)switch(v(x,0,1)[0]){case"a":se[0]=Io(r("Owned by: %s"),v(x,0,0));break;case"i":se[0]=Io(r("Sequence for identity column: %s"),v(x,0,0));break}}else return A;return F.relpersistence=="u"?k(H,r('Unlogged sequence "%s.%s"'),O,R):k(H,r('Sequence "%s.%s"'),O,R),K.footers=se,K.topt.default_footer=!1,K.title=H.data,K.translate_header=!0,U(C,K,E.queryFout,!1,E.logfile),A=!0,A}if((F.relkind==zt||F.relkind==Di||F.relkind==_t||F.relkind==Kt||F.relkind==yo||F.relkind==ht)&&(bs=!0),oe=0,k(d,"SELECT a.attname"),kt=oe++,N(d,`,
  pg_catalog.format_type(a.atttypid, a.atttypmod)`),qe=oe++,bs&&(N(d,`,
  (SELECT pg_catalog.pg_get_expr(d.adbin, d.adrelid, true)
   FROM pg_catalog.pg_attrdef d
   WHERE d.adrelid = a.attrelid AND d.adnum = a.attnum AND a.atthasdef),
  a.attnotnull`),fe=oe++,Ri=oe++,N(d,`,
  (SELECT c.collname FROM pg_catalog.pg_collation c, pg_catalog.pg_type t
   WHERE c.oid = a.attcollation AND t.oid = a.atttypid AND a.attcollation <> t.typcollation) AS attcollation`),_i=oe++,E.sversion>=1e5?N(d,`,
  a.attidentity`):N(d,`,
  ''::pg_catalog.char AS attidentity`),Oi=oe++,E.sversion>=12e4?N(d,`,
  a.attgenerated`):N(d,`,
  ''::pg_catalog.char AS attgenerated`),Ni=oe++),(F.relkind==Ln||F.relkind==$t)&&(E.sversion>=11e4&&(_(d,`,
  CASE WHEN a.attnum <= (SELECT i.indnkeyatts FROM pg_catalog.pg_index i WHERE i.indexrelid = '%s') THEN '%s' ELSE '%s' END AS is_key`,p,S("yes"),S("no")),Ts=oe++),N(d,`,
  pg_catalog.pg_get_indexdef(a.attrelid, a.attnum, TRUE) AS indexdef`),Ss=oe++),F.relkind==Kt&&(N(d,`,
  CASE WHEN attfdwoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT pg_catalog.quote_ident(option_name) || ' ' || pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(attfdwoptions)), ', ') || ')' END AS attfdwoptions`),As=oe++),g&&(N(d,`,
  a.attstorage`),Rs=oe++,E.sversion>=14e4&&!E.hide_compression&&(F.relkind==zt||F.relkind==ht||F.relkind==_t)&&(N(d,`,
  a.attcompression AS attcompression`),_s=oe++),(F.relkind==zt||F.relkind==Ln||F.relkind==$t||F.relkind==_t||F.relkind==Kt||F.relkind==ht)&&(N(d,`,
  CASE WHEN a.attstattarget=-1 THEN NULL ELSE a.attstattarget END AS attstattarget`),Os=oe++),(F.relkind==zt||F.relkind==Di||F.relkind==_t||F.relkind==Kt||F.relkind==yo||F.relkind==ht)&&(N(d,`,
  pg_catalog.col_description(a.attrelid, a.attnum)`),Ns=oe++)),N(d,`
FROM pg_catalog.pg_attribute a`),_(d,`
WHERE a.attrelid = '%s' AND a.attnum > 0 AND NOT a.attisdropped`,p),N(d,`
ORDER BY a.attnum;`),C=await b(d.data),!C)return A;switch($r=de(C),F.relkind){case zt:F.relpersistence=="u"?k(H,r('Unlogged table "%s.%s"'),O,R):k(H,r('Table "%s.%s"'),O,R);break;case Di:k(H,r('View "%s.%s"'),O,R);break;case _t:F.relpersistence=="u"?k(H,r('Unlogged materialized view "%s.%s"'),O,R):k(H,r('Materialized view "%s.%s"'),O,R);break;case Ln:F.relpersistence=="u"?k(H,r('Unlogged index "%s.%s"'),O,R):k(H,r('Index "%s.%s"'),O,R);break;case $t:F.relpersistence=="u"?k(H,r('Unlogged partitioned index "%s.%s"'),O,R):k(H,r('Partitioned index "%s.%s"'),O,R);break;case vi:k(H,r('TOAST table "%s.%s"'),O,R);break;case yo:k(H,r('Composite type "%s.%s"'),O,R);break;case Kt:k(H,r('Foreign table "%s.%s"'),O,R);break;case ht:F.relpersistence=="u"?k(H,r('Unlogged partitioned table "%s.%s"'),O,R):k(H,r('Partitioned table "%s.%s"'),O,R);break;default:k(H,'?%c? "%s.%s"',F.relkind,O,R);break}for(oe=0,j[oe++]=S("Column"),j[oe++]=S("Type"),bs&&(j[oe++]=S("Collation"),j[oe++]=S("Nullable"),j[oe++]=S("Default")),Ts>=0&&(j[oe++]=S("Key?")),Ss>=0&&(j[oe++]=S("Definition")),As>=0&&(j[oe++]=S("FDW options")),Rs>=0&&(j[oe++]=S("Storage")),_s>=0&&(j[oe++]=S("Compression")),Os>=0&&(j[oe++]=S("Stats target")),Ns>=0&&(j[oe++]=S("Description")),Xn(oe<=Be(j)),q(P,M,H.data,oe,$r),L=0;L<oe;L++)ie(P,j[L],!0,"l");for(L=0;L<$r;L++){if(z(P,v(C,L,kt),!1),z(P,v(C,L,qe),!1),bs){let x,K,se;z(P,v(C,L,_i),!1),z(P,re(v(C,L,Ri),"t")==0?"not null":"",!1),x=v(C,L,Oi),K=v(C,L,Ni),x[0]==X0?se="generated always as identity":x[0]==z0?se="generated by default as identity":K[0]==K0?se=Io("generated always as (%s) stored",v(C,L,fe)):se=v(C,L,fe),z(P,se,!1)}if(Ts>=0&&z(P,v(C,L,Ts),!0),Ss>=0&&z(P,v(C,L,Ss),!1),As>=0&&z(P,v(C,L,As),!1),Rs>=0){let x=v(C,L,Rs);z(P,x[0]=="p"?"plain":x[0]=="m"?"main":x[0]=="x"?"extended":x[0]=="e"?"external":"???",!1)}if(_s>=0){let x=v(C,L,_s);z(P,x[0]=="p"?"pglz":x[0]=="l"?"lz4":x[0]==null?"":"???",!1)}Os>=0&&z(P,v(C,L,Os),!1),Ns>=0&&z(P,v(C,L,Ns),!1)}if(F.ispartition){let x;if(k(d,`SELECT inhparent::pg_catalog.regclass,
  pg_catalog.pg_get_expr(c.relpartbound, c.oid),
  `),N(d,E.sversion>=14e4?"inhdetachpending":"false as inhdetachpending"),g&&N(d,`,
  pg_catalog.pg_get_partition_constraintdef(c.oid)`),_(d,`
FROM pg_catalog.pg_class c JOIN pg_catalog.pg_inherits i ON c.oid = inhrelid
WHERE c.oid = '%s';`,p),x=await b(d.data),!x)return A;if(de(x)>0){let K=v(x,0,0),se=v(x,0,1),ce=v(x,0,2);if(k(le,r("Partition of: %s %s%s"),K,se,re(ce,"t")==0?" DETACH PENDING":""),G(P,le.data),g){let Se=null;et(x,0,3)||(Se=v(x,0,3)),Se==null||Se[0]==null?k(le,r("No partition constraint")):k(le,r("Partition constraint: %s"),Se),G(P,le.data)}}}if(F.relkind==ht){let x;if(k(d,"SELECT pg_catalog.pg_get_partkeydef('%s'::pg_catalog.oid);",p),x=await b(d.data),!x)return A;if(de(x)==1){let K=v(x,0,0);k(le,r("Partition key: %s"),K),G(P,le.data)}}if(F.relkind==vi){let x;if(k(d,`SELECT n.nspname, c.relname
FROM pg_catalog.pg_class c JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE reltoastrelid = '%s';`,p),x=await b(d.data),!x)return A;if(de(x)==1){let K=v(x,0,0),se=v(x,0,1);k(le,r('Owning table: "%s.%s"'),K,se),G(P,le.data)}}if(F.relkind==Ln||F.relkind==$t){let x;if(k(d,`SELECT i.indisunique, i.indisprimary, i.indisclustered, i.indisvalid,
  (NOT i.indimmediate) AND EXISTS (SELECT 1 FROM pg_catalog.pg_constraint WHERE conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x') AND condeferrable) AS condeferrable,
  (NOT i.indimmediate) AND EXISTS (SELECT 1 FROM pg_catalog.pg_constraint WHERE conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x') AND condeferred) AS condeferred,
`),E.sversion>=90400?N(d,`i.indisreplident,
`):N(d,`false AS indisreplident,
`),E.sversion>=15e4?N(d,`i.indnullsnotdistinct,
`):N(d,`false AS indnullsnotdistinct,
`),_(d,`  a.amname, c2.relname, pg_catalog.pg_get_expr(i.indpred, i.indrelid, true)
FROM pg_catalog.pg_index i, pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_am a
WHERE i.indexrelid = c.oid AND c.oid = '%s' AND c.relam = a.oid
AND i.indrelid = c2.oid;`,p),x=await b(d.data),x){if(de(x)!=1)return A;{let K=v(x,0,0),se=v(x,0,1),ce=v(x,0,2),Se=v(x,0,3),ke=v(x,0,4),rn=v(x,0,5),ct=v(x,0,6),bi=v(x,0,7),kp=v(x,0,8),Pp=v(x,0,9),pl=v(x,0,10);re(se,"t")==0?k(le,r("primary key, ")):re(K,"t")==0?(k(le,r("unique")),re(bi,"t")==0&&N(le,r(" nulls not distinct")),N(le,r(", "))):Lo(le),_(le,"%s, ",kp),_(le,r('for table "%s.%s"'),O,Pp),cn(pl)&&_(le,r(", predicate (%s)"),pl),re(ce,"t")==0&&N(le,r(", clustered")),re(Se,"t")!=0&&N(le,r(", invalid")),re(ke,"t")==0&&N(le,r(", deferrable")),re(rn,"t")==0&&N(le,r(", initially deferred")),re(ct,"t")==0&&N(le,r(", replica identity")),G(P,le.data),F.relkind==Ln&&await Kr(P,F.relkind,F.tablespace,!0)}}else return A}else if(F.relkind==zt||F.relkind==_t||F.relkind==Kt||F.relkind==ht||F.relkind==$t||F.relkind==vi){let x=null,K=0;if(F.hasindex){if(k(d,`SELECT c2.relname, i.indisprimary, i.indisunique, i.indisclustered, i.indisvalid, pg_catalog.pg_get_indexdef(i.indexrelid, 0, true),
  pg_catalog.pg_get_constraintdef(con.oid, true), contype, condeferrable, condeferred`),E.sversion>=90400?N(d,", i.indisreplident"):N(d,", false AS indisreplident"),N(d,", c2.reltablespace"),_(d,`
FROM pg_catalog.pg_class c, pg_catalog.pg_class c2, pg_catalog.pg_index i
  LEFT JOIN pg_catalog.pg_constraint con ON (conrelid = i.indrelid AND conindid = i.indexrelid AND contype IN ('p','u','x'))
WHERE c.oid = '%s' AND c.oid = i.indrelid AND i.indexrelid = c2.oid
ORDER BY i.indisprimary DESC, c2.relname;`,p),x=await b(d.data),x)K=de(x);else return A;if(K>0)for(G(P,r("Indexes:")),L=0;L<K;L++){if(k(d,'    "%s"',v(x,L,0)),re(v(x,L,7),"x")==0)_(d," %s",v(x,L,6));else{let se,ce;re(v(x,L,1),"t")==0?N(d," PRIMARY KEY,"):re(v(x,L,2),"t")==0&&(re(v(x,L,7),"u")==0?N(d," UNIQUE CONSTRAINT,"):N(d," UNIQUE,")),se=v(x,L,5),ce=or(se," USING "),ce!=null&&(se=se.slice(ce+7)),_(d," %s",se),re(v(x,L,8),"t")==0&&N(d," DEFERRABLE"),re(v(x,L,9),"t")==0&&N(d," INITIALLY DEFERRED")}re(v(x,L,3),"t")==0&&N(d," CLUSTER"),re(v(x,L,4),"t")!=0&&N(d," INVALID"),re(v(x,L,10),"t")==0&&N(d," REPLICA IDENTITY"),G(P,d.data),await Kr(P,Ln,Co(v(x,L,11)),!1)}}if(F.checks){if(k(d,`SELECT r.conname, pg_catalog.pg_get_constraintdef(r.oid, true)
FROM pg_catalog.pg_constraint r
WHERE r.conrelid = '%s' AND r.contype = 'c'
ORDER BY 1;`,p),x=await b(d.data),x)K=de(x);else return A;if(K>0)for(G(P,r("Check constraints:")),L=0;L<K;L++)k(d,'    "%s" %s',v(x,L,0),v(x,L,1)),G(P,d.data)}if(F.hastriggers||F.relkind==ht){if(E.sversion>=12e4&&(F.ispartition||F.relkind==ht)?k(d,`SELECT conrelid = '%s'::pg_catalog.regclass AS sametable,
       conname,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef,
       conrelid::pg_catalog.regclass AS ontable
  FROM pg_catalog.pg_constraint,
       pg_catalog.pg_partition_ancestors('%s')
 WHERE conrelid = relid AND contype = 'f' AND conparentid = 0
ORDER BY sametable DESC, conname;`,p,p):(k(d,`SELECT true as sametable, conname,
  pg_catalog.pg_get_constraintdef(r.oid, true) as condef,
  conrelid::pg_catalog.regclass AS ontable
FROM pg_catalog.pg_constraint r
WHERE r.conrelid = '%s' AND r.contype = 'f'
`,p),E.sversion>=12e4&&N(d,`     AND conparentid = 0
`),N(d,"ORDER BY conname")),x=await b(d.data),x)K=de(x);else return A;if(K>0){let se=wn(x,"sametable"),ce=wn(x,"conname"),Se=wn(x,"condef"),ke=wn(x,"ontable");for(G(P,r("Foreign-key constraints:")),L=0;L<K;L++)re(v(x,L,se),"f")==0?k(d,'    TABLE "%s" CONSTRAINT "%s" %s',v(x,L,ke),v(x,L,ce),v(x,L,Se)):k(d,'    "%s" %s',v(x,L,ce),v(x,L,Se)),G(P,d.data)}}if(F.hastriggers||F.relkind==ht){if(E.sversion>=12e4?k(d,`SELECT conname, conrelid::pg_catalog.regclass AS ontable,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef
  FROM pg_catalog.pg_constraint c
 WHERE confrelid IN (SELECT pg_catalog.pg_partition_ancestors('%s')
                     UNION ALL VALUES ('%s'::pg_catalog.regclass))
       AND contype = 'f' AND conparentid = 0
ORDER BY conname;`,p,p):k(d,`SELECT conname, conrelid::pg_catalog.regclass AS ontable,
       pg_catalog.pg_get_constraintdef(oid, true) AS condef
  FROM pg_catalog.pg_constraint
 WHERE confrelid = %s AND contype = 'f'
ORDER BY conname;`,p),x=await b(d.data),x)K=de(x);else return A;if(K>0){let se=wn(x,"conname"),ce=wn(x,"ontable"),Se=wn(x,"condef");for(G(P,r("Referenced by:")),L=0;L<K;L++)k(d,'    TABLE "%s" CONSTRAINT "%s" %s',v(x,L,ce),v(x,L,se),v(x,L,Se)),G(P,d.data)}}if(E.sversion>=90500){if(k(d,"SELECT pol.polname,"),E.sversion>=1e5?N(d,` pol.polpermissive,
`):N(d,` 't' as polpermissive,
`),_(d,`  CASE WHEN pol.polroles = '{0}' THEN NULL ELSE pg_catalog.array_to_string(array(select rolname from pg_catalog.pg_roles where oid = any (pol.polroles) order by 1),',') END,
  pg_catalog.pg_get_expr(pol.polqual, pol.polrelid),
  pg_catalog.pg_get_expr(pol.polwithcheck, pol.polrelid),
  CASE pol.polcmd
    WHEN 'r' THEN 'SELECT'
    WHEN 'a' THEN 'INSERT'
    WHEN 'w' THEN 'UPDATE'
    WHEN 'd' THEN 'DELETE'
    END AS cmd
FROM pg_catalog.pg_policy pol
WHERE pol.polrelid = '%s' ORDER BY 1;`,p),x=await b(d.data),x)K=de(x);else return A;for(F.rowsecurity&&!F.forcerowsecurity&&K>0&&G(P,r("Policies:")),F.rowsecurity&&F.forcerowsecurity&&K>0&&G(P,r("Policies (forced row security enabled):")),F.rowsecurity&&!F.forcerowsecurity&&K==0&&G(P,r("Policies (row security enabled): (none)")),F.rowsecurity&&F.forcerowsecurity&&K==0&&G(P,r("Policies (forced row security enabled): (none)")),!F.rowsecurity&&K>0&&G(P,r("Policies (row security disabled):")),L=0;L<K;L++)k(d,'    POLICY "%s"',v(x,L,0)),v(x,L,1)=="f"&&N(d," AS RESTRICTIVE"),et(x,L,5)||_(d," FOR %s",v(x,L,5)),et(x,L,2)||_(d,`
      TO %s`,v(x,L,2)),et(x,L,3)||_(d,`
      USING (%s)`,v(x,L,3)),et(x,L,4)||_(d,`
      WITH CHECK (%s)`,v(x,L,4)),G(P,d.data)}if(E.sversion>=14e4){if(k(d,`SELECT oid, stxrelid::pg_catalog.regclass, stxnamespace::pg_catalog.regnamespace::pg_catalog.text AS nsp, stxname,
pg_catalog.pg_get_statisticsobjdef_columns(oid) AS columns,
  'd' = any(stxkind) AS ndist_enabled,
  'f' = any(stxkind) AS deps_enabled,
  'm' = any(stxkind) AS mcv_enabled,
stxstattarget
FROM pg_catalog.pg_statistic_ext
WHERE stxrelid = '%s'
ORDER BY nsp, stxname;`,p),x=await b(d.data),x)K=de(x);else return A;if(K>0)for(G(P,r("Statistics objects:")),L=0;L<K;L++){let se=!1,ce,Se,ke,rn,ct;ce=re(v(x,L,5),"t")==0,Se=re(v(x,L,6),"t")==0,ke=re(v(x,L,7),"t")==0,k(d,"    "),_(d,'"%s.%s"',v(x,L,2),v(x,L,3)),rn=ce&&Se&&ke,ct=ce||Se||ke,ct&&!rn&&(N(d," ("),ce&&(N(d,"ndistinct"),se=!0),Se&&(_(d,"%sdependencies",se?", ":""),se=!0),ke&&_(d,"%smcv",se?", ":""),Ie(d,")")),_(d," ON %s FROM %s",v(x,L,4),v(x,L,1)),re(v(x,L,8),"-1")!=0&&_(d,"; STATISTICS %s",v(x,L,8)),G(P,d.data)}}else if(E.sversion>=1e5){if(k(d,`SELECT oid, stxrelid::pg_catalog.regclass, stxnamespace::pg_catalog.regnamespace AS nsp, stxname,
  (SELECT pg_catalog.string_agg(pg_catalog.quote_ident(attname),', ')
   FROM pg_catalog.unnest(stxkeys) s(attnum)
   JOIN pg_catalog.pg_attribute a ON (stxrelid = a.attrelid AND
        a.attnum = s.attnum AND NOT attisdropped)) AS columns,
  'd' = any(stxkind) AS ndist_enabled,
  'f' = any(stxkind) AS deps_enabled,
  'm' = any(stxkind) AS mcv_enabled,
`),E.sversion>=13e4?N(d,`  stxstattarget
`):N(d,`  -1 AS stxstattarget
`),_(d,`FROM pg_catalog.pg_statistic_ext
WHERE stxrelid = '%s'
ORDER BY 1;`,p),x=await b(d.data),x)K=de(x);else return A;if(K>0)for(G(P,r("Statistics objects:")),L=0;L<K;L++){let se=!1;k(d,"    "),_(d,'"%s.%s" (',v(x,L,2),v(x,L,3)),re(v(x,L,5),"t")==0&&(N(d,"ndistinct"),se=!0),re(v(x,L,6),"t")==0&&(_(d,"%sdependencies",se?", ":""),se=!0),re(v(x,L,7),"t")==0&&_(d,"%smcv",se?", ":""),_(d,") ON %s FROM %s",v(x,L,4),v(x,L,1)),re(v(x,L,8),"-1")!=0&&_(d,"; STATISTICS %s",v(x,L,8)),G(P,d.data)}}if(F.hasrules&&F.relkind!=_t){if(k(d,`SELECT r.rulename, trim(trailing ';' from pg_catalog.pg_get_ruledef(r.oid, true)), ev_enabled
FROM pg_catalog.pg_rewrite r
WHERE r.ev_class = '%s' ORDER BY 1;`,p),x=await b(d.data),x)K=de(x);else return A;if(K>0){let se,ce;for(ce=0;ce<4;ce++)for(se=!1,L=0;L<K;L++){let Se,ke=!1;switch(ce){case 0:v(x,L,2)=="O"&&(ke=!0);break;case 1:v(x,L,2)=="D"&&(ke=!0);break;case 2:v(x,L,2)=="A"&&(ke=!0);break;case 3:v(x,L,2)=="R"&&(ke=!0);break}if(ke){if(!se){switch(ce){case 0:k(d,r("Rules:"));break;case 1:k(d,r("Disabled rules:"));break;case 2:k(d,r("Rules firing always:"));break;case 3:k(d,r("Rules firing on replica only:"));break}G(P,d.data),se=!0}Se=v(x,L,1),Se=Se.slice(12),k(d,"    %s",Se),G(P,d.data)}}}}if(E.sversion>=1e5){if(E.sversion>=15e4?k(d,`SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_namespace pn ON p.oid = pn.pnpubid
     JOIN pg_catalog.pg_class pc ON pc.relnamespace = pn.pnnspid
WHERE pc.oid ='%s' and pg_catalog.pg_relation_is_publishable('%s')
UNION
SELECT pubname
     , pg_get_expr(pr.prqual, c.oid)
     , (CASE WHEN pr.prattrs IS NOT NULL THEN
         (SELECT string_agg(attname, ', ')
           FROM pg_catalog.generate_series(0, pg_catalog.array_upper(pr.prattrs::pg_catalog.int2[], 1)) s,
                pg_catalog.pg_attribute
          WHERE attrelid = pr.prrelid AND attnum = prattrs[s])
        ELSE NULL END) FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_rel pr ON p.oid = pr.prpubid
     JOIN pg_catalog.pg_class c ON c.oid = pr.prrelid
WHERE pr.prrelid = '%s'
UNION
SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
WHERE p.puballtables AND pg_catalog.pg_relation_is_publishable('%s')
ORDER BY 1;`,p,p,p,p):k(d,`SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
JOIN pg_catalog.pg_publication_rel pr ON p.oid = pr.prpubid
WHERE pr.prrelid = '%s'
UNION ALL
SELECT pubname
     , NULL
     , NULL
FROM pg_catalog.pg_publication p
WHERE p.puballtables AND pg_catalog.pg_relation_is_publishable('%s')
ORDER BY 1;`,p,p),x=await b(d.data),x)K=de(x);else return A;for(K>0&&G(P,r("Publications:")),L=0;L<K;L++)k(d,'    "%s"',v(x,L,0)),et(x,L,2)||_(d," (%s)",v(x,L,2)),et(x,L,1)||_(d," WHERE %s",v(x,L,1)),G(P,d.data)}if(g){if(k(d,`SELECT co.conname, at.attname, co.connoinherit, co.conislocal,
co.coninhcount <> 0
FROM pg_catalog.pg_constraint co JOIN
pg_catalog.pg_attribute at ON
(at.attnum = co.conkey[1])
WHERE co.contype = 'n' AND
co.conrelid = '%s'::pg_catalog.regclass AND
at.attrelid = '%s'::pg_catalog.regclass
ORDER BY at.attnum`,p,p),x=await b(d.data),x)K=de(x);else return A;for(K>0&&G(P,r("Not-null constraints:")),L=0;L<K;L++){let se=v(x,L,3)[0]=="t",ce=v(x,L,4)[0]=="t";k(d,'    "%s" NOT NULL "%s"%s',v(x,L,0),v(x,L,1),v(x,L,2)[0]=="t"?" NO INHERIT":se&&ce?r(" (local, inherited)"):ce?r(" (inherited)"):""),G(P,d.data)}}}if((F.relkind==Di||F.relkind==_t)&&g){let x;if(k(d,"SELECT pg_catalog.pg_get_viewdef('%s'::pg_catalog.oid, true);",p),x=await b(d.data),!x)return A;de(x)>0&&(X=In(v(x,0,0)))}if(X){let x=null;if(G(P,r("View definition:")),G(P,X),F.hasrules){if(k(d,`SELECT r.rulename, trim(trailing ';' from pg_catalog.pg_get_ruledef(r.oid, true))
FROM pg_catalog.pg_rewrite r
WHERE r.ev_class = '%s' AND r.rulename != '_RETURN' ORDER BY 1;`,p),x=await b(d.data),!x)return A;if(de(x)>0)for(G(P,r("Rules:")),L=0;L<de(x);L++){let K;K=v(x,L,1),K=K.slice(12),k(d," %s",K),G(P,d.data)}}}if(F.hastriggers){let x,K;if(k(d,`SELECT t.tgname, pg_catalog.pg_get_triggerdef(t.oid, true), t.tgenabled, t.tgisinternal,
`),E.sversion>=13e4?N(d,`  CASE WHEN t.tgparentid != 0 THEN
    (SELECT u.tgrelid::pg_catalog.regclass
     FROM pg_catalog.pg_trigger AS u,
          pg_catalog.pg_partition_ancestors(t.tgrelid) WITH ORDINALITY AS a(relid, depth)
     WHERE u.tgname = t.tgname AND u.tgrelid = a.relid
           AND u.tgparentid = 0
     ORDER BY a.depth LIMIT 1)
  END AS parent
`):N(d,`  NULL AS parent
`),_(d,`FROM pg_catalog.pg_trigger t
WHERE t.tgrelid = '%s' AND `,p),E.sversion>=11e4&&E.sversion<15e4?N(d,`(NOT t.tgisinternal OR (t.tgisinternal AND t.tgenabled = 'D') 
    OR EXISTS (SELECT 1 FROM pg_catalog.pg_depend WHERE objid = t.oid 
        AND refclassid = 'pg_catalog.pg_trigger'::pg_catalog.regclass))`):N(d,"(NOT t.tgisinternal OR (t.tgisinternal AND t.tgenabled = 'D'))"),N(d,`
ORDER BY 1;`),x=await b(d.data),x)K=de(x);else return A;if(K>0){let se,ce;for(ce=0;ce<=4;ce++)for(se=!1,L=0;L<K;L++){let Se,ke,rn,ct,bi;switch(ct=v(x,L,2),bi=v(x,L,3),Se=!1,ce){case 0:(ct=="O"||ct=="t")&&(Se=!0);break;case 1:(ct=="D"||ct=="f")&&bi=="f"&&(Se=!0);break;case 2:(ct=="D"||ct=="f")&&bi=="t"&&(Se=!0);break;case 3:ct=="A"&&(Se=!0);break;case 4:ct=="R"&&(Se=!0);break}if(Se!=!1){if(se==!1){switch(ce){case 0:k(d,r("Triggers:"));break;case 1:k(d,r("Disabled user triggers:"));break;case 2:k(d,r("Disabled internal triggers:"));break;case 3:k(d,r("Triggers firing always:"));break;case 4:k(d,r("Triggers firing on replica only:"));break}G(P,d.data),se=!0}ke=v(x,L,1),rn=or(ke," TRIGGER "),rn!=null&&(ke=ke.slice(rn+9)),k(d,"    %s",ke),et(x,L,4)||_(d,", ON TABLE %s",v(x,L,4)),G(P,d.data)}}}}if(F.relkind==zt||F.relkind==_t||F.relkind==Kt||F.relkind==ht||F.relkind==$t||F.relkind==vi){let x,K,se;if(x=F.relkind==ht||F.relkind==$t,F.relkind==Kt){let ce;if(k(d,`SELECT s.srvname,
  pg_catalog.array_to_string(ARRAY(
    SELECT pg_catalog.quote_ident(option_name) || ' ' || pg_catalog.quote_literal(option_value)
    FROM pg_catalog.pg_options_to_table(ftoptions)),  ', ')
FROM pg_catalog.pg_foreign_table f,
     pg_catalog.pg_foreign_server s
WHERE f.ftrelid = '%s' AND s.oid = f.ftserver;`,p),K=await b(d.data),K){if(de(K)!=1)return A}else return A;k(d,r("Server: %s"),v(K,0,0)),G(P,d.data),ce=v(K,0,1),ce&&ce[0]!=null&&(k(d,r("FDW options: (%s)"),ce),G(P,d.data))}if(k(d,`SELECT c.oid::pg_catalog.regclass
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhparent AND i.inhrelid = '%s'
  AND c.relkind != 'p' AND c.relkind != 'I'
ORDER BY inhseqno;`,p),K=await b(d.data),K){let ce=r("Inherits"),Se=Rh(ce,cn(ce),E.encoding);for(se=de(K),L=0;L<se;L++)L==0?k(d,"%s: %s",ce,v(K,L,0)):k(d,"%*s  %s",Se,"",v(K,L,0)),L<se-1&&Ie(d,","),G(P,d.data)}else return A;if(E.sversion>=14e4?k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, inhdetachpending, pg_catalog.pg_get_expr(c.relpartbound, c.oid)
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY pg_catalog.pg_get_expr(c.relpartbound, c.oid) = 'DEFAULT', c.oid::pg_catalog.regclass::pg_catalog.text;`,p):E.sversion>=1e5?k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, false AS inhdetachpending, pg_catalog.pg_get_expr(c.relpartbound, c.oid)
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY pg_catalog.pg_get_expr(c.relpartbound, c.oid) = 'DEFAULT', c.oid::pg_catalog.regclass::pg_catalog.text;`,p):k(d,`SELECT c.oid::pg_catalog.regclass, c.relkind, false AS inhdetachpending, NULL
FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
WHERE c.oid = i.inhrelid AND i.inhparent = '%s'
ORDER BY c.oid::pg_catalog.regclass::pg_catalog.text;`,p),K=await b(d.data),!K)return A;if(se=de(K),x&&se==0)k(d,r("Number of partitions: %d"),se),G(P,d.data);else if(!g)se>0&&(x?k(d,r("Number of partitions: %d (Use \\d+ to list them.)"),se):k(d,r("Number of child tables: %d (Use \\d+ to list them.)"),se),G(P,d.data));else{let ce=r(x?"Partitions":"Child tables"),Se=Rh(ce,cn(ce),E.encoding);for(L=0;L<se;L++){let ke=v(K,L,1);L==0?k(d,"%s: %s",ce,v(K,L,0)):k(d,"%*s  %s",Se,"",v(K,L,0)),et(K,L,3)||_(d," %s",v(K,L,3)),ke==ht||ke==$t?N(d,", PARTITIONED"):ke==Kt&&N(d,", FOREIGN"),re(v(K,L,2),"t")==0&&N(d," (DETACH PENDING)"),L<se-1&&Ie(d,","),G(P,d.data)}}if(F.reloftype&&(k(d,r("Typed table of type: %s"),F.reloftype),G(P,d.data)),g&&(F.relkind==zt||F.relkind==_t)&&F.relreplident!="i"&&(re(O,"pg_catalog")!=0&&F.relreplident!="d"||re(O,"pg_catalog")==0&&F.relreplident!="n")){let ce=r("Replica Identity");k(d,"%s: %s",ce,F.relreplident=="f"?"FULL":F.relreplident=="n"?"NOTHING":"???"),G(P,d.data)}g&&F.relkind!=_t&&F.hasoids&&G(P,r("Has OIDs: yes")),await Kr(P,F.relkind,F.tablespace,!0),g&&F.relam!=null&&!E.hide_tableam&&(k(d,r("Access method: %s"),F.relam),G(P,d.data))}if(g&&F.reloptions&&F.reloptions[0]!=null){let x=r("Options");k(d,"%s: %s",x,F.reloptions),G(P,d.data)}return ee(P,E.queryFout,!1,E.logfile),A=!0,A}async function Kr(O,R,p,g){if((R==zt||R==_t||R==Ln||R==ht||R==$t||R==vi)&&p!=0){let A=null,d={};if(Q(d),k(d,`SELECT spcname FROM pg_catalog.pg_tablespace
WHERE oid = '%u';`,p),A=await b(d.data),!A)return;de(A)>0&&(g?(k(d,r('Tablespace: "%s"'),v(A,0,0)),G(O,d.data)):(k(d,"%s",O.footer),_(d,r(', tablespace "%s"'),v(A,0,0)),Z(O,d.data)))}}async function fl(O,R,p){let g={},A,d={},C=E.popt.topt,M=2,P=0,L,X,j="l",H;if(C.default_footer=!1,Q(g),k(g,`SELECT r.rolname, r.rolsuper, r.rolinherit,
  r.rolcreaterole, r.rolcreatedb, r.rolcanlogin,
  r.rolconnlimit, r.rolvaliduntil`),R&&(N(g,`
, pg_catalog.shobj_description(r.oid, 'pg_authid') AS description`),M++),N(g,`
, r.rolreplication`),E.sversion>=90500&&N(g,`
, r.rolbypassrls`),N(g,`
FROM pg_catalog.pg_roles r
`),!p&&!O&&N(g,`WHERE r.rolname !~ '^pg_'
`),!D(g,O,!1,!1,null,"r.rolname",null,null,null,1)||(N(g,"ORDER BY 1;"),A=await b(g.data),!A))return!1;for(P=de(A),H=[],q(d,C,r("List of roles"),M,P),ie(d,S("Role name"),!0,j),ie(d,S("Attributes"),!0,j),R&&ie(d,S("Description"),!0,j),L=0;L<P;L++)z(d,v(A,L,0),!1),Lo(g),re(v(A,L,1),"t")==0&&bn(g,r("Superuser")),re(v(A,L,2),"t")!=0&&bn(g,r("No inheritance")),re(v(A,L,3),"t")==0&&bn(g,r("Create role")),re(v(A,L,4),"t")==0&&bn(g,r("Create DB")),re(v(A,L,5),"t")!=0&&bn(g,r("Cannot login")),re(v(A,L,R?9:8),"t")==0&&bn(g,r("Replication")),E.sversion>=90500&&re(v(A,L,R?10:9),"t")==0&&bn(g,r("Bypass RLS")),X=Sh(v(A,L,6)),X>=0&&(g.len>0&&Ie(g,`
`),X==0?N(g,r("No connections")):_(g,ngettext("%d connection","%d connections",X),X)),re(v(A,L,7),"")!=0&&(g.len>0&&Ie(g,`
`),N(g,r("Password valid until ")),N(g,v(A,L,7))),H[L]=In(g.data),z(d,H[L],!1),R&&z(d,v(A,L,8),!1);return ee(d,E.queryFout,!1,E.logfile),!0}function bn(O,R){O.len>0&&N(O,", "),N(O,R)}async function Zd(O,R){let p={},g,A=E.popt,d={};return Q(p),k(p,`SELECT rolname AS "%s", datname AS "%s",
pg_catalog.array_to_string(setconfig, E'\\n') AS "%s"
FROM pg_catalog.pg_db_role_setting s
LEFT JOIN pg_catalog.pg_database d ON d.oid = setdatabase
LEFT JOIN pg_catalog.pg_roles r ON r.oid = setrole
`,S("Role"),S("Database"),S("Settings")),!D(p,O,!1,!1,null,"r.rolname",null,null,d,1)||!D(p,R,d.value,!1,null,"d.datname",null,null,null,1)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(de(g)==0&&!E.quiet?O&&R?I('Did not find any settings for role "%s" and database "%s".',O,R):O?I('Did not find any settings for role "%s".',O):I("Did not find any settings."):(A.nullPrint=null,A.title=r("List of settings"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile)),!0)}async function ep(O,R){let p={},g,A=E.popt;return Q(p),k(p,`SELECT m.rolname AS "%s", r.rolname AS "%s",
  pg_catalog.concat_ws(', ',
`,S("Role name"),S("Member of")),E.sversion>=16e4?N(p,`    CASE WHEN pam.admin_option THEN 'ADMIN' END,
    CASE WHEN pam.inherit_option THEN 'INHERIT' END,
    CASE WHEN pam.set_option THEN 'SET' END
`):N(p,`    CASE WHEN pam.admin_option THEN 'ADMIN' END,
    CASE WHEN m.rolinherit THEN 'INHERIT' END,
    'SET'
`),_(p,`  ) AS "%s",
  g.rolname AS "%s"
`,S("Options"),S("Grantor")),N(p,`FROM pg_catalog.pg_roles m
     JOIN pg_catalog.pg_auth_members pam ON (pam.member = m.oid)
     LEFT JOIN pg_catalog.pg_roles r ON (pam.roleid = r.oid)
     LEFT JOIN pg_catalog.pg_roles g ON (pam.grantor = g.oid)
`),!R&&!O&&N(p,`WHERE m.rolname !~ '^pg_'
`),!D(p,O,!1,!1,null,"m.rolname",null,null,null,1)||(N(p,`ORDER BY 1, 2, 4;
`),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of role grants"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function ul(O,R,p,g){let A=Me(O,"t")!=null,d=Me(O,"i")!=null,C=Me(O,"v")!=null,M=Me(O,"m")!=null,P=Me(O,"s")!=null,L=Me(O,"E")!=null,X={},j,H=E.popt,le,oe=[!1,!1,!0,!1,!1,!1,!1,!1,!1];return A||d||C||M||P||L||(A=C=M=P=L=!0),Q(X),k(X,`SELECT n.nspname as "%s",
  c.relname as "%s",
  CASE c.relkind WHEN 'r' THEN '%s' WHEN 'v' THEN '%s' WHEN 'm' THEN '%s' WHEN 'i' THEN '%s' WHEN 'S' THEN '%s' WHEN 't' THEN '%s' WHEN 'f' THEN '%s' WHEN 'p' THEN '%s' WHEN 'I' THEN '%s' END as "%s",
  pg_catalog.pg_get_userbyid(c.relowner) as "%s"`,S("Schema"),S("Name"),S("table"),S("view"),S("materialized view"),S("index"),S("sequence"),S("TOAST table"),S("foreign table"),S("partitioned table"),S("partitioned index"),S("Type"),S("Owner")),le=4,d&&(_(X,`,
  c2.relname as "%s"`,S("Table")),le++),p&&(_(X,`,
  CASE c.relpersistence WHEN 'p' THEN '%s' WHEN 't' THEN '%s' WHEN 'u' THEN '%s' END as "%s"`,S("permanent"),S("temporary"),S("unlogged"),S("Persistence")),oe[le]=!0,E.sversion>=12e4&&!E.hide_tableam&&(A||M||d)&&_(X,`,
  am.amname as "%s"`,S("Access method")),_(X,`,
  pg_catalog.pg_size_pretty(pg_catalog.pg_table_size(c.oid)) as "%s",
  pg_catalog.obj_description(c.oid, 'pg_class') as "%s"`,S("Size"),S("Description"))),N(X,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace`),E.sversion>=12e4&&!E.hide_tableam&&(A||M||d)&&N(X,`
     LEFT JOIN pg_catalog.pg_am am ON am.oid = c.relam`),d&&N(X,`
     LEFT JOIN pg_catalog.pg_index i ON i.indexrelid = c.oid
     LEFT JOIN pg_catalog.pg_class c2 ON i.indrelid = c2.oid`),N(X,`
WHERE c.relkind IN (`),A&&(N(X,"'r','p',"),(g||R)&&N(X,"'t',")),C&&N(X,"'v',"),M&&N(X,"'m',"),d&&N(X,"'i','I',"),P&&N(X,"'S',"),(g||R)&&N(X,"'s',"),L&&N(X,"'f',"),N(X,"''"),N(X,`)
`),!g&&!R&&N(X,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname !~ '^pg_toast'
      AND n.nspname <> 'information_schema'
`),!D(X,R,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(N(X,"ORDER BY 1,2;"),j=await b(X.data),!j)?!1:(de(j)==0&&!E.quiet?R?I('Did not find any relation named "%s".',R):I("Did not find any relations."):(H.nullPrint=null,H.title=r("List of relations"),H.translate_header=!0,H.translate_columns=oe,H.n_translate_columns=Be(oe),U(j,H,E.queryFout,!1,E.logfile)),!0)}async function tp(O,R,p){let g=Me(O,"t")!=null,A=Me(O,"i")!=null,d=Me(O,"n")!=null,C={},M={},P,L=E.popt,X=[!1,!1,!1,!1,!1,!1,!1,!1,!1],j,H=!1;return E.sversion<1e5?(I("The server (version %s) does not support declarative table partitioning.",on(E.sversion,!1,void 0)),!0):(!g&&!A&&(g=A=!0),A&&!g?j=r("List of partitioned indexes"):g&&!A?j=r("List of partitioned tables"):(j=r("List of partitioned relations"),H=!0),Q(C),k(C,`SELECT n.nspname as "%s",
  c.relname as "%s",
  pg_catalog.pg_get_userbyid(c.relowner) as "%s"`,S("Schema"),S("Name"),S("Owner")),H&&(_(C,`,
  CASE c.relkind WHEN 'p' THEN '%s' WHEN 'I' THEN '%s' END as "%s"`,S("partitioned table"),S("partitioned index"),S("Type")),X[3]=!0),(d||R)&&_(C,`,
  inh.inhparent::pg_catalog.regclass as "%s"`,S("Parent name")),A&&_(C,`,
 c2.oid::pg_catalog.regclass as "%s"`,S("Table")),p&&(d&&_(C,`,
  s.dps as "%s"`,S("Leaf partition size")),_(C,`,
  s.tps as "%s"`,S("Total size")),_(C,`,
  pg_catalog.obj_description(c.oid, 'pg_class') as "%s"`,S("Description"))),N(C,`
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace`),A&&N(C,`
     LEFT JOIN pg_catalog.pg_index i ON i.indexrelid = c.oid
     LEFT JOIN pg_catalog.pg_class c2 ON i.indrelid = c2.oid`),(d||R)&&N(C,`
     LEFT JOIN pg_catalog.pg_inherits inh ON c.oid = inh.inhrelid`),p&&(E.sversion<12e4?N(C,`,
     LATERAL (WITH RECURSIVE d
                AS (SELECT inhrelid AS oid, 1 AS level
                      FROM pg_catalog.pg_inherits
                     WHERE inhparent = c.oid
                    UNION ALL
                    SELECT inhrelid, level + 1
                      FROM pg_catalog.pg_inherits i
                           JOIN d ON i.inhparent = d.oid)
                SELECT pg_catalog.pg_size_pretty(sum(pg_catalog.pg_table_size(d.oid))) AS tps,
                       pg_catalog.pg_size_pretty(sum(
             CASE WHEN d.level = 1 THEN pg_catalog.pg_table_size(d.oid) ELSE 0 END)) AS dps
               FROM d) s`):N(C,`,
     LATERAL (SELECT pg_catalog.pg_size_pretty(sum(
                 CASE WHEN ppt.isleaf AND ppt.level = 1
                      THEN pg_catalog.pg_table_size(ppt.relid) ELSE 0 END)) AS dps,
                     pg_catalog.pg_size_pretty(sum(pg_catalog.pg_table_size(ppt.relid))) AS tps
              FROM pg_catalog.pg_partition_tree(c.oid) ppt) s`)),N(C,`
WHERE c.relkind IN (`),g&&N(C,"'p',"),A&&N(C,"'I',"),N(C,"''"),N(C,`)
`),N(C,!d&&!R?` AND NOT c.relispartition
`:""),R||N(C,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname !~ '^pg_toast'
      AND n.nspname <> 'information_schema'
`),!D(C,R,!0,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(_(C,'ORDER BY "Schema", %s%s"Name";',H?'"Type" DESC, ':"",d||R?'"Parent name" NULLS FIRST, ':""),P=await b(C.data),!P)?!1:(Q(M),N(M,j),L.nullPrint=null,L.title=M.data,L.translate_header=!0,L.translate_columns=X,L.n_translate_columns=Be(X),U(P,L,E.queryFout,!1,E.logfile),!0))}async function np(O,R,p){let g={},A,d=E.popt;return Q(g),k(g,`SELECT l.lanname AS "%s",
       pg_catalog.pg_get_userbyid(l.lanowner) as "%s",
       l.lanpltrusted AS "%s"`,S("Name"),S("Owner"),S("Trusted")),R&&(_(g,`,
       NOT l.lanispl AS "%s",
       l.lanplcallfoid::pg_catalog.regprocedure AS "%s",
       l.lanvalidator::pg_catalog.regprocedure AS "%s",
       l.laninline::pg_catalog.regprocedure AS "%s",
       `,S("Internal language"),S("Call handler"),S("Validator"),S("Inline handler")),mt(g,"l.lanacl")),_(g,`,
       d.description AS "%s"
FROM pg_catalog.pg_language l
LEFT JOIN pg_catalog.pg_description d
  ON d.classoid = l.tableoid AND d.objoid = l.oid
  AND d.objsubid = 0
`,S("Description")),O&&!D(g,O,!1,!1,null,"l.lanname",null,null,null,2)||(!p&&!O&&N(g,`WHERE l.lanplcallfoid != 0
`),N(g,"ORDER BY 1;"),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of languages"),d.translate_header=!0,U(A,d,E.queryFout,!1,E.logfile),!0)}async function ip(O,R,p){let g={},A,d=E.popt;return Q(g),k(g,`SELECT n.nspname as "%s",
       t.typname as "%s",
       pg_catalog.format_type(t.typbasetype, t.typtypmod) as "%s",
       (SELECT c.collname FROM pg_catalog.pg_collation c, pg_catalog.pg_type bt
        WHERE c.oid = t.typcollation AND bt.oid = t.typbasetype AND t.typcollation <> bt.typcollation) as "%s",
       CASE WHEN t.typnotnull THEN 'not null' END as "%s",
       t.typdefault as "%s",
       pg_catalog.array_to_string(ARRAY(
         SELECT pg_catalog.pg_get_constraintdef(r.oid, true) FROM pg_catalog.pg_constraint r WHERE t.oid = r.contypid
       ), ' ') as "%s"`,S("Schema"),S("Name"),S("Type"),S("Collation"),S("Nullable"),S("Default"),S("Check")),R&&(N(g,`,
  `),mt(g,"t.typacl"),_(g,`,
       d.description as "%s"`,S("Description"))),N(g,`
FROM pg_catalog.pg_type t
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace
`),R&&N(g,`     LEFT JOIN pg_catalog.pg_description d ON d.classoid = t.tableoid AND d.objoid = t.oid AND d.objsubid = 0
`),N(g,`WHERE t.typtype = 'd'
`),!p&&!O&&N(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),!D(g,O,!0,!1,"n.nspname","t.typname",null,"pg_catalog.pg_type_is_visible(t.oid)",null,3)||(N(g,"ORDER BY 1, 2;"),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of domains"),d.translate_header=!0,U(A,d,E.queryFout,!1,E.logfile),!0)}async function sp(O,R,p){let g={},A,d=E.popt,C=[!1,!1,!1,!1,!0,!1];return Q(g),k(g,`SELECT n.nspname AS "%s",
       c.conname AS "%s",
       pg_catalog.pg_encoding_to_char(c.conforencoding) AS "%s",
       pg_catalog.pg_encoding_to_char(c.contoencoding) AS "%s",
       CASE WHEN c.condefault THEN '%s'
       ELSE '%s' END AS "%s"`,S("Schema"),S("Name"),S("Source"),S("Destination"),S("yes"),S("no"),S("Default?")),R&&_(g,`,
       d.description AS "%s"`,S("Description")),N(g,`
FROM pg_catalog.pg_conversion c
     JOIN pg_catalog.pg_namespace n ON n.oid = c.connamespace
`),R&&N(g,`LEFT JOIN pg_catalog.pg_description d ON d.classoid = c.tableoid
          AND d.objoid = c.oid AND d.objsubid = 0
`),N(g,`WHERE true
`),!p&&!O&&N(g,`  AND n.nspname <> 'pg_catalog'
  AND n.nspname <> 'information_schema'
`),!D(g,O,!0,!1,"n.nspname","c.conname",null,"pg_catalog.pg_conversion_is_visible(c.oid)",null,3)||(N(g,"ORDER BY 1, 2;"),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of conversions"),d.translate_header=!0,d.translate_columns=C,d.n_translate_columns=Be(C),U(A,d,E.queryFout,!1,E.logfile),!0)}async function rp(O,R,p){let g={},A,d=E.popt;return Q(g),k(g,'SELECT s.name AS "%s", pg_catalog.current_setting(s.name) AS "%s"',S("Parameter"),S("Value")),R&&(_(g,', s.vartype AS "%s", s.context AS "%s", ',S("Type"),S("Context")),E.sversion>=15e4?mt(g,"p.paracl"):_(g,'NULL AS "%s"',S("Access privileges"))),N(g,`
FROM pg_catalog.pg_settings s
`),R&&E.sversion>=15e4&&N(g,`  LEFT JOIN pg_catalog.pg_parameter_acl p
  ON pg_catalog.lower(s.name) = p.parname
`),O?Y(E.db,g,O,!1,!1,null,"pg_catalog.lower(s.name)",null,null,null,null):N(g,`WHERE s.source <> 'default' AND
      s.setting IS DISTINCT FROM s.boot_val
`),N(g,"ORDER BY 1;"),A=await b(g.data),A?(d.nullPrint=null,O?d.title=r("List of configuration parameters"):d.title=r("List of non-default configuration parameters"),d.translate_header=!0,U(A,d,E.queryFout,!1,E.logfile),!0):!1}async function op(O,R){let p={},g,A=E.popt,d=[!1,!1,!1,!0,!1,!1,!1];return E.sversion<90300?(I("The server (version %s) does not support event triggers.",on(E.sversion,!1,void 0)),!0):(Q(p),k(p,`SELECT evtname as "%s", evtevent as "%s", pg_catalog.pg_get_userbyid(e.evtowner) as "%s",
 case evtenabled when 'O' then '%s'  when 'R' then '%s'  when 'A' then '%s'  when 'D' then '%s' end as "%s",
 e.evtfoid::pg_catalog.regproc as "%s", pg_catalog.array_to_string(array(select x from pg_catalog.unnest(evttags) as t(x)), ', ') as "%s"`,S("Name"),S("Event"),S("Owner"),S("enabled"),S("replica"),S("always"),S("disabled"),S("Enabled"),S("Function"),S("Tags")),R&&_(p,`,
pg_catalog.obj_description(e.oid, 'pg_event_trigger') as "%s"`,S("Description")),N(p,`
FROM pg_catalog.pg_event_trigger e `),!D(p,O,!1,!1,null,"evtname",null,null,null,1)||(N(p,"ORDER BY 1"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of event triggers"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Be(d),U(g,A,E.queryFout,!1,E.logfile),!0))}async function ap(O){let R={},p,g=E.popt;return E.sversion<1e5?(I("The server (version %s) does not support extended statistics.",on(E.sversion,!1,void 0)),!0):(Q(R),k(R,`SELECT 
es.stxnamespace::pg_catalog.regnamespace::pg_catalog.text AS "%s", 
es.stxname AS "%s", 
`,S("Schema"),S("Name")),E.sversion>=14e4?_(R,`pg_catalog.format('%%s FROM %%s', 
  pg_catalog.pg_get_statisticsobjdef_columns(es.oid), 
  es.stxrelid::pg_catalog.regclass) AS "%s"`,S("Definition")):_(R,`pg_catalog.format('%%s FROM %%s', 
  (SELECT pg_catalog.string_agg(pg_catalog.quote_ident(a.attname),', ') 
   FROM pg_catalog.unnest(es.stxkeys) s(attnum) 
   JOIN pg_catalog.pg_attribute a 
   ON (es.stxrelid = a.attrelid 
   AND a.attnum = s.attnum 
   AND NOT a.attisdropped)), 
es.stxrelid::pg_catalog.regclass) AS "%s"`,S("Definition")),_(R,`,
CASE WHEN 'd' = any(es.stxkind) THEN 'defined' 
END AS "%s", 
CASE WHEN 'f' = any(es.stxkind) THEN 'defined' 
END AS "%s"`,S("Ndistinct"),S("Dependencies")),E.sversion>=12e4&&_(R,`,
CASE WHEN 'm' = any(es.stxkind) THEN 'defined' 
END AS "%s" `,S("MCV")),N(R,` 
FROM pg_catalog.pg_statistic_ext es 
`),!D(R,O,!1,!1,"es.stxnamespace::pg_catalog.regnamespace::pg_catalog.text","es.stxname",null,"pg_catalog.pg_statistics_obj_is_visible(es.oid)",null,3)||(N(R,"ORDER BY 1, 2;"),p=await b(R.data),!p)?!1:(g.nullPrint=null,g.title=r("List of extended statistics"),g.translate_header=!0,U(p,g,E.queryFout,!1,E.logfile),!0))}async function lp(O,R){let p={},g,A=E.popt,d=[!1,!1,!1,!0,!1];return Q(p),k(p,`SELECT pg_catalog.format_type(castsource, NULL) AS "%s",
       pg_catalog.format_type(casttarget, NULL) AS "%s",
`,S("Source type"),S("Target type")),_(p,`       CASE WHEN c.castmethod = '%c' THEN '(binary coercible)'
            WHEN c.castmethod = '%c' THEN '(with inout)'
            ELSE p.proname
       END AS "%s",
`,F0,B0,S("Function")),_(p,`       CASE WHEN c.castcontext = '%c' THEN '%s'
            WHEN c.castcontext = '%c' THEN '%s'
            ELSE '%s'
       END AS "%s"`,W0,S("no"),H0,S("in assignment"),S("yes"),S("Implicit?")),R&&_(p,`,
       d.description AS "%s"`,S("Description")),N(p,`
FROM pg_catalog.pg_cast c LEFT JOIN pg_catalog.pg_proc p
     ON c.castfunc = p.oid
     LEFT JOIN pg_catalog.pg_type ts
     ON c.castsource = ts.oid
     LEFT JOIN pg_catalog.pg_namespace ns
     ON ns.oid = ts.typnamespace
     LEFT JOIN pg_catalog.pg_type tt
     ON c.casttarget = tt.oid
     LEFT JOIN pg_catalog.pg_namespace nt
     ON nt.oid = tt.typnamespace
`),R&&N(p,`     LEFT JOIN pg_catalog.pg_description d
     ON d.classoid = c.tableoid AND d.objoid = c.oid AND d.objsubid = 0
`),N(p,"WHERE ( (true"),!D(p,O,!0,!1,"ns.nspname","ts.typname","pg_catalog.format_type(ts.oid, NULL)","pg_catalog.pg_type_is_visible(ts.oid)",null,3)||(N(p,") OR (true"),!D(p,O,!0,!1,"nt.nspname","tt.typname","pg_catalog.format_type(tt.oid, NULL)","pg_catalog.pg_type_is_visible(tt.oid)",null,3))||(N(p,`) )
ORDER BY 1, 2;`),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of casts"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Be(d),U(g,A,E.queryFout,!1,E.logfile),!0)}async function cp(O,R,p){let g={},A,d=E.popt,C=[!1,!1,!1,!1,!1,!1,!1,!0,!1];return Q(g),k(g,`SELECT
  n.nspname AS "%s",
  c.collname AS "%s",
`,S("Schema"),S("Name")),E.sversion>=1e5?_(g,`  CASE c.collprovider WHEN 'd' THEN 'default' WHEN 'c' THEN 'libc' WHEN 'i' THEN 'icu' END AS "%s",
`,S("Provider")):_(g,`  'libc' AS "%s",
`,S("Provider")),_(g,`  c.collcollate AS "%s",
  c.collctype AS "%s",
`,S("Collate"),S("Ctype")),E.sversion>=15e4?_(g,`  c.colliculocale AS "%s",
`,S("ICU Locale")):_(g,`  c.collcollate AS "%s",
`,S("ICU Locale")),E.sversion>=16e4?_(g,`  c.collicurules AS "%s",
`,S("ICU Rules")):_(g,`  NULL AS "%s",
`,S("ICU Rules")),E.sversion>=12e4?_(g,`  CASE WHEN c.collisdeterministic THEN '%s' ELSE '%s' END AS "%s"`,S("yes"),S("no"),S("Deterministic?")):_(g,`  '%s' AS "%s"`,S("yes"),S("Deterministic?")),R&&_(g,`,
  pg_catalog.obj_description(c.oid, 'pg_collation') AS "%s"`,S("Description")),N(g,`
FROM pg_catalog.pg_collation c, pg_catalog.pg_namespace n
WHERE n.oid = c.collnamespace
`),!p&&!O&&N(g,`      AND n.nspname <> 'pg_catalog'
      AND n.nspname <> 'information_schema'
`),N(g,`      AND c.collencoding IN (-1, pg_catalog.pg_char_to_encoding(pg_catalog.getdatabaseencoding()))
`),!D(g,O,!0,!1,"n.nspname","c.collname",null,"pg_catalog.pg_collation_is_visible(c.oid)",null,3)||(N(g,"ORDER BY 1, 2;"),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of collations"),d.translate_header=!0,d.translate_columns=C,d.n_translate_columns=Be(C),U(A,d,E.queryFout,!1,E.logfile),!0)}async function hp(O,R,p){let g={},A,d=E.popt,C=0,M=null;if(Q(g),k(g,`SELECT n.nspname AS "%s",
  pg_catalog.pg_get_userbyid(n.nspowner) AS "%s"`,S("Name"),S("Owner")),R&&(N(g,`,
  `),mt(g,"n.nspacl"),_(g,`,
  pg_catalog.obj_description(n.oid, 'pg_namespace') AS "%s"`,S("Description"))),N(g,`
FROM pg_catalog.pg_namespace n
`),!p&&!O&&N(g,`WHERE n.nspname !~ '^pg_' AND n.nspname <> 'information_schema'
`),!D(g,O,!p&&!O,!1,null,"n.nspname",null,null,null,2)||(N(g,"ORDER BY 1;"),A=await b(g.data),!A))return!1;if(d.nullPrint=null,d.title=r("List of schemas"),d.translate_header=!0,O&&E.sversion>=15e4){let P,L;if(k(g,`SELECT pubname 
FROM pg_catalog.pg_publication p
     JOIN pg_catalog.pg_publication_namespace pn ON p.oid = pn.pnpubid
     JOIN pg_catalog.pg_namespace n ON n.oid = pn.pnnspid 
WHERE n.nspname = '%s'
ORDER BY 1`,O),P=await b(g.data),P)C=de(P);else return!1;if(C>0){for(M=[],M[0]=In(r("Publications:")),L=0;L<C;L++)k(g,'    "%s"',v(P,L,0)),M[L+1]=In(g.data);M[L+1]=null,d.footers=M}}return U(A,d,E.queryFout,!1,E.logfile),!0}async function fp(O,R){let p={},g,A=E.popt;return R?await up(O):(Q(p),k(p,`SELECT
  n.nspname as "%s",
  p.prsname as "%s",
  pg_catalog.obj_description(p.oid, 'pg_ts_parser') as "%s"
FROM pg_catalog.pg_ts_parser p
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.prsnamespace
`,S("Schema"),S("Name"),S("Description")),!D(p,O,!1,!1,"n.nspname","p.prsname",null,"pg_catalog.pg_ts_parser_is_visible(p.oid)",null,3)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search parsers"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0))}async function up(O){let R={},p,g;if(Q(R),k(R,`SELECT p.oid,
  n.nspname,
  p.prsname
FROM pg_catalog.pg_ts_parser p
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = p.prsnamespace
`),!D(R,O,!1,!1,"n.nspname","p.prsname",null,"pg_catalog.pg_ts_parser_is_visible(p.oid)",null,3)||(N(R,"ORDER BY 1, 2;"),p=await b(R.data),!p))return!1;if(de(p)==0)return E.quiet||(O?I('Did not find any text search parser named "%s".',O):I("Did not find any text search parsers.")),!1;for(g=0;g<de(p);g++){let A,d=null,C;if(A=v(p,g,0),et(p,g,1)||(d=v(p,g,1)),C=v(p,g,2),!await dp(A,d,C)||c)return!1}return!0}async function dp(O,R,p){let g={},A,d={},C=E.popt,M=[!0,!1,!1];return Q(g),k(g,`SELECT '%s' AS "%s",
   p.prsstart::pg_catalog.regproc AS "%s",
   pg_catalog.obj_description(p.prsstart, 'pg_proc') as "%s"
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prstoken::pg_catalog.regproc,
   pg_catalog.obj_description(p.prstoken, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prsend::pg_catalog.regproc,
   pg_catalog.obj_description(p.prsend, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prsheadline::pg_catalog.regproc,
   pg_catalog.obj_description(p.prsheadline, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s'
UNION ALL
SELECT '%s',
   p.prslextype::pg_catalog.regproc,
   pg_catalog.obj_description(p.prslextype, 'pg_proc')
 FROM pg_catalog.pg_ts_parser p
 WHERE p.oid = '%s';`,S("Start parse"),S("Method"),S("Function"),S("Description"),O,S("Get next token"),O,S("End parse"),O,S("Get headline"),O,S("Get token types"),O),A=await b(g.data),!A||(C.nullPrint=null,Q(d),R?k(d,r('Text search parser "%s.%s"'),R,p):k(d,r('Text search parser "%s"'),p),C.title=d.data,C.footers=null,C.topt.default_footer=!1,C.translate_header=!0,C.translate_columns=M,C.n_translate_columns=Be(M),U(A,C,E.queryFout,!1,E.logfile),Q(g),k(g,`SELECT t.alias as "%s",
  t.description as "%s"
FROM pg_catalog.ts_token_type( '%s'::pg_catalog.oid ) as t
ORDER BY 1;`,S("Token name"),S("Description"),O),A=await b(g.data),!A)?!1:(C.nullPrint=null,R?k(d,r('Token types for parser "%s.%s"'),R,p):k(d,r('Token types for parser "%s"'),p),C.title=d.data,C.footers=null,C.topt.default_footer=!0,C.translate_header=!0,C.translate_columns=null,C.n_translate_columns=0,U(A,C,E.queryFout,!1,E.logfile),!0)}async function pp(O,R){let p={},g,A=E.popt;return Q(p),k(p,`SELECT
  n.nspname as "%s",
  d.dictname as "%s",
`,S("Schema"),S("Name")),R&&_(p,`  ( SELECT COALESCE(nt.nspname, '(null)')::pg_catalog.text || '.' || t.tmplname FROM
    pg_catalog.pg_ts_template t
    LEFT JOIN pg_catalog.pg_namespace nt ON nt.oid = t.tmplnamespace
    WHERE d.dicttemplate = t.oid ) AS  "%s",
  d.dictinitoption as "%s",
`,S("Template"),S("Init options")),_(p,`  pg_catalog.obj_description(d.oid, 'pg_ts_dict') as "%s"
`,S("Description")),N(p,`FROM pg_catalog.pg_ts_dict d
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = d.dictnamespace
`),!D(p,O,!1,!1,"n.nspname","d.dictname",null,"pg_catalog.pg_ts_dict_is_visible(d.oid)",null,3)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search dictionaries"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function gp(O,R){let p={},g,A=E.popt;return Q(p),R?k(p,`SELECT
  n.nspname AS "%s",
  t.tmplname AS "%s",
  t.tmplinit::pg_catalog.regproc AS "%s",
  t.tmpllexize::pg_catalog.regproc AS "%s",
  pg_catalog.obj_description(t.oid, 'pg_ts_template') AS "%s"
`,S("Schema"),S("Name"),S("Init"),S("Lexize"),S("Description")):k(p,`SELECT
  n.nspname AS "%s",
  t.tmplname AS "%s",
  pg_catalog.obj_description(t.oid, 'pg_ts_template') AS "%s"
`,S("Schema"),S("Name"),S("Description")),N(p,`FROM pg_catalog.pg_ts_template t
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = t.tmplnamespace
`),!D(p,O,!1,!1,"n.nspname","t.tmplname",null,"pg_catalog.pg_ts_template_is_visible(t.oid)",null,3)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search templates"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function mp(O,R){let p={},g,A=E.popt;return R?await Ep(O):(Q(p),k(p,`SELECT
   n.nspname as "%s",
   c.cfgname as "%s",
   pg_catalog.obj_description(c.oid, 'pg_ts_config') as "%s"
FROM pg_catalog.pg_ts_config c
LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.cfgnamespace
`,S("Schema"),S("Name"),S("Description")),!D(p,O,!1,!1,"n.nspname","c.cfgname",null,"pg_catalog.pg_ts_config_is_visible(c.oid)",null,3)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of text search configurations"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0))}async function Ep(O){let R={},p,g;if(Q(R),k(R,`SELECT c.oid, c.cfgname,
   n.nspname,
   p.prsname,
   np.nspname as pnspname
FROM pg_catalog.pg_ts_config c
   LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.cfgnamespace,
 pg_catalog.pg_ts_parser p
   LEFT JOIN pg_catalog.pg_namespace np ON np.oid = p.prsnamespace
WHERE  p.oid = c.cfgparser
`),!D(R,O,!0,!1,"n.nspname","c.cfgname",null,"pg_catalog.pg_ts_config_is_visible(c.oid)",null,3)||(N(R,"ORDER BY 3, 2;"),p=await b(R.data),!p))return!1;if(de(p)==0)return E.quiet||(O?I('Did not find any text search configuration named "%s".',O):I("Did not find any text search configurations.")),!1;for(g=0;g<de(p);g++){let A,d,C=null,M,P=null;if(A=v(p,g,0),d=v(p,g,1),et(p,g,2)||(C=v(p,g,2)),M=v(p,g,3),et(p,g,4)||(P=v(p,g,4)),!await Tp(A,C,d,P,M)||c)return!1}return!0}async function Tp(O,R,p,g,A){let d={},C={},M,P=E.popt;return Q(d),k(d,`SELECT
  ( SELECT t.alias FROM
    pg_catalog.ts_token_type(c.cfgparser) AS t
    WHERE t.tokid = m.maptokentype ) AS "%s",
  pg_catalog.btrim(
    ARRAY( SELECT mm.mapdict::pg_catalog.regdictionary
           FROM pg_catalog.pg_ts_config_map AS mm
           WHERE mm.mapcfg = m.mapcfg AND mm.maptokentype = m.maptokentype
           ORDER BY mapcfg, maptokentype, mapseqno
    ) :: pg_catalog.text,
  '{}') AS "%s"
FROM pg_catalog.pg_ts_config AS c, pg_catalog.pg_ts_config_map AS m
WHERE c.oid = '%s' AND m.mapcfg = c.oid
GROUP BY m.mapcfg, m.maptokentype, c.cfgparser
ORDER BY 1;`,S("Token"),S("Dictionaries"),O),M=await b(d.data),M?(Q(C),R?_(C,r('Text search configuration "%s.%s"'),R,p):_(C,r('Text search configuration "%s"'),p),g?_(C,r(`
Parser: "%s.%s"`),g,A):_(C,r(`
Parser: "%s"`),A),P.nullPrint=null,P.title=C.data,P.footers=null,P.topt.default_footer=!1,P.translate_header=!0,U(M,P,E.queryFout,!1,E.logfile),!0):!1}async function Sp(O,R){let p={},g,A=E.popt;return Q(p),k(p,`SELECT fdw.fdwname AS "%s",
  pg_catalog.pg_get_userbyid(fdw.fdwowner) AS "%s",
  fdw.fdwhandler::pg_catalog.regproc AS "%s",
  fdw.fdwvalidator::pg_catalog.regproc AS "%s"`,S("Name"),S("Owner"),S("Handler"),S("Validator")),R&&(N(p,`,
  `),mt(p,"fdwacl"),_(p,`,
 CASE WHEN fdwoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(fdwoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s" `,S("FDW options"),S("Description"))),N(p,`
FROM pg_catalog.pg_foreign_data_wrapper fdw
`),R&&N(p,`LEFT JOIN pg_catalog.pg_description d
       ON d.classoid = fdw.tableoid AND d.objoid = fdw.oid AND d.objsubid = 0
`),!D(p,O,!1,!1,null,"fdwname",null,null,null,1)||(N(p,"ORDER BY 1;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of foreign-data wrappers"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function Ap(O,R){let p={},g,A=E.popt;return Q(p),k(p,`SELECT s.srvname AS "%s",
  pg_catalog.pg_get_userbyid(s.srvowner) AS "%s",
  f.fdwname AS "%s"`,S("Name"),S("Owner"),S("Foreign-data wrapper")),R&&(N(p,`,
  `),mt(p,"s.srvacl"),_(p,`,
  s.srvtype AS "%s",
  s.srvversion AS "%s",
  CASE WHEN srvoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(srvoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s"`,S("Type"),S("Version"),S("FDW options"),S("Description"))),N(p,`
FROM pg_catalog.pg_foreign_server s
     JOIN pg_catalog.pg_foreign_data_wrapper f ON f.oid=s.srvfdw
`),R&&N(p,`LEFT JOIN pg_catalog.pg_description d
       ON d.classoid = s.tableoid AND d.objoid = s.oid AND d.objsubid = 0
`),!D(p,O,!1,!1,null,"s.srvname",null,null,null,1)||(N(p,"ORDER BY 1;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of foreign servers"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function Rp(O,R){let p={},g,A=E.popt;return Q(p),k(p,`SELECT um.srvname AS "%s",
  um.usename AS "%s"`,S("Server"),S("User name")),R&&_(p,`,
 CASE WHEN umoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(umoptions)),  ', ') || ')'   END AS "%s"`,S("FDW options")),N(p,`
FROM pg_catalog.pg_user_mappings um
`),!D(p,O,!1,!1,null,"um.srvname","um.usename",null,null,1)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of user mappings"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function _p(O,R){let p={},g,A=E.popt;return Q(p),k(p,`SELECT n.nspname AS "%s",
  c.relname AS "%s",
  s.srvname AS "%s"`,S("Schema"),S("Table"),S("Server")),R&&_(p,`,
 CASE WHEN ftoptions IS NULL THEN '' ELSE   '(' || pg_catalog.array_to_string(ARRAY(SELECT   pg_catalog.quote_ident(option_name) ||  ' ' ||   pg_catalog.quote_literal(option_value)  FROM   pg_catalog.pg_options_to_table(ftoptions)),  ', ') || ')'   END AS "%s",
  d.description AS "%s"`,S("FDW options"),S("Description")),N(p,`
FROM pg_catalog.pg_foreign_table ft
  INNER JOIN pg_catalog.pg_class c ON c.oid = ft.ftrelid
  INNER JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
  INNER JOIN pg_catalog.pg_foreign_server s ON s.oid = ft.ftserver
`),R&&N(p,`   LEFT JOIN pg_catalog.pg_description d
          ON d.classoid = c.tableoid AND d.objoid = c.oid AND d.objsubid = 0
`),!D(p,O,!1,!1,"n.nspname","c.relname",null,"pg_catalog.pg_table_is_visible(c.oid)",null,3)||(N(p,"ORDER BY 1, 2;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of foreign tables"),A.translate_header=!0,U(g,A,E.queryFout,!1,E.logfile),!0)}async function Op(O){let R={},p,g=E.popt;return Q(R),k(R,`SELECT e.extname AS "%s", e.extversion AS "%s", n.nspname AS "%s", c.description AS "%s"
FROM pg_catalog.pg_extension e LEFT JOIN pg_catalog.pg_namespace n ON n.oid = e.extnamespace LEFT JOIN pg_catalog.pg_description c ON c.objoid = e.oid AND c.classoid = 'pg_catalog.pg_extension'::pg_catalog.regclass
`,S("Name"),S("Version"),S("Schema"),S("Description")),!D(R,O,!1,!1,null,"e.extname",null,null,null,1)||(N(R,"ORDER BY 1;"),p=await b(R.data),!p)?!1:(g.nullPrint=null,g.title=r("List of installed extensions"),g.translate_header=!0,U(p,g,E.queryFout,!1,E.logfile),!0)}async function Np(O){let R={},p,g;if(Q(R),k(R,`SELECT e.extname, e.oid
FROM pg_catalog.pg_extension e
`),!D(R,O,!1,!1,null,"e.extname",null,null,null,1)||(N(R,"ORDER BY 1;"),p=await b(R.data),!p))return!1;if(de(p)==0)return E.quiet||(O?I('Did not find any extension named "%s".',O):I("Did not find any extensions.")),!1;for(g=0;g<de(p);g++){let A,d;if(A=v(p,g,0),d=v(p,g,1),!await bp(A,d)||c)return!1}return!0}async function bp(O,R){let p={},g,A={},d=E.popt;return Q(p),k(p,`SELECT pg_catalog.pg_describe_object(classid, objid, 0) AS "%s"
FROM pg_catalog.pg_depend
WHERE refclassid = 'pg_catalog.pg_extension'::pg_catalog.regclass AND refobjid = '%s' AND deptype = 'e'
ORDER BY 1;`,S("Object description"),R),g=await b(p.data),g?(d.nullPrint=null,Q(A),k(A,r('Objects in extension "%s"'),O),d.title=A.data,d.translate_header=!0,U(g,d,E.queryFout,!1,E.logfile),!0):!1}async function yp(O){let R={},p,g=E.popt,A=[!1,!1,!1,!1,!1,!1,!1,!1];return E.sversion<1e5?(I("The server (version %s) does not support publications.",on(E.sversion,!1,void 0)),!0):(Q(R),k(R,`SELECT pubname AS "%s",
  pg_catalog.pg_get_userbyid(pubowner) AS "%s",
  puballtables AS "%s",
  pubinsert AS "%s",
  pubupdate AS "%s",
  pubdelete AS "%s"`,S("Name"),S("Owner"),S("All tables"),S("Inserts"),S("Updates"),S("Deletes")),E.sversion>=11e4&&_(R,`,
  pubtruncate AS "%s"`,S("Truncates")),E.sversion>=13e4&&_(R,`,
  pubviaroot AS "%s"`,S("Via root")),N(R,`
FROM pg_catalog.pg_publication
`),!D(R,O,!1,!1,null,"pubname",null,null,null,1)||(N(R,"ORDER BY 1;"),p=await b(R.data),!p)?!1:(g.nullPrint=null,g.title=r("List of publications"),g.translate_header=!0,g.translate_columns=A,g.n_translate_columns=Be(A),U(p,g,E.queryFout,!1,E.logfile),!0))}async function dl(O,R,p,g){let A,d=0,C=0;if(A=await b(O.data),A)d=de(A);else return!1;for(d>0&&G(g,R),C=0;C<d;C++)p?k(O,'    "%s"',v(A,C,0)):(k(O,'    "%s.%s"',v(A,C,0),v(A,C,1)),et(A,C,3)||_(O," (%s)",v(A,C,3)),et(A,C,2)||_(O," WHERE %s",v(A,C,2))),G(g,O.data);return!0}async function Cp(O){let R={},p,g,A,d,C={},M={};if(E.sversion<1e5)return I("The server (version %s) does not support publications.",on(E.sversion,!1,void 0)),!0;if(A=E.sversion>=11e4,d=E.sversion>=13e4,Q(R),k(R,`SELECT oid, pubname,
  pg_catalog.pg_get_userbyid(pubowner) AS owner,
  puballtables, pubinsert, pubupdate, pubdelete`),A&&N(R,", pubtruncate"),d&&N(R,", pubviaroot"),N(R,`
FROM pg_catalog.pg_publication
`),!D(R,O,!1,!1,null,"pubname",null,null,null,1)||(N(R,"ORDER BY 2;"),g=await b(R.data),!g))return!1;if(de(g)==0)return E.quiet||(O?I('Did not find any publication named "%s".',O):I("Did not find any publications.")),!1;for(p=0;p<de(g);p++){let P="l",L=5,X=1,j=v(g,p,0),H=v(g,p,1),le=re(v(g,p,3),"t")==0,oe=E.popt.topt;if(A&&L++,d&&L++,Q(C),k(C,r("Publication %s"),H),q(M,oe,C.data,L,X),ie(M,S("Owner"),!0,P),ie(M,S("All tables"),!0,P),ie(M,S("Inserts"),!0,P),ie(M,S("Updates"),!0,P),ie(M,S("Deletes"),!0,P),A&&ie(M,S("Truncates"),!0,P),d&&ie(M,S("Via root"),!0,P),z(M,v(g,p,2),!1),z(M,v(g,p,3),!1),z(M,v(g,p,4),!1),z(M,v(g,p,5),!1),z(M,v(g,p,6),!1),A&&z(M,v(g,p,7),!1),d&&z(M,v(g,p,8),!1),!le&&(k(R,"SELECT n.nspname, c.relname"),E.sversion>=15e4?(N(R,", pg_get_expr(pr.prqual, c.oid)"),N(R,`, (CASE WHEN pr.prattrs IS NOT NULL THEN
     pg_catalog.array_to_string(      ARRAY(SELECT attname
              FROM
                pg_catalog.generate_series(0, pg_catalog.array_upper(pr.prattrs::pg_catalog.int2[], 1)) s,
                pg_catalog.pg_attribute
        WHERE attrelid = c.oid AND attnum = prattrs[s]), ', ')
       ELSE NULL END)`)):N(R,", NULL, NULL"),_(R,`
FROM pg_catalog.pg_class c,
     pg_catalog.pg_namespace n,
     pg_catalog.pg_publication_rel pr
WHERE c.relnamespace = n.oid
  AND c.oid = pr.prrelid
  AND pr.prpubid = '%s'
ORDER BY 1,2`,j),!await dl(R,r("Tables:"),!1,M)||E.sversion>=15e4&&(k(R,`SELECT n.nspname
FROM pg_catalog.pg_namespace n
     JOIN pg_catalog.pg_publication_namespace pn ON n.oid = pn.pnnspid
WHERE pn.pnpubid = '%s'
ORDER BY 1`,j),!await dl(R,r("Tables from schemas:"),!0,M))))return!1;ee(M,E.queryFout,!1,E.logfile)}return!0}async function Lp(O,R){let p={},g,A=E.popt,d=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];return E.sversion<1e5?(I("The server (version %s) does not support subscriptions.",on(E.sversion,!1,void 0)),!0):(Q(p),k(p,`SELECT subname AS "%s"
,  pg_catalog.pg_get_userbyid(subowner) AS "%s"
,  subenabled AS "%s"
,  subpublications AS "%s"
`,S("Name"),S("Owner"),S("Enabled"),S("Publication")),R&&(E.sversion>=14e4&&(_(p,`, subbinary AS "%s"
`,S("Binary")),E.sversion>=16e4?_(p,`, (CASE substream
    WHEN 'f' THEN 'off'
    WHEN 't' THEN 'on'
    WHEN 'p' THEN 'parallel'
   END) AS "%s"
`,S("Streaming")):_(p,`, substream AS "%s"
`,S("Streaming"))),E.sversion>=15e4&&_(p,`, subtwophasestate AS "%s"
, subdisableonerr AS "%s"
`,S("Two-phase commit"),S("Disable on error")),E.sversion>=16e4&&_(p,`, suborigin AS "%s"
, subpasswordrequired AS "%s"
, subrunasowner AS "%s"
`,S("Origin"),S("Password required"),S("Run as owner?")),_(p,`,  subsynccommit AS "%s"
,  subconninfo AS "%s"
`,S("Synchronous commit"),S("Conninfo")),E.sversion>=15e4&&_(p,`, subskiplsn AS "%s"
`,S("Skip LSN"))),N(p,`FROM pg_catalog.pg_subscription
WHERE subdbid = (SELECT oid
                 FROM pg_catalog.pg_database
                 WHERE datname = pg_catalog.current_database())`),!D(p,O,!0,!1,null,"subname",null,null,null,1)||(N(p,"ORDER BY 1;"),g=await b(p.data),!g)?!1:(A.nullPrint=null,A.title=r("List of subscriptions"),A.translate_header=!0,A.translate_columns=d,A.n_translate_columns=Be(d),U(g,A,E.queryFout,!1,E.logfile),!0))}function mt(O,R){_(O,`pg_catalog.array_to_string(%s, E'\\n') AS "%s"`,R,S("Access privileges"))}async function Ip(O,R,p){let g={},A,d=E.popt,C=!1,M=[!1,!1,!1,!1,!1,!1,!1];if(Q(g),k(g,`SELECT
  am.amname AS "%s",
  pg_catalog.format_type(c.opcintype, NULL) AS "%s",
  CASE
    WHEN c.opckeytype <> 0 AND c.opckeytype <> c.opcintype
    THEN pg_catalog.format_type(c.opckeytype, NULL)
    ELSE NULL
  END AS "%s",
  CASE
    WHEN pg_catalog.pg_opclass_is_visible(c.oid)
    THEN pg_catalog.format('%%I', c.opcname)
    ELSE pg_catalog.format('%%I.%%I', n.nspname, c.opcname)
  END AS "%s",
  (CASE WHEN c.opcdefault
    THEN '%s'
    ELSE '%s'
  END) AS "%s"`,S("AM"),S("Input type"),S("Storage type"),S("Operator class"),S("yes"),S("no"),S("Default?")),p&&_(g,`,
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', ofn.nspname, of.opfname)
  END AS "%s",
 pg_catalog.pg_get_userbyid(c.opcowner) AS "%s"
`,S("Operator family"),S("Owner")),N(g,`
FROM pg_catalog.pg_opclass c
  LEFT JOIN pg_catalog.pg_am am on am.oid = c.opcmethod
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.opcnamespace
  LEFT JOIN pg_catalog.pg_type t ON t.oid = c.opcintype
  LEFT JOIN pg_catalog.pg_namespace tn ON tn.oid = t.typnamespace
`),p&&N(g,`  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = c.opcfamily
  LEFT JOIN pg_catalog.pg_namespace ofn ON ofn.oid = of.opfnamespace
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}return R&&!D(g,R,C,!1,"tn.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3)||(N(g,"ORDER BY 1, 2, 4;"),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of operator classes"),d.translate_header=!0,d.translate_columns=M,d.n_translate_columns=Be(M),U(A,d,E.queryFout,!1,E.logfile),!0)}async function wp(O,R,p){let g={},A,d=E.popt,C=!1,M=[!1,!1,!1,!1];if(Q(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(f.oid)
    THEN pg_catalog.format('%%I', f.opfname)
    ELSE pg_catalog.format('%%I.%%I', n.nspname, f.opfname)
  END AS "%s",
  (SELECT
     pg_catalog.string_agg(pg_catalog.format_type(oc.opcintype, NULL), ', ')
   FROM pg_catalog.pg_opclass oc
   WHERE oc.opcfamily = f.oid) "%s"`,S("AM"),S("Operator family"),S("Applicable types")),p&&_(g,`,
  pg_catalog.pg_get_userbyid(f.opfowner) AS "%s"
`,S("Owner")),N(g,`
FROM pg_catalog.pg_opfamily f
  LEFT JOIN pg_catalog.pg_am am on am.oid = f.opfmethod
  LEFT JOIN pg_catalog.pg_namespace n ON n.oid = f.opfnamespace
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}if(R){if(_(g,`  %s EXISTS (
    SELECT 1
    FROM pg_catalog.pg_type t
    JOIN pg_catalog.pg_opclass oc ON oc.opcintype = t.oid
    LEFT JOIN pg_catalog.pg_namespace tn ON tn.oid = t.typnamespace
    WHERE oc.opcfamily = f.oid
`,C?"AND":"WHERE"),!D(g,R,!0,!1,"tn.nspname","t.typname","pg_catalog.format_type(t.oid, NULL)","pg_catalog.pg_type_is_visible(t.oid)",null,3))return!1;N(g,`  )
`)}return N(g,"ORDER BY 1, 2;"),A=await b(g.data),A?(d.nullPrint=null,d.title=r("List of operator families"),d.translate_header=!0,d.translate_columns=M,d.n_translate_columns=Be(M),U(A,d,E.queryFout,!1,E.logfile),!0):!1}async function xp(O,R,p){let g={},A,d=E.popt,C=!1,M=[!1,!1,!1,!1,!1,!1];if(Q(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', nsf.nspname, of.opfname)
  END AS "%s",
  o.amopopr::pg_catalog.regoperator AS "%s"
,  o.amopstrategy AS "%s",
  CASE o.amoppurpose
    WHEN 'o' THEN '%s'
    WHEN 's' THEN '%s'
  END AS "%s"
`,S("AM"),S("Operator family"),S("Operator"),S("Strategy"),S("ordering"),S("search"),S("Purpose")),p&&_(g,`, ofs.opfname AS "%s"
`,S("Sort opfamily")),N(g,`FROM pg_catalog.pg_amop o
  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = o.amopfamily
  LEFT JOIN pg_catalog.pg_am am ON am.oid = of.opfmethod AND am.oid = o.amopmethod
  LEFT JOIN pg_catalog.pg_namespace nsf ON of.opfnamespace = nsf.oid
`),p&&N(g,`  LEFT JOIN pg_catalog.pg_opfamily ofs ON ofs.oid = o.amopsortfamily
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}return R&&!D(g,R,C,!1,"nsf.nspname","of.opfname",null,null,null,3)||(N(g,`ORDER BY 1, 2,
  o.amoplefttype = o.amoprighttype DESC,
  pg_catalog.format_type(o.amoplefttype, NULL),
  pg_catalog.format_type(o.amoprighttype, NULL),
  o.amopstrategy;`),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of operators of operator families"),d.translate_header=!0,d.translate_columns=M,d.n_translate_columns=Be(M),U(A,d,E.queryFout,!1,E.logfile),!0)}async function vp(O,R,p){let g={},A,d=E.popt,C=!1,M=[!1,!1,!1,!1,!1,!1];if(Q(g),k(g,`SELECT
  am.amname AS "%s",
  CASE
    WHEN pg_catalog.pg_opfamily_is_visible(of.oid)
    THEN pg_catalog.format('%%I', of.opfname)
    ELSE pg_catalog.format('%%I.%%I', ns.nspname, of.opfname)
  END AS "%s",
  pg_catalog.format_type(ap.amproclefttype, NULL) AS "%s",
  pg_catalog.format_type(ap.amprocrighttype, NULL) AS "%s",
  ap.amprocnum AS "%s"
`,S("AM"),S("Operator family"),S("Registered left type"),S("Registered right type"),S("Number")),p?_(g,`, ap.amproc::pg_catalog.regprocedure AS "%s"
`,S("Function")):_(g,`, p.proname AS "%s"
`,S("Function")),N(g,`FROM pg_catalog.pg_amproc ap
  LEFT JOIN pg_catalog.pg_opfamily of ON of.oid = ap.amprocfamily
  LEFT JOIN pg_catalog.pg_am am ON am.oid = of.opfmethod
  LEFT JOIN pg_catalog.pg_namespace ns ON of.opfnamespace = ns.oid
  LEFT JOIN pg_catalog.pg_proc p ON ap.amproc = p.oid
`),O){if(C={value:C},!D(g,O,!1,!1,null,"am.amname",null,null,C,1))return!1;C=C.value}return R&&!D(g,R,C,!1,"ns.nspname","of.opfname",null,null,null,3)||(N(g,`ORDER BY 1, 2,
  ap.amproclefttype = ap.amprocrighttype DESC,
  3, 4, 5;`),A=await b(g.data),!A)?!1:(d.nullPrint=null,d.title=r("List of support functions of operator families"),d.translate_header=!0,d.translate_columns=M,d.n_translate_columns=Be(M),U(A,d,E.queryFout,!1,E.logfile),!0)}async function Dp(O){let R={},p,g=E.popt;if(Q(R),k(R,`SELECT oid as "%s",
  pg_catalog.pg_get_userbyid(lomowner) as "%s",
  `,S("ID"),S("Owner")),O&&(mt(R,"lomacl"),N(R,`,
  `)),_(R,`pg_catalog.obj_description(oid, 'pg_largeobject') as "%s"
FROM pg_catalog.pg_largeobject_metadata
ORDER BY oid`,S("Description")),p=await b(R.data),!p)return!1;g.nullPrint=null,g.title=r("Large objects"),g.translate_header=!0,U(p,g,E.queryFout,!1,E.logfile)}return!0}return{promise:u(),cancel:h}}function Xn(n){if(!n)throw new Error(`Assertion failed (value: ${n})`)}const S=hl,In=hl,r=hl;function or(n,e){const t=n.indexOf(e);return t===-1?null:t}const Me=or;function cn(n){return n.length}function Jn(n,e,t){if(typeof n!="string"||typeof e!="string")throw new Error("Not a string");return n.length>t&&(n=n.slice(0,t)),e.length>t&&(e=e.slice(0,t)),n<e?-1:n>e?1:0}function re(n,e){return Jn(n,e,1/0)}function Q0(n,e){const t=cn(n);for(let i=0;i<t;i++)if(e.indexOf(n[i])===-1)return i;return t}function Sh(n){return parseInt(n,10)}function Co(n){return parseInt(n,10)}function Ah(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Z0(n){return n==='"'||n==="'"}function e_(n){const e=n.charCodeAt(0);return e>=65&&e<=90}function Be(n){return n.length}function xa(n){return n.toLowerCase()}function t_(n,e){return re(n.toLowerCase(),e.toLowerCase())}function Rh(n,e,t){return e}function Q(n){n.data="",n.len=0}const Lo=Q;function N(n,e){n.data+=e,n.len=n.data.length}const Ie=N;function _(n,e,...t){const i=tt(e,...t);N(n,i)}function k(n,e,...t){Q(n),_(n,e,...t)}function va(n,e,t,i){const s="'"+e.replace(i?/[']/g:/['\\]/g,"\\$&")+"'";N(n,s)}function zn(n,e,t){if(Me(e,"\\")!=null&&Hi(t)>=80100){n.len>0&&n.data[n.len-1]!=" "&&Ie(n," "),Ie(n,U0),va(n,e,Hd(t),!1);return}va(n,e,t.encoding,t.std_strings)}function tt(n,...e){let t="",i=0,s=0,o;for(;(o=n.indexOf("%",s))!==-1;){let a=0,l=!1;t+=n.slice(s,o),s=o+1;let c=n[s++];if(c==="%"&&(t+="%"),c==="*"&&(a=parseInt(e[i++],10),c=n[s++]),c==="-"&&(l=!0,c=n[s++]),c>="0"&&c<="9"&&(a=parseInt(c,10),c=n[s++]),c==="s"||c==="c"||c==="d"||c==="u"){const h=String(e[i++]),f=a-h.length;l===!1&&f>0&&(t+=" ".repeat(f)),t+=h,l===!0&&f>0&&(t+=" ".repeat(f))}}return t+=n.slice(s),t}const Io=tt;function _h(n){return n?n.dbName:null}function Hi(n){return!n||n.status===1?0:n.sversion}function Hd(n){return!n||n.status!=0?-1:n.client_encoding}function de(n){return n.rowCount}function Wd(n){return n.fields.length}function Gd(n,e){return n.fields[e].name}function n_(n,e){return n.fields[e].dataTypeID}function et(n,e,t){return n.rows[e][t]===null?1:0}function v(n,e,t){const i=n.rows[e][t];return String(i===null?"":i)}function wn(n,e){let t,i,s,o,a;if(!n||e==null||e[0]==null)return-1;for(t=!1,s="",i=0,a=cn(e);i<a;i++){let l=e[i];t?l=='"'?e[i+1]=='"'?(s+='"',i++):t=!1:s+=l:l=='"'?t=!0:(l=xa(l),s+=l)}for(o=0,a=Wd(n);o<a;o++)if(re(s,Gd(n,o))==0)return o;return-1}function on(n,e,t,i){return n>=1e5?t=tt("%d",n/1e4):t=tt("%d.%d",Math.floor(n/1e4),Math.floor(n/100)%100),t}function xn(n,e,t,i){if(e!==0&&e!==4)throw new Error(`scan type ${e} not implemented`);const s=[],o=/^(.*);*$/;let a;for(;;){if(a=n[0][n[1]],a==null)return null;if(!Ah(a))break;n[1]++}if(e===4)return n[0].slice(n[1],n[1]=n[0].length);let l="";for(;;){if(a=n[0][n[1]++],a==null)return s.length>0?null:l.match(o)[1];if(Z0(a))a===s[s.length-1]?s.pop():s.push(a),a==='"'&&(l+=a);else{if(s.length===0&&Ah(a))return l.match(o)[1];l+=a}}}function hl(n){return n}const i_=`Help
  \\? [commands]          show help on backslash commands
  \\h [NAME]              help on syntax of SQL commands, * for all commands

Informational
  (options: S = show system objects, + = additional detail)
  \\d[S+]                 list tables, views, and sequences
  \\d[S+]  NAME           describe table, view, sequence, or index
  \\da[S]  [PATTERN]      list aggregates
  \\dA[+]  [PATTERN]      list access methods
  \\dAc[+] [AMPTRN [TYPEPTRN]]  list operator classes
  \\dAf[+] [AMPTRN [TYPEPTRN]]  list operator families
  \\dAo[+] [AMPTRN [OPFPTRN]]   list operators of operator families
  \\dAp[+] [AMPTRN [OPFPTRN]]   list support functions of operator families
  \\db[+]  [PATTERN]      list tablespaces
  \\dc[S+] [PATTERN]      list conversions
  \\dconfig[+] [PATTERN]  list configuration parameters
  \\dC[+]  [PATTERN]      list casts
  \\dd[S]  [PATTERN]      show object descriptions not displayed elsewhere
  \\dD[S+] [PATTERN]      list domains
  \\ddp    [PATTERN]      list default privileges
  \\dE[S+] [PATTERN]      list foreign tables
  \\des[+] [PATTERN]      list foreign servers
  \\det[+] [PATTERN]      list foreign tables
  \\deu[+] [PATTERN]      list user mappings
  \\dew[+] [PATTERN]      list foreign-data wrappers
  \\df[anptw][S+] [FUNCPTRN [TYPEPTRN ...]]
                         list [only agg/normal/procedure/trigger/window] functions
  \\dF[+]  [PATTERN]      list text search configurations
  \\dFd[+] [PATTERN]      list text search dictionaries
  \\dFp[+] [PATTERN]      list text search parsers
  \\dFt[+] [PATTERN]      list text search templates
  \\dg[S+] [PATTERN]      list roles
  \\di[S+] [PATTERN]      list indexes
  \\dl[+]                 list large objects, same as \\lo_list
  \\dL[S+] [PATTERN]      list procedural languages
  \\dm[S+] [PATTERN]      list materialized views
  \\dn[S+] [PATTERN]      list schemas
  \\do[S+] [OPPTRN [TYPEPTRN [TYPEPTRN]]]
                         list operators
  \\dO[S+] [PATTERN]      list collations
  \\dp[S]  [PATTERN]      list table, view, and sequence access privileges
  \\dP[itn+] [PATTERN]    list [only index/table] partitioned relations [n=nested]
  \\drds [ROLEPTRN [DBPTRN]] list per-database role settings
  \\drg[S] [PATTERN]      list role grants
  \\dRp[+] [PATTERN]      list replication publications
  \\dRs[+] [PATTERN]      list replication subscriptions
  \\ds[S+] [PATTERN]      list sequences
  \\dt[S+] [PATTERN]      list tables
  \\dT[S+] [PATTERN]      list data types
  \\du[S+] [PATTERN]      list roles
  \\dv[S+] [PATTERN]      list views
  \\dx[+]  [PATTERN]      list extensions
  \\dX     [PATTERN]      list extended statistics
  \\dy[+]  [PATTERN]      list event triggers
  \\l[+]   [PATTERN]      list databases
  \\lo_list[+]            list large objects
  \\sf[+]  FUNCNAME       show a function's definition
  \\sv[+]  VIEWNAME       show a view's definition
  \\z[S]   [PATTERN]      same as \\dp
`,ki=[["ABORT","abort the current transaction","sql-abort",s_],["ALTER AGGREGATE","change the definition of an aggregate function","sql-alteraggregate",r_],["ALTER COLLATION","change the definition of a collation","sql-altercollation",o_],["ALTER CONVERSION","change the definition of a conversion","sql-alterconversion",a_],["ALTER DATABASE","change a database","sql-alterdatabase",l_],["ALTER DEFAULT PRIVILEGES","define default access privileges","sql-alterdefaultprivileges",c_],["ALTER DOMAIN","change the definition of a domain","sql-alterdomain",h_],["ALTER EVENT TRIGGER","change the definition of an event trigger","sql-altereventtrigger",f_],["ALTER EXTENSION","change the definition of an extension","sql-alterextension",u_],["ALTER FOREIGN DATA WRAPPER","change the definition of a foreign-data wrapper","sql-alterforeigndatawrapper",d_],["ALTER FOREIGN TABLE","change the definition of a foreign table","sql-alterforeigntable",p_],["ALTER FUNCTION","change the definition of a function","sql-alterfunction",g_],["ALTER GROUP","change role name or membership","sql-altergroup",m_],["ALTER INDEX","change the definition of an index","sql-alterindex",E_],["ALTER LANGUAGE","change the definition of a procedural language","sql-alterlanguage",T_],["ALTER LARGE OBJECT","change the definition of a large object","sql-alterlargeobject",S_],["ALTER MATERIALIZED VIEW","change the definition of a materialized view","sql-altermaterializedview",A_],["ALTER OPERATOR","change the definition of an operator","sql-alteroperator",R_],["ALTER OPERATOR CLASS","change the definition of an operator class","sql-alteropclass",__],["ALTER OPERATOR FAMILY","change the definition of an operator family","sql-alteropfamily",O_],["ALTER POLICY","change the definition of a row-level security policy","sql-alterpolicy",N_],["ALTER PROCEDURE","change the definition of a procedure","sql-alterprocedure",b_],["ALTER PUBLICATION","change the definition of a publication","sql-alterpublication",y_],["ALTER ROLE","change a database role","sql-alterrole",C_],["ALTER ROUTINE","change the definition of a routine","sql-alterroutine",L_],["ALTER RULE","change the definition of a rule","sql-alterrule",I_],["ALTER SCHEMA","change the definition of a schema","sql-alterschema",w_],["ALTER SEQUENCE","change the definition of a sequence generator","sql-altersequence",x_],["ALTER SERVER","change the definition of a foreign server","sql-alterserver",v_],["ALTER STATISTICS","change the definition of an extended statistics object","sql-alterstatistics",D_],["ALTER SUBSCRIPTION","change the definition of a subscription","sql-altersubscription",k_],["ALTER SYSTEM","change a server configuration parameter","sql-altersystem",P_],["ALTER TABLE","change the definition of a table","sql-altertable",M_],["ALTER TABLESPACE","change the definition of a tablespace","sql-altertablespace",U_],["ALTER TEXT SEARCH CONFIGURATION","change the definition of a text search configuration","sql-altertsconfig",F_],["ALTER TEXT SEARCH DICTIONARY","change the definition of a text search dictionary","sql-altertsdictionary",B_],["ALTER TEXT SEARCH PARSER","change the definition of a text search parser","sql-altertsparser",H_],["ALTER TEXT SEARCH TEMPLATE","change the definition of a text search template","sql-altertstemplate",W_],["ALTER TRIGGER","change the definition of a trigger","sql-altertrigger",G_],["ALTER TYPE","change the definition of a type","sql-altertype",V_],["ALTER USER","change a database role","sql-alteruser",q_],["ALTER USER MAPPING","change the definition of a user mapping","sql-alterusermapping",Y_],["ALTER VIEW","change the definition of a view","sql-alterview",j_],["ANALYZE","collect statistics about a database","sql-analyze",X_],["BEGIN","start a transaction block","sql-begin",z_],["CALL","invoke a procedure","sql-call",K_],["CHECKPOINT","force a write-ahead log checkpoint","sql-checkpoint",$_],["CLOSE","close a cursor","sql-close",J_],["CLUSTER","cluster a table according to an index","sql-cluster",Q_],["COMMENT","define or change the comment of an object","sql-comment",Z_],["COMMIT","commit the current transaction","sql-commit",eO],["COMMIT PREPARED","commit a transaction that was earlier prepared for two-phase commit","sql-commit-prepared",tO],["COPY","copy data between a file and a table","sql-copy",nO],["CREATE ACCESS METHOD","define a new access method","sql-create-access-method",iO],["CREATE AGGREGATE","define a new aggregate function","sql-createaggregate",sO],["CREATE CAST","define a new cast","sql-createcast",rO],["CREATE COLLATION","define a new collation","sql-createcollation",oO],["CREATE CONVERSION","define a new encoding conversion","sql-createconversion",aO],["CREATE DATABASE","create a new database","sql-createdatabase",lO],["CREATE DOMAIN","define a new domain","sql-createdomain",cO],["CREATE EVENT TRIGGER","define a new event trigger","sql-createeventtrigger",hO],["CREATE EXTENSION","install an extension","sql-createextension",fO],["CREATE FOREIGN DATA WRAPPER","define a new foreign-data wrapper","sql-createforeigndatawrapper",uO],["CREATE FOREIGN TABLE","define a new foreign table","sql-createforeigntable",dO],["CREATE FUNCTION","define a new function","sql-createfunction",pO],["CREATE GROUP","define a new database role","sql-creategroup",gO],["CREATE INDEX","define a new index","sql-createindex",mO],["CREATE LANGUAGE","define a new procedural language","sql-createlanguage",EO],["CREATE MATERIALIZED VIEW","define a new materialized view","sql-creatematerializedview",TO],["CREATE OPERATOR","define a new operator","sql-createoperator",SO],["CREATE OPERATOR CLASS","define a new operator class","sql-createopclass",AO],["CREATE OPERATOR FAMILY","define a new operator family","sql-createopfamily",RO],["CREATE POLICY","define a new row-level security policy for a table","sql-createpolicy",_O],["CREATE PROCEDURE","define a new procedure","sql-createprocedure",OO],["CREATE PUBLICATION","define a new publication","sql-createpublication",NO],["CREATE ROLE","define a new database role","sql-createrole",bO],["CREATE RULE","define a new rewrite rule","sql-createrule",yO],["CREATE SCHEMA","define a new schema","sql-createschema",CO],["CREATE SEQUENCE","define a new sequence generator","sql-createsequence",LO],["CREATE SERVER","define a new foreign server","sql-createserver",IO],["CREATE STATISTICS","define extended statistics","sql-createstatistics",wO],["CREATE SUBSCRIPTION","define a new subscription","sql-createsubscription",xO],["CREATE TABLE","define a new table","sql-createtable",vO],["CREATE TABLE AS","define a new table from the results of a query","sql-createtableas",DO],["CREATE TABLESPACE","define a new tablespace","sql-createtablespace",kO],["CREATE TEXT SEARCH CONFIGURATION","define a new text search configuration","sql-createtsconfig",PO],["CREATE TEXT SEARCH DICTIONARY","define a new text search dictionary","sql-createtsdictionary",MO],["CREATE TEXT SEARCH PARSER","define a new text search parser","sql-createtsparser",UO],["CREATE TEXT SEARCH TEMPLATE","define a new text search template","sql-createtstemplate",FO],["CREATE TRANSFORM","define a new transform","sql-createtransform",BO],["CREATE TRIGGER","define a new trigger","sql-createtrigger",HO],["CREATE TYPE","define a new data type","sql-createtype",WO],["CREATE USER","define a new database role","sql-createuser",GO],["CREATE USER MAPPING","define a new mapping of a user to a foreign server","sql-createusermapping",VO],["CREATE VIEW","define a new view","sql-createview",qO],["DEALLOCATE","deallocate a prepared statement","sql-deallocate",YO],["DECLARE","define a cursor","sql-declare",jO],["DELETE","delete rows of a table","sql-delete",XO],["DISCARD","discard session state","sql-discard",zO],["DO","execute an anonymous code block","sql-do",KO],["DROP ACCESS METHOD","remove an access method","sql-drop-access-method",$O],["DROP AGGREGATE","remove an aggregate function","sql-dropaggregate",JO],["DROP CAST","remove a cast","sql-dropcast",QO],["DROP COLLATION","remove a collation","sql-dropcollation",ZO],["DROP CONVERSION","remove a conversion","sql-dropconversion",eN],["DROP DATABASE","remove a database","sql-dropdatabase",tN],["DROP DOMAIN","remove a domain","sql-dropdomain",nN],["DROP EVENT TRIGGER","remove an event trigger","sql-dropeventtrigger",iN],["DROP EXTENSION","remove an extension","sql-dropextension",sN],["DROP FOREIGN DATA WRAPPER","remove a foreign-data wrapper","sql-dropforeigndatawrapper",rN],["DROP FOREIGN TABLE","remove a foreign table","sql-dropforeigntable",oN],["DROP FUNCTION","remove a function","sql-dropfunction",aN],["DROP GROUP","remove a database role","sql-dropgroup",lN],["DROP INDEX","remove an index","sql-dropindex",cN],["DROP LANGUAGE","remove a procedural language","sql-droplanguage",hN],["DROP MATERIALIZED VIEW","remove a materialized view","sql-dropmaterializedview",fN],["DROP OPERATOR","remove an operator","sql-dropoperator",uN],["DROP OPERATOR CLASS","remove an operator class","sql-dropopclass",dN],["DROP OPERATOR FAMILY","remove an operator family","sql-dropopfamily",pN],["DROP OWNED","remove database objects owned by a database role","sql-drop-owned",gN],["DROP POLICY","remove a row-level security policy from a table","sql-droppolicy",mN],["DROP PROCEDURE","remove a procedure","sql-dropprocedure",EN],["DROP PUBLICATION","remove a publication","sql-droppublication",TN],["DROP ROLE","remove a database role","sql-droprole",SN],["DROP ROUTINE","remove a routine","sql-droproutine",AN],["DROP RULE","remove a rewrite rule","sql-droprule",RN],["DROP SCHEMA","remove a schema","sql-dropschema",_N],["DROP SEQUENCE","remove a sequence","sql-dropsequence",ON],["DROP SERVER","remove a foreign server descriptor","sql-dropserver",NN],["DROP STATISTICS","remove extended statistics","sql-dropstatistics",bN],["DROP SUBSCRIPTION","remove a subscription","sql-dropsubscription",yN],["DROP TABLE","remove a table","sql-droptable",CN],["DROP TABLESPACE","remove a tablespace","sql-droptablespace",LN],["DROP TEXT SEARCH CONFIGURATION","remove a text search configuration","sql-droptsconfig",IN],["DROP TEXT SEARCH DICTIONARY","remove a text search dictionary","sql-droptsdictionary",wN],["DROP TEXT SEARCH PARSER","remove a text search parser","sql-droptsparser",xN],["DROP TEXT SEARCH TEMPLATE","remove a text search template","sql-droptstemplate",vN],["DROP TRANSFORM","remove a transform","sql-droptransform",DN],["DROP TRIGGER","remove a trigger","sql-droptrigger",kN],["DROP TYPE","remove a data type","sql-droptype",PN],["DROP USER","remove a database role","sql-dropuser",MN],["DROP USER MAPPING","remove a user mapping for a foreign server","sql-dropusermapping",UN],["DROP VIEW","remove a view","sql-dropview",FN],["END","commit the current transaction","sql-end",BN],["EXECUTE","execute a prepared statement","sql-execute",HN],["EXPLAIN","show the execution plan of a statement","sql-explain",WN],["FETCH","retrieve rows from a query using a cursor","sql-fetch",GN],["GRANT","define access privileges","sql-grant",VN],["IMPORT FOREIGN SCHEMA","import table definitions from a foreign server","sql-importforeignschema",qN],["INSERT","create new rows in a table","sql-insert",YN],["LISTEN","listen for a notification","sql-listen",jN],["LOAD","load a shared library file","sql-load",XN],["LOCK","lock a table","sql-lock",zN],["MERGE","conditionally insert, update, or delete rows of a table","sql-merge",KN],["MOVE","position a cursor","sql-move",$N],["NOTIFY","generate a notification","sql-notify",JN],["PREPARE","prepare a statement for execution","sql-prepare",QN],["PREPARE TRANSACTION","prepare the current transaction for two-phase commit","sql-prepare-transaction",ZN],["REASSIGN OWNED","change the ownership of database objects owned by a database role","sql-reassign-owned",eb],["REFRESH MATERIALIZED VIEW","replace the contents of a materialized view","sql-refreshmaterializedview",tb],["REINDEX","rebuild indexes","sql-reindex",nb],["RELEASE SAVEPOINT","release a previously defined savepoint","sql-release-savepoint",ib],["RESET","restore the value of a run-time parameter to the default value","sql-reset",sb],["REVOKE","remove access privileges","sql-revoke",rb],["ROLLBACK","abort the current transaction","sql-rollback",ob],["ROLLBACK PREPARED","cancel a transaction that was earlier prepared for two-phase commit","sql-rollback-prepared",ab],["ROLLBACK TO SAVEPOINT","roll back to a savepoint","sql-rollback-to",lb],["SAVEPOINT","define a new savepoint within the current transaction","sql-savepoint",cb],["SECURITY LABEL","define or change a security label applied to an object","sql-security-label",hb],["SELECT","retrieve rows from a table or view","sql-select",fb],["SELECT INTO","define a new table from the results of a query","sql-selectinto",ub],["SET","change a run-time parameter","sql-set",db],["SET CONSTRAINTS","set constraint check timing for the current transaction","sql-set-constraints",pb],["SET ROLE","set the current user identifier of the current session","sql-set-role",gb],["SET SESSION AUTHORIZATION","set the session user identifier and the current user identifier of the current session","sql-set-session-authorization",mb],["SET TRANSACTION","set the characteristics of the current transaction","sql-set-transaction",Eb],["SHOW","show the value of a run-time parameter","sql-show",Tb],["START TRANSACTION","start a transaction block","sql-start-transaction",Sb],["TABLE","retrieve rows from a table or view","sql-select",Ab],["TRUNCATE","empty a table or set of tables","sql-truncate",Rb],["UNLISTEN","stop listening for a notification","sql-unlisten",_b],["UPDATE","update rows of a table","sql-update",Ob],["VACUUM","garbage-collect and optionally analyze a database","sql-vacuum",Nb],["VALUES","compute a set of rows","sql-values",bb],["WITH","retrieve rows from a table or view","sql-select",yb]];function s_(n){_(n,"ABORT [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function r_(n){_(n,`ALTER AGGREGATE %s ( %s ) RENAME TO %s
ALTER AGGREGATE %s ( %s )
                OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER AGGREGATE %s ( %s ) SET SCHEMA %s

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("name"),r("aggregate_signature"),r("new_name"),r("name"),r("aggregate_signature"),r("new_owner"),r("name"),r("aggregate_signature"),r("new_schema"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function o_(n){_(n,`ALTER COLLATION %s REFRESH VERSION

ALTER COLLATION %s RENAME TO %s
ALTER COLLATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER COLLATION %s SET SCHEMA %s`,r("name"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function a_(n){_(n,`ALTER CONVERSION %s RENAME TO %s
ALTER CONVERSION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER CONVERSION %s SET SCHEMA %s`,r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function l_(n){_(n,`ALTER DATABASE %s [ [ WITH ] %s [ ... ] ]

%s

    ALLOW_CONNECTIONS %s
    CONNECTION LIMIT %s
    IS_TEMPLATE %s

ALTER DATABASE %s RENAME TO %s

ALTER DATABASE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER DATABASE %s SET TABLESPACE %s

ALTER DATABASE %s REFRESH COLLATION VERSION

ALTER DATABASE %s SET %s { TO | = } { %s | DEFAULT }
ALTER DATABASE %s SET %s FROM CURRENT
ALTER DATABASE %s RESET %s
ALTER DATABASE %s RESET ALL`,r("name"),r("option"),r("where option can be:"),r("allowconn"),r("connlimit"),r("istemplate"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_tablespace"),r("name"),r("name"),r("configuration_parameter"),r("value"),r("name"),r("configuration_parameter"),r("name"),r("configuration_parameter"),r("name"))}function c_(n){_(n,`ALTER DEFAULT PRIVILEGES
    [ FOR { ROLE | USER } %s [, ...] ]
    [ IN SCHEMA %s [, ...] ]
    %s

%s

GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [, ...] | ALL [ PRIVILEGES ] }
    ON TABLES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON { FUNCTIONS | ROUTINES }
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON TYPES
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

GRANT { USAGE | CREATE | ALL [ PRIVILEGES ] }
    ON SCHEMAS
    TO { [ GROUP ] %s | PUBLIC } [, ...] [ WITH GRANT OPTION ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [, ...] | ALL [ PRIVILEGES ] }
    ON TABLES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON SEQUENCES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { EXECUTE | ALL [ PRIVILEGES ] }
    ON { FUNCTIONS | ROUTINES }
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON TYPES
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | CREATE | ALL [ PRIVILEGES ] }
    ON SCHEMAS
    FROM { [ GROUP ] %s | PUBLIC } [, ...]
    [ CASCADE | RESTRICT ]`,r("target_role"),r("schema_name"),r("abbreviated_grant_or_revoke"),r("where abbreviated_grant_or_revoke is one of:"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"))}function h_(n){_(n,`ALTER DOMAIN %s
    { SET DEFAULT %s | DROP DEFAULT }
ALTER DOMAIN %s
    { SET | DROP } NOT NULL
ALTER DOMAIN %s
    ADD %s [ NOT VALID ]
ALTER DOMAIN %s
    DROP CONSTRAINT [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
ALTER DOMAIN %s
     RENAME CONSTRAINT %s TO %s
ALTER DOMAIN %s
    VALIDATE CONSTRAINT %s
ALTER DOMAIN %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER DOMAIN %s
    RENAME TO %s
ALTER DOMAIN %s
    SET SCHEMA %s`,r("name"),r("expression"),r("name"),r("name"),r("domain_constraint"),r("name"),r("constraint_name"),r("name"),r("constraint_name"),r("new_constraint_name"),r("name"),r("constraint_name"),r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"))}function f_(n){_(n,`ALTER EVENT TRIGGER %s DISABLE
ALTER EVENT TRIGGER %s ENABLE [ REPLICA | ALWAYS ]
ALTER EVENT TRIGGER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER EVENT TRIGGER %s RENAME TO %s`,r("name"),r("name"),r("name"),r("new_owner"),r("name"),r("new_name"))}function u_(n){_(n,`ALTER EXTENSION %s UPDATE [ TO %s ]
ALTER EXTENSION %s SET SCHEMA %s
ALTER EXTENSION %s ADD %s
ALTER EXTENSION %s DROP %s

%s

  ACCESS METHOD %s |
  AGGREGATE %s ( %s ) |
  CAST (%s AS %s) |
  COLLATION %s |
  CONVERSION %s |
  DOMAIN %s |
  EVENT TRIGGER %s |
  FOREIGN DATA WRAPPER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  MATERIALIZED VIEW %s |
  OPERATOR %s (%s, %s) |
  OPERATOR CLASS %s USING %s |
  OPERATOR FAMILY %s USING %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  SCHEMA %s |
  SEQUENCE %s |
  SERVER %s |
  TABLE %s |
  TEXT SEARCH CONFIGURATION %s |
  TEXT SEARCH DICTIONARY %s |
  TEXT SEARCH PARSER %s |
  TEXT SEARCH TEMPLATE %s |
  TRANSFORM FOR %s LANGUAGE %s |
  TYPE %s |
  VIEW %s

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("name"),r("new_version"),r("name"),r("new_schema"),r("name"),r("member_object"),r("name"),r("member_object"),r("where member_object is:"),r("object_name"),r("aggregate_name"),r("aggregate_signature"),r("source_type"),r("target_type"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("function_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("operator_name"),r("left_type"),r("right_type"),r("object_name"),r("index_method"),r("object_name"),r("index_method"),r("object_name"),r("procedure_name"),r("argmode"),r("argname"),r("argtype"),r("routine_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("type_name"),r("lang_name"),r("object_name"),r("object_name"),r("and aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function d_(n){_(n,`ALTER FOREIGN DATA WRAPPER %s
    [ HANDLER %s | NO HANDLER ]
    [ VALIDATOR %s | NO VALIDATOR ]
    [ OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ]) ]
ALTER FOREIGN DATA WRAPPER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER FOREIGN DATA WRAPPER %s RENAME TO %s`,r("name"),r("handler_function"),r("validator_function"),r("option"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"))}function p_(n){_(n,`ALTER FOREIGN TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    %s [, ... ]
ALTER FOREIGN TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME [ COLUMN ] %s TO %s
ALTER FOREIGN TABLE [ IF EXISTS ] %s
    RENAME TO %s
ALTER FOREIGN TABLE [ IF EXISTS ] %s
    SET SCHEMA %s

%s

    ADD [ COLUMN ] %s %s [ COLLATE %s ] [ %s [ ... ] ]
    DROP [ COLUMN ] [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
    ALTER [ COLUMN ] %s [ SET DATA ] TYPE %s [ COLLATE %s ]
    ALTER [ COLUMN ] %s SET DEFAULT %s
    ALTER [ COLUMN ] %s DROP DEFAULT
    ALTER [ COLUMN ] %s { SET | DROP } NOT NULL
    ALTER [ COLUMN ] %s SET STATISTICS %s
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ])
    ADD %s [ NOT VALID ]
    VALIDATE CONSTRAINT %s
    DROP CONSTRAINT [ IF EXISTS ]  %s [ RESTRICT | CASCADE ]
    DISABLE TRIGGER [ %s | ALL | USER ]
    ENABLE TRIGGER [ %s | ALL | USER ]
    ENABLE REPLICA TRIGGER %s
    ENABLE ALWAYS TRIGGER %s
    SET WITHOUT OIDS
    INHERIT %s
    NO INHERIT %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
    OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ])`,r("name"),r("action"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("where action is one of:"),r("column_name"),r("data_type"),r("collation"),r("column_constraint"),r("column_name"),r("column_name"),r("data_type"),r("collation"),r("column_name"),r("expression"),r("column_name"),r("column_name"),r("column_name"),r("integer"),r("column_name"),r("attribute_option"),r("value"),r("column_name"),r("attribute_option"),r("column_name"),r("column_name"),r("option"),r("value"),r("table_constraint"),r("constraint_name"),r("constraint_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("parent_table"),r("parent_table"),r("new_owner"),r("option"),r("value"))}function g_(n){_(n,`ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    CALLED ON NULL INPUT | RETURNS NULL ON NULL INPUT | STRICT
    IMMUTABLE | STABLE | VOLATILE
    [ NOT ] LEAKPROOF
    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    PARALLEL { UNSAFE | RESTRICTED | SAFE }
    COST %s
    ROWS %s
    SUPPORT %s
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,r("name"),r("argmode"),r("argname"),r("argtype"),r("action"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_name"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_owner"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_schema"),r("name"),r("argmode"),r("argname"),r("argtype"),r("extension_name"),r("where action is one of:"),r("execution_cost"),r("result_rows"),r("support_function"),r("configuration_parameter"),r("value"),r("configuration_parameter"),r("configuration_parameter"))}function m_(n){_(n,`ALTER GROUP %s ADD USER %s [, ... ]
ALTER GROUP %s DROP USER %s [, ... ]

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER

ALTER GROUP %s RENAME TO %s`,r("role_specification"),r("user_name"),r("role_specification"),r("user_name"),r("where role_specification can be:"),r("role_name"),r("group_name"),r("new_name"))}function E_(n){_(n,`ALTER INDEX [ IF EXISTS ] %s RENAME TO %s
ALTER INDEX [ IF EXISTS ] %s SET TABLESPACE %s
ALTER INDEX %s ATTACH PARTITION %s
ALTER INDEX %s [ NO ] DEPENDS ON EXTENSION %s
ALTER INDEX [ IF EXISTS ] %s SET ( %s [= %s] [, ... ] )
ALTER INDEX [ IF EXISTS ] %s RESET ( %s [, ... ] )
ALTER INDEX [ IF EXISTS ] %s ALTER [ COLUMN ] %s
    SET STATISTICS %s
ALTER INDEX ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]`,r("name"),r("new_name"),r("name"),r("tablespace_name"),r("name"),r("index_name"),r("name"),r("extension_name"),r("name"),r("storage_parameter"),r("value"),r("name"),r("storage_parameter"),r("name"),r("column_number"),r("integer"),r("name"),r("role_name"),r("new_tablespace"))}function T_(n){_(n,`ALTER [ PROCEDURAL ] LANGUAGE %s RENAME TO %s
ALTER [ PROCEDURAL ] LANGUAGE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("name"),r("new_name"),r("name"),r("new_owner"))}function S_(n){_(n,"ALTER LARGE OBJECT %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }",r("large_object_oid"),r("new_owner"))}function A_(n){_(n,`ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    %s [, ... ]
ALTER MATERIALIZED VIEW %s
    [ NO ] DEPENDS ON EXTENSION %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    RENAME [ COLUMN ] %s TO %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    RENAME TO %s
ALTER MATERIALIZED VIEW [ IF EXISTS ] %s
    SET SCHEMA %s
ALTER MATERIALIZED VIEW ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]

%s

    ALTER [ COLUMN ] %s SET STATISTICS %s
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s SET COMPRESSION %s
    CLUSTER ON %s
    SET WITHOUT CLUSTER
    SET ACCESS METHOD %s
    SET TABLESPACE %s
    SET ( %s [= %s] [, ... ] )
    RESET ( %s [, ... ] )
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("name"),r("action"),r("name"),r("extension_name"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("role_name"),r("new_tablespace"),r("where action is one of:"),r("column_name"),r("integer"),r("column_name"),r("attribute_option"),r("value"),r("column_name"),r("attribute_option"),r("column_name"),r("column_name"),r("compression_method"),r("index_name"),r("new_access_method"),r("new_tablespace"),r("storage_parameter"),r("value"),r("storage_parameter"),r("new_owner"))}function R_(n){_(n,`ALTER OPERATOR %s ( { %s | NONE } , %s )
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR %s ( { %s | NONE } , %s )
    SET SCHEMA %s

ALTER OPERATOR %s ( { %s | NONE } , %s )
    SET ( {  RESTRICT = { %s | NONE }
           | JOIN = { %s | NONE }
         } [, ... ] )`,r("name"),r("left_type"),r("right_type"),r("new_owner"),r("name"),r("left_type"),r("right_type"),r("new_schema"),r("name"),r("left_type"),r("right_type"),r("res_proc"),r("join_proc"))}function __(n){_(n,`ALTER OPERATOR CLASS %s USING %s
    RENAME TO %s

ALTER OPERATOR CLASS %s USING %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR CLASS %s USING %s
    SET SCHEMA %s`,r("name"),r("index_method"),r("new_name"),r("name"),r("index_method"),r("new_owner"),r("name"),r("index_method"),r("new_schema"))}function O_(n){_(n,`ALTER OPERATOR FAMILY %s USING %s ADD
  {  OPERATOR %s %s ( %s, %s )
              [ FOR SEARCH | FOR ORDER BY %s ]
   | FUNCTION %s [ ( %s [ , %s ] ) ]
              %s [ ( %s [, ...] ) ]
  } [, ... ]

ALTER OPERATOR FAMILY %s USING %s DROP
  {  OPERATOR %s ( %s [ , %s ] )
   | FUNCTION %s ( %s [ , %s ] )
  } [, ... ]

ALTER OPERATOR FAMILY %s USING %s
    RENAME TO %s

ALTER OPERATOR FAMILY %s USING %s
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }

ALTER OPERATOR FAMILY %s USING %s
    SET SCHEMA %s`,r("name"),r("index_method"),r("strategy_number"),r("operator_name"),r("op_type"),r("op_type"),r("sort_family_name"),r("support_number"),r("op_type"),r("op_type"),r("function_name"),r("argument_type"),r("name"),r("index_method"),r("strategy_number"),r("op_type"),r("op_type"),r("support_number"),r("op_type"),r("op_type"),r("name"),r("index_method"),r("new_name"),r("name"),r("index_method"),r("new_owner"),r("name"),r("index_method"),r("new_schema"))}function N_(n){_(n,`ALTER POLICY %s ON %s RENAME TO %s

ALTER POLICY %s ON %s
    [ TO { %s | PUBLIC | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] ]
    [ USING ( %s ) ]
    [ WITH CHECK ( %s ) ]`,r("name"),r("table_name"),r("new_name"),r("name"),r("table_name"),r("role_name"),r("using_expression"),r("check_expression"))}function b_(n){_(n,`ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,r("name"),r("argmode"),r("argname"),r("argtype"),r("action"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_name"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_owner"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_schema"),r("name"),r("argmode"),r("argname"),r("argtype"),r("extension_name"),r("where action is one of:"),r("configuration_parameter"),r("value"),r("configuration_parameter"),r("configuration_parameter"))}function y_(n){_(n,`ALTER PUBLICATION %s ADD %s [, ...]
ALTER PUBLICATION %s SET %s [, ...]
ALTER PUBLICATION %s DROP %s [, ...]
ALTER PUBLICATION %s SET ( %s [= %s] [, ... ] )
ALTER PUBLICATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER PUBLICATION %s RENAME TO %s

%s

    TABLE [ ONLY ] %s [ * ] [ ( %s [, ... ] ) ] [ WHERE ( %s ) ] [, ... ]
    TABLES IN SCHEMA { %s | CURRENT_SCHEMA } [, ... ]`,r("name"),r("publication_object"),r("name"),r("publication_object"),r("name"),r("publication_object"),r("name"),r("publication_parameter"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"),r("where publication_object is one of:"),r("table_name"),r("column_name"),r("expression"),r("schema_name"))}function C_(n){_(n,`ALTER ROLE %s [ WITH ] %s [ ... ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'

ALTER ROLE %s RENAME TO %s

ALTER ROLE { %s | ALL } [ IN DATABASE %s ] SET %s { TO | = } { %s | DEFAULT }
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] SET %s FROM CURRENT
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] RESET %s
ALTER ROLE { %s | ALL } [ IN DATABASE %s ] RESET ALL

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("role_specification"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("name"),r("new_name"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("value"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("where role_specification can be:"),r("role_name"))}function L_(n){_(n,`ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    %s [ ... ] [ RESTRICT ]
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    RENAME TO %s
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    SET SCHEMA %s
ALTER ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ]
    [ NO ] DEPENDS ON EXTENSION %s

%s

    IMMUTABLE | STABLE | VOLATILE
    [ NOT ] LEAKPROOF
    [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    PARALLEL { UNSAFE | RESTRICTED | SAFE }
    COST %s
    ROWS %s
    SET %s { TO | = } { %s | DEFAULT }
    SET %s FROM CURRENT
    RESET %s
    RESET ALL`,r("name"),r("argmode"),r("argname"),r("argtype"),r("action"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_name"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_owner"),r("name"),r("argmode"),r("argname"),r("argtype"),r("new_schema"),r("name"),r("argmode"),r("argname"),r("argtype"),r("extension_name"),r("where action is one of:"),r("execution_cost"),r("result_rows"),r("configuration_parameter"),r("value"),r("configuration_parameter"),r("configuration_parameter"))}function I_(n){_(n,"ALTER RULE %s ON %s RENAME TO %s",r("name"),r("table_name"),r("new_name"))}function w_(n){_(n,`ALTER SCHEMA %s RENAME TO %s
ALTER SCHEMA %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("name"),r("new_name"),r("name"),r("new_owner"))}function x_(n){_(n,`ALTER SEQUENCE [ IF EXISTS ] %s
    [ AS %s ]
    [ INCREMENT [ BY ] %s ]
    [ MINVALUE %s | NO MINVALUE ] [ MAXVALUE %s | NO MAXVALUE ]
    [ START [ WITH ] %s ]
    [ RESTART [ [ WITH ] %s ] ]
    [ CACHE %s ] [ [ NO ] CYCLE ]
    [ OWNED BY { %s.%s | NONE } ]
ALTER SEQUENCE [ IF EXISTS ] %s SET { LOGGED | UNLOGGED }
ALTER SEQUENCE [ IF EXISTS ] %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SEQUENCE [ IF EXISTS ] %s RENAME TO %s
ALTER SEQUENCE [ IF EXISTS ] %s SET SCHEMA %s`,r("name"),r("data_type"),r("increment"),r("minvalue"),r("maxvalue"),r("start"),r("restart"),r("cache"),r("table_name"),r("column_name"),r("name"),r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"))}function v_(n){_(n,`ALTER SERVER %s [ VERSION '%s' ]
    [ OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ] ) ]
ALTER SERVER %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SERVER %s RENAME TO %s`,r("name"),r("new_version"),r("option"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"))}function D_(n){_(n,`ALTER STATISTICS %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER STATISTICS %s RENAME TO %s
ALTER STATISTICS %s SET SCHEMA %s
ALTER STATISTICS %s SET STATISTICS %s`,r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("new_target"))}function k_(n){_(n,`ALTER SUBSCRIPTION %s CONNECTION '%s'
ALTER SUBSCRIPTION %s SET PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s ADD PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s DROP PUBLICATION %s [, ...] [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s REFRESH PUBLICATION [ WITH ( %s [= %s] [, ... ] ) ]
ALTER SUBSCRIPTION %s ENABLE
ALTER SUBSCRIPTION %s DISABLE
ALTER SUBSCRIPTION %s SET ( %s [= %s] [, ... ] )
ALTER SUBSCRIPTION %s SKIP ( %s = %s )
ALTER SUBSCRIPTION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER SUBSCRIPTION %s RENAME TO %s`,r("name"),r("conninfo"),r("name"),r("publication_name"),r("publication_option"),r("value"),r("name"),r("publication_name"),r("publication_option"),r("value"),r("name"),r("publication_name"),r("publication_option"),r("value"),r("name"),r("refresh_option"),r("value"),r("name"),r("name"),r("name"),r("subscription_parameter"),r("value"),r("name"),r("skip_option"),r("value"),r("name"),r("new_owner"),r("name"),r("new_name"))}function P_(n){_(n,`ALTER SYSTEM SET %s { TO | = } { %s | '%s' | DEFAULT }

ALTER SYSTEM RESET %s
ALTER SYSTEM RESET ALL`,r("configuration_parameter"),r("value"),r("value"),r("configuration_parameter"))}function M_(n){_(n,`ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    %s [, ... ]
ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME [ COLUMN ] %s TO %s
ALTER TABLE [ IF EXISTS ] [ ONLY ] %s [ * ]
    RENAME CONSTRAINT %s TO %s
ALTER TABLE [ IF EXISTS ] %s
    RENAME TO %s
ALTER TABLE [ IF EXISTS ] %s
    SET SCHEMA %s
ALTER TABLE ALL IN TABLESPACE %s [ OWNED BY %s [, ... ] ]
    SET TABLESPACE %s [ NOWAIT ]
ALTER TABLE [ IF EXISTS ] %s
    ATTACH PARTITION %s { FOR VALUES %s | DEFAULT }
ALTER TABLE [ IF EXISTS ] %s
    DETACH PARTITION %s [ CONCURRENTLY | FINALIZE ]

%s

    ADD [ COLUMN ] [ IF NOT EXISTS ] %s %s [ COLLATE %s ] [ %s [ ... ] ]
    DROP [ COLUMN ] [ IF EXISTS ] %s [ RESTRICT | CASCADE ]
    ALTER [ COLUMN ] %s [ SET DATA ] TYPE %s [ COLLATE %s ] [ USING %s ]
    ALTER [ COLUMN ] %s SET DEFAULT %s
    ALTER [ COLUMN ] %s DROP DEFAULT
    ALTER [ COLUMN ] %s { SET | DROP } NOT NULL
    ALTER [ COLUMN ] %s DROP EXPRESSION [ IF EXISTS ]
    ALTER [ COLUMN ] %s ADD GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ]
    ALTER [ COLUMN ] %s { SET GENERATED { ALWAYS | BY DEFAULT } | SET %s | RESTART [ [ WITH ] %s ] } [...]
    ALTER [ COLUMN ] %s DROP IDENTITY [ IF EXISTS ]
    ALTER [ COLUMN ] %s SET STATISTICS %s
    ALTER [ COLUMN ] %s SET ( %s = %s [, ... ] )
    ALTER [ COLUMN ] %s RESET ( %s [, ... ] )
    ALTER [ COLUMN ] %s SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT }
    ALTER [ COLUMN ] %s SET COMPRESSION %s
    ADD %s [ NOT VALID ]
    ADD %s
    ALTER CONSTRAINT %s [ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]
    VALIDATE CONSTRAINT %s
    DROP CONSTRAINT [ IF EXISTS ]  %s [ RESTRICT | CASCADE ]
    DISABLE TRIGGER [ %s | ALL | USER ]
    ENABLE TRIGGER [ %s | ALL | USER ]
    ENABLE REPLICA TRIGGER %s
    ENABLE ALWAYS TRIGGER %s
    DISABLE RULE %s
    ENABLE RULE %s
    ENABLE REPLICA RULE %s
    ENABLE ALWAYS RULE %s
    DISABLE ROW LEVEL SECURITY
    ENABLE ROW LEVEL SECURITY
    FORCE ROW LEVEL SECURITY
    NO FORCE ROW LEVEL SECURITY
    CLUSTER ON %s
    SET WITHOUT CLUSTER
    SET WITHOUT OIDS
    SET ACCESS METHOD %s
    SET TABLESPACE %s
    SET { LOGGED | UNLOGGED }
    SET ( %s [= %s] [, ... ] )
    RESET ( %s [, ... ] )
    INHERIT %s
    NO INHERIT %s
    OF %s
    NOT OF
    OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
    REPLICA IDENTITY { DEFAULT | USING INDEX %s | FULL | NOTHING }

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED |
  GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] %s |
  PRIMARY KEY %s |
  REFERENCES %s [ ( %s ) ] [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ]
    [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ CONSTRAINT %s ]
{ CHECK ( %s ) [ NO INHERIT ] |
  NOT NULL %s [ NO INHERIT ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] ( %s [, ... ] ) %s |
  PRIMARY KEY ( %s [, ... ] ) %s |
  EXCLUDE [ USING %s ] ( %s WITH %s [, ... ] ) %s [ WHERE ( %s ) ] |
  FOREIGN KEY ( %s [, ... ] ) REFERENCES %s [ ( %s [, ... ] ) ]
    [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ] [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

    [ CONSTRAINT %s ]
    { UNIQUE | PRIMARY KEY } USING INDEX %s
    [ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ INCLUDE ( %s [, ... ] ) ]
[ WITH ( %s [= %s] [, ... ] ) ]
[ USING INDEX TABLESPACE %s ]

%s

{ %s | ( %s ) } [ %s ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ]

%s

{ NO ACTION | RESTRICT | CASCADE | SET NULL [ ( %s [, ... ] ) ] | SET DEFAULT [ ( %s [, ... ] ) ] }`,r("name"),r("action"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("constraint_name"),r("new_constraint_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("role_name"),r("new_tablespace"),r("name"),r("partition_name"),r("partition_bound_spec"),r("name"),r("partition_name"),r("where action is one of:"),r("column_name"),r("data_type"),r("collation"),r("column_constraint"),r("column_name"),r("column_name"),r("data_type"),r("collation"),r("expression"),r("column_name"),r("expression"),r("column_name"),r("column_name"),r("column_name"),r("column_name"),r("sequence_options"),r("column_name"),r("sequence_option"),r("restart"),r("column_name"),r("column_name"),r("integer"),r("column_name"),r("attribute_option"),r("value"),r("column_name"),r("attribute_option"),r("column_name"),r("column_name"),r("compression_method"),r("table_constraint"),r("table_constraint_using_index"),r("constraint_name"),r("constraint_name"),r("constraint_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("trigger_name"),r("rewrite_rule_name"),r("rewrite_rule_name"),r("rewrite_rule_name"),r("rewrite_rule_name"),r("index_name"),r("new_access_method"),r("new_tablespace"),r("storage_parameter"),r("value"),r("storage_parameter"),r("parent_table"),r("parent_table"),r("type_name"),r("new_owner"),r("index_name"),r("and partition_bound_spec is:"),r("partition_bound_expr"),r("partition_bound_expr"),r("partition_bound_expr"),r("numeric_literal"),r("numeric_literal"),r("and column_constraint is:"),r("constraint_name"),r("expression"),r("default_expr"),r("generation_expr"),r("sequence_options"),r("index_parameters"),r("index_parameters"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and table_constraint is:"),r("constraint_name"),r("expression"),r("column_name"),r("column_name"),r("index_parameters"),r("column_name"),r("index_parameters"),r("index_method"),r("exclude_element"),r("operator"),r("index_parameters"),r("predicate"),r("column_name"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and table_constraint_using_index is:"),r("constraint_name"),r("index_name"),r("index_parameters in UNIQUE, PRIMARY KEY, and EXCLUDE constraints are:"),r("column_name"),r("storage_parameter"),r("value"),r("tablespace_name"),r("exclude_element in an EXCLUDE constraint is:"),r("column_name"),r("expression"),r("opclass"),r("referential_action in a FOREIGN KEY/REFERENCES constraint is:"),r("column_name"),r("column_name"))}function U_(n){_(n,`ALTER TABLESPACE %s RENAME TO %s
ALTER TABLESPACE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TABLESPACE %s SET ( %s = %s [, ... ] )
ALTER TABLESPACE %s RESET ( %s [, ... ] )`,r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("tablespace_option"),r("value"),r("name"),r("tablespace_option"))}function F_(n){_(n,`ALTER TEXT SEARCH CONFIGURATION %s
    ADD MAPPING FOR %s [, ... ] WITH %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING FOR %s [, ... ] WITH %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING REPLACE %s WITH %s
ALTER TEXT SEARCH CONFIGURATION %s
    ALTER MAPPING FOR %s [, ... ] REPLACE %s WITH %s
ALTER TEXT SEARCH CONFIGURATION %s
    DROP MAPPING [ IF EXISTS ] FOR %s [, ... ]
ALTER TEXT SEARCH CONFIGURATION %s RENAME TO %s
ALTER TEXT SEARCH CONFIGURATION %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TEXT SEARCH CONFIGURATION %s SET SCHEMA %s`,r("name"),r("token_type"),r("dictionary_name"),r("name"),r("token_type"),r("dictionary_name"),r("name"),r("old_dictionary"),r("new_dictionary"),r("name"),r("token_type"),r("old_dictionary"),r("new_dictionary"),r("name"),r("token_type"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function B_(n){_(n,`ALTER TEXT SEARCH DICTIONARY %s (
    %s [ = %s ] [, ... ]
)
ALTER TEXT SEARCH DICTIONARY %s RENAME TO %s
ALTER TEXT SEARCH DICTIONARY %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TEXT SEARCH DICTIONARY %s SET SCHEMA %s`,r("name"),r("option"),r("value"),r("name"),r("new_name"),r("name"),r("new_owner"),r("name"),r("new_schema"))}function H_(n){_(n,`ALTER TEXT SEARCH PARSER %s RENAME TO %s
ALTER TEXT SEARCH PARSER %s SET SCHEMA %s`,r("name"),r("new_name"),r("name"),r("new_schema"))}function W_(n){_(n,`ALTER TEXT SEARCH TEMPLATE %s RENAME TO %s
ALTER TEXT SEARCH TEMPLATE %s SET SCHEMA %s`,r("name"),r("new_name"),r("name"),r("new_schema"))}function G_(n){_(n,`ALTER TRIGGER %s ON %s RENAME TO %s
ALTER TRIGGER %s ON %s [ NO ] DEPENDS ON EXTENSION %s`,r("name"),r("table_name"),r("new_name"),r("name"),r("table_name"),r("extension_name"))}function V_(n){_(n,`ALTER TYPE %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER TYPE %s RENAME TO %s
ALTER TYPE %s SET SCHEMA %s
ALTER TYPE %s RENAME ATTRIBUTE %s TO %s [ CASCADE | RESTRICT ]
ALTER TYPE %s %s [, ... ]
ALTER TYPE %s ADD VALUE [ IF NOT EXISTS ] %s [ { BEFORE | AFTER } %s ]
ALTER TYPE %s RENAME VALUE %s TO %s
ALTER TYPE %s SET ( %s = %s [, ... ] )

%s

    ADD ATTRIBUTE %s %s [ COLLATE %s ] [ CASCADE | RESTRICT ]
    DROP ATTRIBUTE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]
    ALTER ATTRIBUTE %s [ SET DATA ] TYPE %s [ COLLATE %s ] [ CASCADE | RESTRICT ]`,r("name"),r("new_owner"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("attribute_name"),r("new_attribute_name"),r("name"),r("action"),r("name"),r("new_enum_value"),r("neighbor_enum_value"),r("name"),r("existing_enum_value"),r("new_enum_value"),r("name"),r("property"),r("value"),r("where action is one of:"),r("attribute_name"),r("data_type"),r("collation"),r("attribute_name"),r("attribute_name"),r("data_type"),r("collation"))}function q_(n){_(n,`ALTER USER %s [ WITH ] %s [ ... ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'

ALTER USER %s RENAME TO %s

ALTER USER { %s | ALL } [ IN DATABASE %s ] SET %s { TO | = } { %s | DEFAULT }
ALTER USER { %s | ALL } [ IN DATABASE %s ] SET %s FROM CURRENT
ALTER USER { %s | ALL } [ IN DATABASE %s ] RESET %s
ALTER USER { %s | ALL } [ IN DATABASE %s ] RESET ALL

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("role_specification"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("name"),r("new_name"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("value"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("configuration_parameter"),r("role_specification"),r("database_name"),r("where role_specification can be:"),r("role_name"))}function Y_(n){_(n,`ALTER USER MAPPING FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | SESSION_USER | PUBLIC }
    SERVER %s
    OPTIONS ( [ ADD | SET | DROP ] %s ['%s'] [, ... ] )`,r("user_name"),r("server_name"),r("option"),r("value"))}function j_(n){_(n,`ALTER VIEW [ IF EXISTS ] %s ALTER [ COLUMN ] %s SET DEFAULT %s
ALTER VIEW [ IF EXISTS ] %s ALTER [ COLUMN ] %s DROP DEFAULT
ALTER VIEW [ IF EXISTS ] %s OWNER TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }
ALTER VIEW [ IF EXISTS ] %s RENAME [ COLUMN ] %s TO %s
ALTER VIEW [ IF EXISTS ] %s RENAME TO %s
ALTER VIEW [ IF EXISTS ] %s SET SCHEMA %s
ALTER VIEW [ IF EXISTS ] %s SET ( %s [= %s] [, ... ] )
ALTER VIEW [ IF EXISTS ] %s RESET ( %s [, ... ] )`,r("name"),r("column_name"),r("expression"),r("name"),r("column_name"),r("name"),r("new_owner"),r("name"),r("column_name"),r("new_column_name"),r("name"),r("new_name"),r("name"),r("new_schema"),r("name"),r("view_option_name"),r("view_option_value"),r("name"),r("view_option_name"))}function X_(n){_(n,`ANALYZE [ ( %s [, ...] ) ] [ %s [, ...] ]

%s

    VERBOSE [ %s ]
    SKIP_LOCKED [ %s ]
    BUFFER_USAGE_LIMIT %s

%s

    %s [ ( %s [, ...] ) ]`,r("option"),r("table_and_columns"),r("where option can be one of:"),r("boolean"),r("boolean"),r("size"),r("and table_and_columns is:"),r("table_name"),r("column_name"))}function z_(n){_(n,`BEGIN [ WORK | TRANSACTION ] [ %s [, ...] ]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,r("transaction_mode"),r("where transaction_mode is one of:"))}function K_(n){_(n,"CALL %s ( [ %s ] [, ...] )",r("name"),r("argument"))}function $_(n){_(n,"CHECKPOINT")}function J_(n){_(n,"CLOSE { %s | ALL }",r("name"))}function Q_(n){_(n,`CLUSTER [ ( %s [, ...] ) ] [ %s [ USING %s ] ]

%s

    VERBOSE [ %s ]`,r("option"),r("table_name"),r("index_name"),r("where option can be one of:"),r("boolean"))}function Z_(n){_(n,`COMMENT ON
{
  ACCESS METHOD %s |
  AGGREGATE %s ( %s ) |
  CAST (%s AS %s) |
  COLLATION %s |
  COLUMN %s.%s |
  CONSTRAINT %s ON %s |
  CONSTRAINT %s ON DOMAIN %s |
  CONVERSION %s |
  DATABASE %s |
  DOMAIN %s |
  EXTENSION %s |
  EVENT TRIGGER %s |
  FOREIGN DATA WRAPPER %s |
  FOREIGN TABLE %s |
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  INDEX %s |
  LARGE OBJECT %s |
  MATERIALIZED VIEW %s |
  OPERATOR %s (%s, %s) |
  OPERATOR CLASS %s USING %s |
  OPERATOR FAMILY %s USING %s |
  POLICY %s ON %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  PUBLICATION %s |
  ROLE %s |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  RULE %s ON %s |
  SCHEMA %s |
  SEQUENCE %s |
  SERVER %s |
  STATISTICS %s |
  SUBSCRIPTION %s |
  TABLE %s |
  TABLESPACE %s |
  TEXT SEARCH CONFIGURATION %s |
  TEXT SEARCH DICTIONARY %s |
  TEXT SEARCH PARSER %s |
  TEXT SEARCH TEMPLATE %s |
  TRANSFORM FOR %s LANGUAGE %s |
  TRIGGER %s ON %s |
  TYPE %s |
  VIEW %s
} IS { %s | NULL }

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("object_name"),r("aggregate_name"),r("aggregate_signature"),r("source_type"),r("target_type"),r("object_name"),r("relation_name"),r("column_name"),r("constraint_name"),r("table_name"),r("constraint_name"),r("domain_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("function_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("large_object_oid"),r("object_name"),r("operator_name"),r("left_type"),r("right_type"),r("object_name"),r("index_method"),r("object_name"),r("index_method"),r("policy_name"),r("table_name"),r("object_name"),r("procedure_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("routine_name"),r("argmode"),r("argname"),r("argtype"),r("rule_name"),r("table_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("type_name"),r("lang_name"),r("trigger_name"),r("table_name"),r("object_name"),r("object_name"),r("string_literal"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function eO(n){_(n,"COMMIT [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function tO(n){_(n,"COMMIT PREPARED %s",r("transaction_id"))}function nO(n){_(n,`COPY %s [ ( %s [, ...] ) ]
    FROM { '%s' | PROGRAM '%s' | STDIN }
    [ [ WITH ] ( %s [, ...] ) ]
    [ WHERE %s ]

COPY { %s [ ( %s [, ...] ) ] | ( %s ) }
    TO { '%s' | PROGRAM '%s' | STDOUT }
    [ [ WITH ] ( %s [, ...] ) ]

%s

    FORMAT %s
    FREEZE [ %s ]
    DELIMITER '%s'
    NULL '%s'
    DEFAULT '%s'
    HEADER [ %s | MATCH ]
    QUOTE '%s'
    ESCAPE '%s'
    FORCE_QUOTE { ( %s [, ...] ) | * }
    FORCE_NOT_NULL ( %s [, ...] )
    FORCE_NULL ( %s [, ...] )
    ENCODING '%s'`,r("table_name"),r("column_name"),r("filename"),r("command"),r("option"),r("condition"),r("table_name"),r("column_name"),r("query"),r("filename"),r("command"),r("option"),r("where option can be one of:"),r("format_name"),r("boolean"),r("delimiter_character"),r("null_string"),r("default_string"),r("boolean"),r("quote_character"),r("escape_character"),r("column_name"),r("column_name"),r("column_name"),r("encoding_name"))}function iO(n){_(n,`CREATE ACCESS METHOD %s
    TYPE %s
    HANDLER %s`,r("name"),r("access_method_type"),r("handler_function"))}function sO(n){_(n,`CREATE [ OR REPLACE ] AGGREGATE %s ( [ %s ] [ %s ] %s [ , ... ] ) (
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , COMBINEFUNC = %s ]
    [ , SERIALFUNC = %s ]
    [ , DESERIALFUNC = %s ]
    [ , INITCOND = %s ]
    [ , MSFUNC = %s ]
    [ , MINVFUNC = %s ]
    [ , MSTYPE = %s ]
    [ , MSSPACE = %s ]
    [ , MFINALFUNC = %s ]
    [ , MFINALFUNC_EXTRA ]
    [ , MFINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , MINITCOND = %s ]
    [ , SORTOP = %s ]
    [ , PARALLEL = { SAFE | RESTRICTED | UNSAFE } ]
)

CREATE [ OR REPLACE ] AGGREGATE %s ( [ [ %s ] [ %s ] %s [ , ... ] ]
                        ORDER BY [ %s ] [ %s ] %s [ , ... ] ) (
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , INITCOND = %s ]
    [ , PARALLEL = { SAFE | RESTRICTED | UNSAFE } ]
    [ , HYPOTHETICAL ]
)

%s

CREATE [ OR REPLACE ] AGGREGATE %s (
    BASETYPE = %s,
    SFUNC = %s,
    STYPE = %s
    [ , SSPACE = %s ]
    [ , FINALFUNC = %s ]
    [ , FINALFUNC_EXTRA ]
    [ , FINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , COMBINEFUNC = %s ]
    [ , SERIALFUNC = %s ]
    [ , DESERIALFUNC = %s ]
    [ , INITCOND = %s ]
    [ , MSFUNC = %s ]
    [ , MINVFUNC = %s ]
    [ , MSTYPE = %s ]
    [ , MSSPACE = %s ]
    [ , MFINALFUNC = %s ]
    [ , MFINALFUNC_EXTRA ]
    [ , MFINALFUNC_MODIFY = { READ_ONLY | SHAREABLE | READ_WRITE } ]
    [ , MINITCOND = %s ]
    [ , SORTOP = %s ]
)`,r("name"),r("argmode"),r("argname"),r("arg_data_type"),r("sfunc"),r("state_data_type"),r("state_data_size"),r("ffunc"),r("combinefunc"),r("serialfunc"),r("deserialfunc"),r("initial_condition"),r("msfunc"),r("minvfunc"),r("mstate_data_type"),r("mstate_data_size"),r("mffunc"),r("minitial_condition"),r("sort_operator"),r("name"),r("argmode"),r("argname"),r("arg_data_type"),r("argmode"),r("argname"),r("arg_data_type"),r("sfunc"),r("state_data_type"),r("state_data_size"),r("ffunc"),r("initial_condition"),r("or the old syntax"),r("name"),r("base_type"),r("sfunc"),r("state_data_type"),r("state_data_size"),r("ffunc"),r("combinefunc"),r("serialfunc"),r("deserialfunc"),r("initial_condition"),r("msfunc"),r("minvfunc"),r("mstate_data_type"),r("mstate_data_size"),r("mffunc"),r("minitial_condition"),r("sort_operator"))}function rO(n){_(n,`CREATE CAST (%s AS %s)
    WITH FUNCTION %s [ (%s [, ...]) ]
    [ AS ASSIGNMENT | AS IMPLICIT ]

CREATE CAST (%s AS %s)
    WITHOUT FUNCTION
    [ AS ASSIGNMENT | AS IMPLICIT ]

CREATE CAST (%s AS %s)
    WITH INOUT
    [ AS ASSIGNMENT | AS IMPLICIT ]`,r("source_type"),r("target_type"),r("function_name"),r("argument_type"),r("source_type"),r("target_type"),r("source_type"),r("target_type"))}function oO(n){_(n,`CREATE COLLATION [ IF NOT EXISTS ] %s (
    [ LOCALE = %s, ]
    [ LC_COLLATE = %s, ]
    [ LC_CTYPE = %s, ]
    [ PROVIDER = %s, ]
    [ DETERMINISTIC = %s, ]
    [ RULES = %s, ]
    [ VERSION = %s ]
)
CREATE COLLATION [ IF NOT EXISTS ] %s FROM %s`,r("name"),r("locale"),r("lc_collate"),r("lc_ctype"),r("provider"),r("boolean"),r("rules"),r("version"),r("name"),r("existing_collation"))}function aO(n){_(n,`CREATE [ DEFAULT ] CONVERSION %s
    FOR %s TO %s FROM %s`,r("name"),r("source_encoding"),r("dest_encoding"),r("function_name"))}function lO(n){_(n,`CREATE DATABASE %s
    [ WITH ] [ OWNER [=] %s ]
           [ TEMPLATE [=] %s ]
           [ ENCODING [=] %s ]
           [ STRATEGY [=] %s ] ]
           [ LOCALE [=] %s ]
           [ LC_COLLATE [=] %s ]
           [ LC_CTYPE [=] %s ]
           [ ICU_LOCALE [=] %s ]
           [ ICU_RULES [=] %s ]
           [ LOCALE_PROVIDER [=] %s ]
           [ COLLATION_VERSION = %s ]
           [ TABLESPACE [=] %s ]
           [ ALLOW_CONNECTIONS [=] %s ]
           [ CONNECTION LIMIT [=] %s ]
           [ IS_TEMPLATE [=] %s ]
           [ OID [=] %s ]`,r("name"),r("user_name"),r("template"),r("encoding"),r("strategy"),r("locale"),r("lc_collate"),r("lc_ctype"),r("icu_locale"),r("icu_rules"),r("locale_provider"),r("collation_version"),r("tablespace_name"),r("allowconn"),r("connlimit"),r("istemplate"),r("oid"))}function cO(n){_(n,`CREATE DOMAIN %s [ AS ] %s
    [ COLLATE %s ]
    [ DEFAULT %s ]
    [ %s [ ... ] ]

%s

[ CONSTRAINT %s ]
{ NOT NULL | NULL | CHECK (%s) }`,r("name"),r("data_type"),r("collation"),r("expression"),r("constraint"),r("where constraint is:"),r("constraint_name"),r("expression"))}function hO(n){_(n,`CREATE EVENT TRIGGER %s
    ON %s
    [ WHEN %s IN (%s [, ... ]) [ AND ... ] ]
    EXECUTE { FUNCTION | PROCEDURE } %s()`,r("name"),r("event"),r("filter_variable"),r("filter_value"),r("function_name"))}function fO(n){_(n,`CREATE EXTENSION [ IF NOT EXISTS ] %s
    [ WITH ] [ SCHEMA %s ]
             [ VERSION %s ]
             [ CASCADE ]`,r("extension_name"),r("schema_name"),r("version"))}function uO(n){_(n,`CREATE FOREIGN DATA WRAPPER %s
    [ HANDLER %s | NO HANDLER ]
    [ VALIDATOR %s | NO VALIDATOR ]
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,r("name"),r("handler_function"),r("validator_function"),r("option"),r("value"))}function dO(n){_(n,`CREATE FOREIGN TABLE [ IF NOT EXISTS ] %s ( [
  { %s %s [ OPTIONS ( %s '%s' [, ... ] ) ] [ COLLATE %s ] [ %s [ ... ] ]
    | %s }
    [, ... ]
] )
[ INHERITS ( %s [, ... ] ) ]
  SERVER %s
[ OPTIONS ( %s '%s' [, ... ] ) ]

CREATE FOREIGN TABLE [ IF NOT EXISTS ] %s
  PARTITION OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ]
{ FOR VALUES %s | DEFAULT }
  SERVER %s
[ OPTIONS ( %s '%s' [, ... ] ) ]

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED }

%s

[ CONSTRAINT %s ]
CHECK ( %s ) [ NO INHERIT ]

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )`,r("table_name"),r("column_name"),r("data_type"),r("option"),r("value"),r("collation"),r("column_constraint"),r("table_constraint"),r("parent_table"),r("server_name"),r("option"),r("value"),r("table_name"),r("parent_table"),r("column_name"),r("column_constraint"),r("table_constraint"),r("partition_bound_spec"),r("server_name"),r("option"),r("value"),r("where column_constraint is:"),r("constraint_name"),r("expression"),r("default_expr"),r("generation_expr"),r("and table_constraint is:"),r("constraint_name"),r("expression"),r("and partition_bound_spec is:"),r("partition_bound_expr"),r("partition_bound_expr"),r("partition_bound_expr"),r("numeric_literal"),r("numeric_literal"))}function pO(n){_(n,`CREATE [ OR REPLACE ] FUNCTION
    %s ( [ [ %s ] [ %s ] %s [ { DEFAULT | = } %s ] [, ...] ] )
    [ RETURNS %s
      | RETURNS TABLE ( %s %s [, ...] ) ]
  { LANGUAGE %s
    | TRANSFORM { FOR TYPE %s } [, ... ]
    | WINDOW
    | { IMMUTABLE | STABLE | VOLATILE }
    | [ NOT ] LEAKPROOF
    | { CALLED ON NULL INPUT | RETURNS NULL ON NULL INPUT | STRICT }
    | { [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER }
    | PARALLEL { UNSAFE | RESTRICTED | SAFE }
    | COST %s
    | ROWS %s
    | SUPPORT %s
    | SET %s { TO %s | = %s | FROM CURRENT }
    | AS '%s'
    | AS '%s', '%s'
    | %s
  } ...`,r("name"),r("argmode"),r("argname"),r("argtype"),r("default_expr"),r("rettype"),r("column_name"),r("column_type"),r("lang_name"),r("type_name"),r("execution_cost"),r("result_rows"),r("support_function"),r("configuration_parameter"),r("value"),r("value"),r("definition"),r("obj_file"),r("link_symbol"),r("sql_body"))}function gO(n){_(n,`CREATE GROUP %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | IN GROUP %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | USER %s [, ...]
    | SYSID %s`,r("name"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("uid"))}function mO(n){_(n,`CREATE [ UNIQUE ] INDEX [ CONCURRENTLY ] [ [ IF NOT EXISTS ] %s ] ON [ ONLY ] %s [ USING %s ]
    ( { %s | ( %s ) } [ COLLATE %s ] [ %s [ ( %s = %s [, ... ] ) ] ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ] [, ...] )
    [ INCLUDE ( %s [, ...] ) ]
    [ NULLS [ NOT ] DISTINCT ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    [ TABLESPACE %s ]
    [ WHERE %s ]`,r("name"),r("table_name"),r("method"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("opclass_parameter"),r("value"),r("column_name"),r("storage_parameter"),r("value"),r("tablespace_name"),r("predicate"))}function EO(n){_(n,`CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE %s
    HANDLER %s [ INLINE %s ] [ VALIDATOR %s ]
CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE %s`,r("name"),r("call_handler"),r("inline_handler"),r("valfunction"),r("name"))}function TO(n){_(n,`CREATE MATERIALIZED VIEW [ IF NOT EXISTS ] %s
    [ (%s [, ...] ) ]
    [ USING %s ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    [ TABLESPACE %s ]
    AS %s
    [ WITH [ NO ] DATA ]`,r("table_name"),r("column_name"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("query"))}function SO(n){_(n,`CREATE OPERATOR %s (
    {FUNCTION|PROCEDURE} = %s
    [, LEFTARG = %s ] [, RIGHTARG = %s ]
    [, COMMUTATOR = %s ] [, NEGATOR = %s ]
    [, RESTRICT = %s ] [, JOIN = %s ]
    [, HASHES ] [, MERGES ]
)`,r("name"),r("function_name"),r("left_type"),r("right_type"),r("com_op"),r("neg_op"),r("res_proc"),r("join_proc"))}function AO(n){_(n,`CREATE OPERATOR CLASS %s [ DEFAULT ] FOR TYPE %s
  USING %s [ FAMILY %s ] AS
  {  OPERATOR %s %s [ ( %s, %s ) ] [ FOR SEARCH | FOR ORDER BY %s ]
   | FUNCTION %s [ ( %s [ , %s ] ) ] %s ( %s [, ...] )
   | STORAGE %s
  } [, ... ]`,r("name"),r("data_type"),r("index_method"),r("family_name"),r("strategy_number"),r("operator_name"),r("op_type"),r("op_type"),r("sort_family_name"),r("support_number"),r("op_type"),r("op_type"),r("function_name"),r("argument_type"),r("storage_type"))}function RO(n){_(n,"CREATE OPERATOR FAMILY %s USING %s",r("name"),r("index_method"))}function _O(n){_(n,`CREATE POLICY %s ON %s
    [ AS { PERMISSIVE | RESTRICTIVE } ]
    [ FOR { ALL | SELECT | INSERT | UPDATE | DELETE } ]
    [ TO { %s | PUBLIC | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] ]
    [ USING ( %s ) ]
    [ WITH CHECK ( %s ) ]`,r("name"),r("table_name"),r("role_name"),r("using_expression"),r("check_expression"))}function OO(n){_(n,`CREATE [ OR REPLACE ] PROCEDURE
    %s ( [ [ %s ] [ %s ] %s [ { DEFAULT | = } %s ] [, ...] ] )
  { LANGUAGE %s
    | TRANSFORM { FOR TYPE %s } [, ... ]
    | [ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
    | SET %s { TO %s | = %s | FROM CURRENT }
    | AS '%s'
    | AS '%s', '%s'
    | %s
  } ...`,r("name"),r("argmode"),r("argname"),r("argtype"),r("default_expr"),r("lang_name"),r("type_name"),r("configuration_parameter"),r("value"),r("value"),r("definition"),r("obj_file"),r("link_symbol"),r("sql_body"))}function NO(n){_(n,`CREATE PUBLICATION %s
    [ FOR ALL TABLES
      | FOR %s [, ... ] ]
    [ WITH ( %s [= %s] [, ... ] ) ]

%s

    TABLE [ ONLY ] %s [ * ] [ ( %s [, ... ] ) ] [ WHERE ( %s ) ] [, ... ]
    TABLES IN SCHEMA { %s | CURRENT_SCHEMA } [, ... ]`,r("name"),r("publication_object"),r("publication_parameter"),r("value"),r("where publication_object is one of:"),r("table_name"),r("column_name"),r("expression"),r("schema_name"))}function bO(n){_(n,`CREATE ROLE %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | IN GROUP %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | USER %s [, ...]
    | SYSID %s`,r("name"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("uid"))}function yO(n){_(n,`CREATE [ OR REPLACE ] RULE %s AS ON %s
    TO %s [ WHERE %s ]
    DO [ ALSO | INSTEAD ] { NOTHING | %s | ( %s ; %s ... ) }

%s

    SELECT | INSERT | UPDATE | DELETE`,r("name"),r("event"),r("table_name"),r("condition"),r("command"),r("command"),r("command"),r("where event can be one of:"))}function CO(n){_(n,`CREATE SCHEMA %s [ AUTHORIZATION %s ] [ %s [ ... ] ]
CREATE SCHEMA AUTHORIZATION %s [ %s [ ... ] ]
CREATE SCHEMA IF NOT EXISTS %s [ AUTHORIZATION %s ]
CREATE SCHEMA IF NOT EXISTS AUTHORIZATION %s

%s

    %s
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("schema_name"),r("role_specification"),r("schema_element"),r("role_specification"),r("schema_element"),r("schema_name"),r("role_specification"),r("role_specification"),r("where role_specification can be:"),r("user_name"))}function LO(n){_(n,`CREATE [ { TEMPORARY | TEMP } | UNLOGGED ] SEQUENCE [ IF NOT EXISTS ] %s
    [ AS %s ]
    [ INCREMENT [ BY ] %s ]
    [ MINVALUE %s | NO MINVALUE ] [ MAXVALUE %s | NO MAXVALUE ]
    [ START [ WITH ] %s ] [ CACHE %s ] [ [ NO ] CYCLE ]
    [ OWNED BY { %s.%s | NONE } ]`,r("name"),r("data_type"),r("increment"),r("minvalue"),r("maxvalue"),r("start"),r("cache"),r("table_name"),r("column_name"))}function IO(n){_(n,`CREATE SERVER [ IF NOT EXISTS ] %s [ TYPE '%s' ] [ VERSION '%s' ]
    FOREIGN DATA WRAPPER %s
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,r("server_name"),r("server_type"),r("server_version"),r("fdw_name"),r("option"),r("value"))}function wO(n){_(n,`CREATE STATISTICS [ [ IF NOT EXISTS ] %s ]
    ON ( %s )
    FROM %s

CREATE STATISTICS [ [ IF NOT EXISTS ] %s ]
    [ ( %s [, ... ] ) ]
    ON { %s | ( %s ) }, { %s | ( %s ) } [, ...]
    FROM %s`,r("statistics_name"),r("expression"),r("table_name"),r("statistics_name"),r("statistics_kind"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("table_name"))}function xO(n){_(n,`CREATE SUBSCRIPTION %s
    CONNECTION '%s'
    PUBLICATION %s [, ...]
    [ WITH ( %s [= %s] [, ... ] ) ]`,r("subscription_name"),r("conninfo"),r("publication_name"),r("subscription_parameter"),r("value"))}function vO(n){_(n,`CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s ( [
  { %s %s [ STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT } ] [ COMPRESSION %s ] [ COLLATE %s ] [ %s [ ... ] ]
    | %s
    | LIKE %s [ %s ... ] }
    [, ... ]
] )
[ INHERITS ( %s [, ... ] ) ]
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ]
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    PARTITION OF %s [ (
  { %s [ WITH OPTIONS ] [ %s [ ... ] ]
    | %s }
    [, ... ]
) ] { FOR VALUES %s | DEFAULT }
[ PARTITION BY { RANGE | LIST | HASH } ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ... ] ) ]
[ USING %s ]
[ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
[ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
[ TABLESPACE %s ]

%s

[ CONSTRAINT %s ]
{ NOT NULL |
  NULL |
  CHECK ( %s ) [ NO INHERIT ] |
  DEFAULT %s |
  GENERATED ALWAYS AS ( %s ) STORED |
  GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( %s ) ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] %s |
  PRIMARY KEY %s |
  REFERENCES %s [ ( %s ) ] [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ]
    [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

[ CONSTRAINT %s ]
{ CHECK ( %s ) [ NO INHERIT ] |
  NOT NULL %s [ NO INHERIT ] |
  UNIQUE [ NULLS [ NOT ] DISTINCT ] ( %s [, ... ] ) %s |
  PRIMARY KEY ( %s [, ... ] ) %s |
  EXCLUDE [ USING %s ] ( %s WITH %s [, ... ] ) %s [ WHERE ( %s ) ] |
  FOREIGN KEY ( %s [, ... ] ) REFERENCES %s [ ( %s [, ... ] ) ]
    [ MATCH FULL | MATCH PARTIAL | MATCH SIMPLE ] [ ON DELETE %s ] [ ON UPDATE %s ] }
[ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]

%s

{ INCLUDING | EXCLUDING } { COMMENTS | COMPRESSION | CONSTRAINTS | DEFAULTS | GENERATED | IDENTITY | INDEXES | STATISTICS | STORAGE | ALL }

%s

IN ( %s [, ...] ) |
FROM ( { %s | MINVALUE | MAXVALUE } [, ...] )
  TO ( { %s | MINVALUE | MAXVALUE } [, ...] ) |
WITH ( MODULUS %s, REMAINDER %s )

%s

[ INCLUDE ( %s [, ... ] ) ]
[ WITH ( %s [= %s] [, ... ] ) ]
[ USING INDEX TABLESPACE %s ]

%s

{ %s | ( %s ) } [ %s ] [ ASC | DESC ] [ NULLS { FIRST | LAST } ]

%s

{ NO ACTION | RESTRICT | CASCADE | SET NULL [ ( %s [, ... ] ) ] | SET DEFAULT [ ( %s [, ... ] ) ] }`,r("table_name"),r("column_name"),r("data_type"),r("compression_method"),r("collation"),r("column_constraint"),r("table_constraint"),r("source_table"),r("like_option"),r("parent_table"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("table_name"),r("type_name"),r("column_name"),r("column_constraint"),r("table_constraint"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("table_name"),r("parent_table"),r("column_name"),r("column_constraint"),r("table_constraint"),r("partition_bound_spec"),r("column_name"),r("expression"),r("collation"),r("opclass"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("where column_constraint is:"),r("constraint_name"),r("expression"),r("default_expr"),r("generation_expr"),r("sequence_options"),r("index_parameters"),r("index_parameters"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and table_constraint is:"),r("constraint_name"),r("expression"),r("column_name"),r("column_name"),r("index_parameters"),r("column_name"),r("index_parameters"),r("index_method"),r("exclude_element"),r("operator"),r("index_parameters"),r("predicate"),r("column_name"),r("reftable"),r("refcolumn"),r("referential_action"),r("referential_action"),r("and like_option is:"),r("and partition_bound_spec is:"),r("partition_bound_expr"),r("partition_bound_expr"),r("partition_bound_expr"),r("numeric_literal"),r("numeric_literal"),r("index_parameters in UNIQUE, PRIMARY KEY, and EXCLUDE constraints are:"),r("column_name"),r("storage_parameter"),r("value"),r("tablespace_name"),r("exclude_element in an EXCLUDE constraint is:"),r("column_name"),r("expression"),r("opclass"),r("referential_action in a FOREIGN KEY/REFERENCES constraint is:"),r("column_name"),r("column_name"))}function DO(n){_(n,`CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] %s
    [ (%s [, ...] ) ]
    [ USING %s ]
    [ WITH ( %s [= %s] [, ... ] ) | WITHOUT OIDS ]
    [ ON COMMIT { PRESERVE ROWS | DELETE ROWS | DROP } ]
    [ TABLESPACE %s ]
    AS %s
    [ WITH [ NO ] DATA ]`,r("table_name"),r("column_name"),r("method"),r("storage_parameter"),r("value"),r("tablespace_name"),r("query"))}function kO(n){_(n,`CREATE TABLESPACE %s
    [ OWNER { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } ]
    LOCATION '%s'
    [ WITH ( %s = %s [, ... ] ) ]`,r("tablespace_name"),r("new_owner"),r("directory"),r("tablespace_option"),r("value"))}function PO(n){_(n,`CREATE TEXT SEARCH CONFIGURATION %s (
    PARSER = %s |
    COPY = %s
)`,r("name"),r("parser_name"),r("source_config"))}function MO(n){_(n,`CREATE TEXT SEARCH DICTIONARY %s (
    TEMPLATE = %s
    [, %s = %s [, ... ]]
)`,r("name"),r("template"),r("option"),r("value"))}function UO(n){_(n,`CREATE TEXT SEARCH PARSER %s (
    START = %s ,
    GETTOKEN = %s ,
    END = %s ,
    LEXTYPES = %s
    [, HEADLINE = %s ]
)`,r("name"),r("start_function"),r("gettoken_function"),r("end_function"),r("lextypes_function"),r("headline_function"))}function FO(n){_(n,`CREATE TEXT SEARCH TEMPLATE %s (
    [ INIT = %s , ]
    LEXIZE = %s
)`,r("name"),r("init_function"),r("lexize_function"))}function BO(n){_(n,`CREATE [ OR REPLACE ] TRANSFORM FOR %s LANGUAGE %s (
    FROM SQL WITH FUNCTION %s [ (%s [, ...]) ],
    TO SQL WITH FUNCTION %s [ (%s [, ...]) ]
);`,r("type_name"),r("lang_name"),r("from_sql_function_name"),r("argument_type"),r("to_sql_function_name"),r("argument_type"))}function HO(n){_(n,`CREATE [ OR REPLACE ] [ CONSTRAINT ] TRIGGER %s { BEFORE | AFTER | INSTEAD OF } { %s [ OR ... ] }
    ON %s
    [ FROM %s ]
    [ NOT DEFERRABLE | [ DEFERRABLE ] [ INITIALLY IMMEDIATE | INITIALLY DEFERRED ] ]
    [ REFERENCING { { OLD | NEW } TABLE [ AS ] %s } [ ... ] ]
    [ FOR [ EACH ] { ROW | STATEMENT } ]
    [ WHEN ( %s ) ]
    EXECUTE { FUNCTION | PROCEDURE } %s ( %s )

%s

    INSERT
    UPDATE [ OF %s [, ... ] ]
    DELETE
    TRUNCATE`,r("name"),r("event"),r("table_name"),r("referenced_table_name"),r("transition_relation_name"),r("condition"),r("function_name"),r("arguments"),r("where event can be one of:"),r("column_name"))}function WO(n){_(n,`CREATE TYPE %s AS
    ( [ %s %s [ COLLATE %s ] [, ... ] ] )

CREATE TYPE %s AS ENUM
    ( [ '%s' [, ... ] ] )

CREATE TYPE %s AS RANGE (
    SUBTYPE = %s
    [ , SUBTYPE_OPCLASS = %s ]
    [ , COLLATION = %s ]
    [ , CANONICAL = %s ]
    [ , SUBTYPE_DIFF = %s ]
    [ , MULTIRANGE_TYPE_NAME = %s ]
)

CREATE TYPE %s (
    INPUT = %s,
    OUTPUT = %s
    [ , RECEIVE = %s ]
    [ , SEND = %s ]
    [ , TYPMOD_IN = %s ]
    [ , TYPMOD_OUT = %s ]
    [ , ANALYZE = %s ]
    [ , SUBSCRIPT = %s ]
    [ , INTERNALLENGTH = { %s | VARIABLE } ]
    [ , PASSEDBYVALUE ]
    [ , ALIGNMENT = %s ]
    [ , STORAGE = %s ]
    [ , LIKE = %s ]
    [ , CATEGORY = %s ]
    [ , PREFERRED = %s ]
    [ , DEFAULT = %s ]
    [ , ELEMENT = %s ]
    [ , DELIMITER = %s ]
    [ , COLLATABLE = %s ]
)

CREATE TYPE %s`,r("name"),r("attribute_name"),r("data_type"),r("collation"),r("name"),r("label"),r("name"),r("subtype"),r("subtype_operator_class"),r("collation"),r("canonical_function"),r("subtype_diff_function"),r("multirange_type_name"),r("name"),r("input_function"),r("output_function"),r("receive_function"),r("send_function"),r("type_modifier_input_function"),r("type_modifier_output_function"),r("analyze_function"),r("subscript_function"),r("internallength"),r("alignment"),r("storage"),r("like_type"),r("category"),r("preferred"),r("default"),r("element"),r("delimiter"),r("collatable"),r("name"))}function GO(n){_(n,`CREATE USER %s [ [ WITH ] %s [ ... ] ]

%s

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | BYPASSRLS | NOBYPASSRLS
    | CONNECTION LIMIT %s
    | [ ENCRYPTED ] PASSWORD '%s' | PASSWORD NULL
    | VALID UNTIL '%s'
    | IN ROLE %s [, ...]
    | IN GROUP %s [, ...]
    | ROLE %s [, ...]
    | ADMIN %s [, ...]
    | USER %s [, ...]
    | SYSID %s`,r("name"),r("option"),r("where option can be:"),r("connlimit"),r("password"),r("timestamp"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("role_name"),r("uid"))}function VO(n){_(n,`CREATE USER MAPPING [ IF NOT EXISTS ] FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | PUBLIC }
    SERVER %s
    [ OPTIONS ( %s '%s' [ , ... ] ) ]`,r("user_name"),r("server_name"),r("option"),r("value"))}function qO(n){_(n,`CREATE [ OR REPLACE ] [ TEMP | TEMPORARY ] [ RECURSIVE ] VIEW %s [ ( %s [, ...] ) ]
    [ WITH ( %s [= %s] [, ... ] ) ]
    AS %s
    [ WITH [ CASCADED | LOCAL ] CHECK OPTION ]`,r("name"),r("column_name"),r("view_option_name"),r("view_option_value"),r("query"))}function YO(n){_(n,"DEALLOCATE [ PREPARE ] { %s | ALL }",r("name"))}function jO(n){_(n,`DECLARE %s [ BINARY ] [ ASENSITIVE | INSENSITIVE ] [ [ NO ] SCROLL ]
    CURSOR [ { WITH | WITHOUT } HOLD ] FOR %s`,r("name"),r("query"))}function XO(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
DELETE FROM [ ONLY ] %s [ * ] [ [ AS ] %s ]
    [ USING %s [, ...] ]
    [ WHERE %s | WHERE CURRENT OF %s ]
    [ RETURNING * | %s [ [ AS ] %s ] [, ...] ]`,r("with_query"),r("table_name"),r("alias"),r("from_item"),r("condition"),r("cursor_name"),r("output_expression"),r("output_name"))}function zO(n){_(n,"DISCARD { ALL | PLANS | SEQUENCES | TEMPORARY | TEMP }")}function KO(n){_(n,"DO [ LANGUAGE %s ] %s",r("lang_name"),r("code"))}function $O(n){_(n,"DROP ACCESS METHOD [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function JO(n){_(n,`DROP AGGREGATE [ IF EXISTS ] %s ( %s ) [, ...] [ CASCADE | RESTRICT ]

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("name"),r("aggregate_signature"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function QO(n){_(n,"DROP CAST [ IF EXISTS ] (%s AS %s) [ CASCADE | RESTRICT ]",r("source_type"),r("target_type"))}function ZO(n){_(n,"DROP COLLATION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function eN(n){_(n,"DROP CONVERSION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function tN(n){_(n,`DROP DATABASE [ IF EXISTS ] %s [ [ WITH ] ( %s [, ...] ) ]

%s

    FORCE`,r("name"),r("option"),r("where option can be:"))}function nN(n){_(n,"DROP DOMAIN [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function iN(n){_(n,"DROP EVENT TRIGGER [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function sN(n){_(n,"DROP EXTENSION [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function rN(n){_(n,"DROP FOREIGN DATA WRAPPER [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function oN(n){_(n,"DROP FOREIGN TABLE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function aN(n){_(n,`DROP FUNCTION [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,r("name"),r("argmode"),r("argname"),r("argtype"))}function lN(n){_(n,"DROP GROUP [ IF EXISTS ] %s [, ...]",r("name"))}function cN(n){_(n,"DROP INDEX [ CONCURRENTLY ] [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function hN(n){_(n,"DROP [ PROCEDURAL ] LANGUAGE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function fN(n){_(n,"DROP MATERIALIZED VIEW [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function uN(n){_(n,"DROP OPERATOR [ IF EXISTS ] %s ( { %s | NONE } , %s ) [, ...] [ CASCADE | RESTRICT ]",r("name"),r("left_type"),r("right_type"))}function dN(n){_(n,"DROP OPERATOR CLASS [ IF EXISTS ] %s USING %s [ CASCADE | RESTRICT ]",r("name"),r("index_method"))}function pN(n){_(n,"DROP OPERATOR FAMILY [ IF EXISTS ] %s USING %s [ CASCADE | RESTRICT ]",r("name"),r("index_method"))}function gN(n){_(n,"DROP OWNED BY { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...] [ CASCADE | RESTRICT ]",r("name"))}function mN(n){_(n,"DROP POLICY [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",r("name"),r("table_name"))}function EN(n){_(n,`DROP PROCEDURE [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,r("name"),r("argmode"),r("argname"),r("argtype"))}function TN(n){_(n,"DROP PUBLICATION [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function SN(n){_(n,"DROP ROLE [ IF EXISTS ] %s [, ...]",r("name"))}function AN(n){_(n,`DROP ROUTINE [ IF EXISTS ] %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
    [ CASCADE | RESTRICT ]`,r("name"),r("argmode"),r("argname"),r("argtype"))}function RN(n){_(n,"DROP RULE [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",r("name"),r("table_name"))}function _N(n){_(n,"DROP SCHEMA [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function ON(n){_(n,"DROP SEQUENCE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function NN(n){_(n,"DROP SERVER [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function bN(n){_(n,"DROP STATISTICS [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function yN(n){_(n,"DROP SUBSCRIPTION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function CN(n){_(n,"DROP TABLE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function LN(n){_(n,"DROP TABLESPACE [ IF EXISTS ] %s",r("name"))}function IN(n){_(n,"DROP TEXT SEARCH CONFIGURATION [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function wN(n){_(n,"DROP TEXT SEARCH DICTIONARY [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function xN(n){_(n,"DROP TEXT SEARCH PARSER [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function vN(n){_(n,"DROP TEXT SEARCH TEMPLATE [ IF EXISTS ] %s [ CASCADE | RESTRICT ]",r("name"))}function DN(n){_(n,"DROP TRANSFORM [ IF EXISTS ] FOR %s LANGUAGE %s [ CASCADE | RESTRICT ]",r("type_name"),r("lang_name"))}function kN(n){_(n,"DROP TRIGGER [ IF EXISTS ] %s ON %s [ CASCADE | RESTRICT ]",r("name"),r("table_name"))}function PN(n){_(n,"DROP TYPE [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function MN(n){_(n,"DROP USER [ IF EXISTS ] %s [, ...]",r("name"))}function UN(n){_(n,"DROP USER MAPPING [ IF EXISTS ] FOR { %s | USER | CURRENT_ROLE | CURRENT_USER | PUBLIC } SERVER %s",r("user_name"),r("server_name"))}function FN(n){_(n,"DROP VIEW [ IF EXISTS ] %s [, ...] [ CASCADE | RESTRICT ]",r("name"))}function BN(n){_(n,"END [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function HN(n){_(n,"EXECUTE %s [ ( %s [, ...] ) ]",r("name"),r("parameter"))}function WN(n){_(n,`EXPLAIN [ ( %s [, ...] ) ] %s

%s

    ANALYZE [ %s ]
    VERBOSE [ %s ]
    COSTS [ %s ]
    SETTINGS [ %s ]
    GENERIC_PLAN [ %s ]
    BUFFERS [ %s ]
    WAL [ %s ]
    TIMING [ %s ]
    SUMMARY [ %s ]
    FORMAT { TEXT | XML | JSON | YAML }`,r("option"),r("statement"),r("where option can be one of:"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"))}function GN(n){_(n,`FETCH [ %s ] [ FROM | IN ] %s

%s

    NEXT
    PRIOR
    FIRST
    LAST
    ABSOLUTE %s
    RELATIVE %s
    %s
    ALL
    FORWARD
    FORWARD %s
    FORWARD ALL
    BACKWARD
    BACKWARD %s
    BACKWARD ALL`,r("direction"),r("cursor_name"),r("where direction can be one of:"),r("count"),r("count"),r("count"),r("count"),r("count"))}function VN(n){_(n,`GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] %s [, ...]
         | ALL TABLES IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SELECT | INSERT | UPDATE | REFERENCES } ( %s [, ...] )
    [, ...] | ALL [ PRIVILEGES ] ( %s [, ...] ) }
    ON [ TABLE ] %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { SEQUENCE %s [, ...]
         | ALL SEQUENCES IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON DOMAIN %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN DATA WRAPPER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN SERVER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { EXECUTE | ALL [ PRIVILEGES ] }
    ON { { FUNCTION | PROCEDURE | ROUTINE } %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
         | ALL { FUNCTIONS | PROCEDURES | ROUTINES } IN SCHEMA %s [, ...] }
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON LANGUAGE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }
    ON LARGE OBJECT %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { SET | ALTER SYSTEM } [, ... ] | ALL [ PRIVILEGES ] }
    ON PARAMETER %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMA %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { CREATE | ALL [ PRIVILEGES ] }
    ON TABLESPACE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT { USAGE | ALL [ PRIVILEGES ] }
    ON TYPE %s [, ...]
    TO %s [, ...] [ WITH GRANT OPTION ]
    [ GRANTED BY %s ]

GRANT %s [, ...] TO %s [, ...]
    [ WITH { ADMIN | INHERIT | SET } { OPTION | TRUE | FALSE } ]
    [ GRANTED BY %s ]

%s

    [ GROUP ] %s
  | PUBLIC
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("table_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("column_name"),r("column_name"),r("table_name"),r("role_specification"),r("role_specification"),r("sequence_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("database_name"),r("role_specification"),r("role_specification"),r("domain_name"),r("role_specification"),r("role_specification"),r("fdw_name"),r("role_specification"),r("role_specification"),r("server_name"),r("role_specification"),r("role_specification"),r("routine_name"),r("argmode"),r("arg_name"),r("arg_type"),r("schema_name"),r("role_specification"),r("role_specification"),r("lang_name"),r("role_specification"),r("role_specification"),r("loid"),r("role_specification"),r("role_specification"),r("configuration_parameter"),r("role_specification"),r("role_specification"),r("schema_name"),r("role_specification"),r("role_specification"),r("tablespace_name"),r("role_specification"),r("role_specification"),r("type_name"),r("role_specification"),r("role_specification"),r("role_name"),r("role_specification"),r("role_specification"),r("where role_specification can be:"),r("role_name"))}function qN(n){_(n,`IMPORT FOREIGN SCHEMA %s
    [ { LIMIT TO | EXCEPT } ( %s [, ...] ) ]
    FROM SERVER %s
    INTO %s
    [ OPTIONS ( %s '%s' [, ... ] ) ]`,r("remote_schema"),r("table_name"),r("server_name"),r("local_schema"),r("option"),r("value"))}function YN(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
INSERT INTO %s [ AS %s ] [ ( %s [, ...] ) ]
    [ OVERRIDING { SYSTEM | USER } VALUE ]
    { DEFAULT VALUES | VALUES ( { %s | DEFAULT } [, ...] ) [, ...] | %s }
    [ ON CONFLICT [ %s ] %s ]
    [ RETURNING * | %s [ [ AS ] %s ] [, ...] ]

%s

    ( { %s | ( %s ) } [ COLLATE %s ] [ %s ] [, ...] ) [ WHERE %s ]
    ON CONSTRAINT %s

%s

    DO NOTHING
    DO UPDATE SET { %s = { %s | DEFAULT } |
                    ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
                    ( %s [, ...] ) = ( %s )
                  } [, ...]
              [ WHERE %s ]`,r("with_query"),r("table_name"),r("alias"),r("column_name"),r("expression"),r("query"),r("conflict_target"),r("conflict_action"),r("output_expression"),r("output_name"),r("where conflict_target can be one of:"),r("index_column_name"),r("index_expression"),r("collation"),r("opclass"),r("index_predicate"),r("constraint_name"),r("and conflict_action is one of:"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("column_name"),r("sub-SELECT"),r("condition"))}function jN(n){_(n,"LISTEN %s",r("channel"))}function XN(n){_(n,"LOAD '%s'",r("filename"))}function zN(n){_(n,`LOCK [ TABLE ] [ ONLY ] %s [ * ] [, ...] [ IN %s MODE ] [ NOWAIT ]

%s

    ACCESS SHARE | ROW SHARE | ROW EXCLUSIVE | SHARE UPDATE EXCLUSIVE
    | SHARE | SHARE ROW EXCLUSIVE | EXCLUSIVE | ACCESS EXCLUSIVE`,r("name"),r("lockmode"),r("where lockmode is one of:"))}function KN(n){_(n,`[ WITH %s [, ...] ]
MERGE INTO [ ONLY ] %s [ * ] [ [ AS ] %s ]
USING %s ON %s
%s [...]

%s

{ [ ONLY ] %s [ * ] | ( %s ) } [ [ AS ] %s ]

%s

{ WHEN MATCHED [ AND %s ] THEN { %s | %s | DO NOTHING } |
  WHEN NOT MATCHED [ AND %s ] THEN { %s | DO NOTHING } }

%s

INSERT [( %s [, ...] )]
[ OVERRIDING { SYSTEM | USER } VALUE ]
{ VALUES ( { %s | DEFAULT } [, ...] ) | DEFAULT VALUES }

%s

UPDATE SET { %s = { %s | DEFAULT } |
             ( %s [, ...] ) = ( { %s | DEFAULT } [, ...] ) } [, ...]

%s

DELETE`,r("with_query"),r("target_table_name"),r("target_alias"),r("data_source"),r("join_condition"),r("when_clause"),r("where data_source is:"),r("source_table_name"),r("source_query"),r("source_alias"),r("and when_clause is:"),r("condition"),r("merge_update"),r("merge_delete"),r("condition"),r("merge_insert"),r("and merge_insert is:"),r("column_name"),r("expression"),r("and merge_update is:"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("and merge_delete is:"))}function $N(n){_(n,`MOVE [ %s ] [ FROM | IN ] %s

%s

    NEXT
    PRIOR
    FIRST
    LAST
    ABSOLUTE %s
    RELATIVE %s
    %s
    ALL
    FORWARD
    FORWARD %s
    FORWARD ALL
    BACKWARD
    BACKWARD %s
    BACKWARD ALL`,r("direction"),r("cursor_name"),r("where direction can be one of:"),r("count"),r("count"),r("count"),r("count"),r("count"))}function JN(n){_(n,"NOTIFY %s [ , %s ]",r("channel"),r("payload"))}function QN(n){_(n,"PREPARE %s [ ( %s [, ...] ) ] AS %s",r("name"),r("data_type"),r("statement"))}function ZN(n){_(n,"PREPARE TRANSACTION %s",r("transaction_id"))}function eb(n){_(n,`REASSIGN OWNED BY { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER } [, ...]
               TO { %s | CURRENT_ROLE | CURRENT_USER | SESSION_USER }`,r("old_role"),r("new_role"))}function tb(n){_(n,`REFRESH MATERIALIZED VIEW [ CONCURRENTLY ] %s
    [ WITH [ NO ] DATA ]`,r("name"))}function nb(n){_(n,`REINDEX [ ( %s [, ...] ) ] { INDEX | TABLE | SCHEMA } [ CONCURRENTLY ] %s
REINDEX [ ( %s [, ...] ) ] { DATABASE | SYSTEM } [ CONCURRENTLY ] [ %s ]

%s

    CONCURRENTLY [ %s ]
    TABLESPACE %s
    VERBOSE [ %s ]`,r("option"),r("name"),r("option"),r("name"),r("where option can be one of:"),r("boolean"),r("new_tablespace"),r("boolean"))}function ib(n){_(n,"RELEASE [ SAVEPOINT ] %s",r("savepoint_name"))}function sb(n){_(n,`RESET %s
RESET ALL`,r("configuration_parameter"))}function rb(n){_(n,`REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] %s [, ...]
         | ALL TABLES IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | INSERT | UPDATE | REFERENCES } ( %s [, ...] )
    [, ...] | ALL [ PRIVILEGES ] ( %s [, ...] ) }
    ON [ TABLE ] %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { USAGE | SELECT | UPDATE }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { SEQUENCE %s [, ...]
         | ALL SEQUENCES IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON DOMAIN %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN DATA WRAPPER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON FOREIGN SERVER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { EXECUTE | ALL [ PRIVILEGES ] }
    ON { { FUNCTION | PROCEDURE | ROUTINE } %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] [, ...]
         | ALL { FUNCTIONS | PROCEDURES | ROUTINES } IN SCHEMA %s [, ...] }
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON LANGUAGE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SELECT | UPDATE } [, ...] | ALL [ PRIVILEGES ] }
    ON LARGE OBJECT %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { SET | ALTER SYSTEM } [, ...] | ALL [ PRIVILEGES ] }
    ON PARAMETER %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { { CREATE | USAGE } [, ...] | ALL [ PRIVILEGES ] }
    ON SCHEMA %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { CREATE | ALL [ PRIVILEGES ] }
    ON TABLESPACE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ GRANT OPTION FOR ]
    { USAGE | ALL [ PRIVILEGES ] }
    ON TYPE %s [, ...]
    FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

REVOKE [ { ADMIN | INHERIT | SET } OPTION FOR ]
    %s [, ...] FROM %s [, ...]
    [ GRANTED BY %s ]
    [ CASCADE | RESTRICT ]

%s

    [ GROUP ] %s
  | PUBLIC
  | CURRENT_ROLE
  | CURRENT_USER
  | SESSION_USER`,r("table_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("column_name"),r("column_name"),r("table_name"),r("role_specification"),r("role_specification"),r("sequence_name"),r("schema_name"),r("role_specification"),r("role_specification"),r("database_name"),r("role_specification"),r("role_specification"),r("domain_name"),r("role_specification"),r("role_specification"),r("fdw_name"),r("role_specification"),r("role_specification"),r("server_name"),r("role_specification"),r("role_specification"),r("function_name"),r("argmode"),r("arg_name"),r("arg_type"),r("schema_name"),r("role_specification"),r("role_specification"),r("lang_name"),r("role_specification"),r("role_specification"),r("loid"),r("role_specification"),r("role_specification"),r("configuration_parameter"),r("role_specification"),r("role_specification"),r("schema_name"),r("role_specification"),r("role_specification"),r("tablespace_name"),r("role_specification"),r("role_specification"),r("type_name"),r("role_specification"),r("role_specification"),r("role_name"),r("role_specification"),r("role_specification"),r("where role_specification can be:"),r("role_name"))}function ob(n){_(n,"ROLLBACK [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]")}function ab(n){_(n,"ROLLBACK PREPARED %s",r("transaction_id"))}function lb(n){_(n,"ROLLBACK [ WORK | TRANSACTION ] TO [ SAVEPOINT ] %s",r("savepoint_name"))}function cb(n){_(n,"SAVEPOINT %s",r("savepoint_name"))}function hb(n){_(n,`SECURITY LABEL [ FOR %s ] ON
{
  TABLE %s |
  COLUMN %s.%s |
  AGGREGATE %s ( %s ) |
  DATABASE %s |
  DOMAIN %s |
  EVENT TRIGGER %s |
  FOREIGN TABLE %s
  FUNCTION %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  LARGE OBJECT %s |
  MATERIALIZED VIEW %s |
  [ PROCEDURAL ] LANGUAGE %s |
  PROCEDURE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  PUBLICATION %s |
  ROLE %s |
  ROUTINE %s [ ( [ [ %s ] [ %s ] %s [, ...] ] ) ] |
  SCHEMA %s |
  SEQUENCE %s |
  SUBSCRIPTION %s |
  TABLESPACE %s |
  TYPE %s |
  VIEW %s
} IS { %s | NULL }

%s

* |
[ %s ] [ %s ] %s [ , ... ] |
[ [ %s ] [ %s ] %s [ , ... ] ] ORDER BY [ %s ] [ %s ] %s [ , ... ]`,r("provider"),r("object_name"),r("table_name"),r("column_name"),r("aggregate_name"),r("aggregate_signature"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("function_name"),r("argmode"),r("argname"),r("argtype"),r("large_object_oid"),r("object_name"),r("object_name"),r("procedure_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("routine_name"),r("argmode"),r("argname"),r("argtype"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("object_name"),r("string_literal"),r("where aggregate_signature is:"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"),r("argmode"),r("argname"),r("argtype"))}function fb(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ * | %s [ [ AS ] %s ] [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("from_item"),r("condition"),r("grouping_element"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("table_name"),r("where from_item can be one of:"),r("table_name"),r("alias"),r("column_alias"),r("sampling_method"),r("argument"),r("seed"),r("select"),r("alias"),r("column_alias"),r("with_query_name"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("alias"),r("column_alias"),r("from_item"),r("join_type"),r("from_item"),r("join_condition"),r("join_column"),r("join_using_alias"),r("from_item"),r("join_type"),r("from_item"),r("from_item"),r("from_item"),r("and grouping_element can be one of:"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("grouping_element"),r("and with_query is:"),r("with_query_name"),r("column_name"),r("select"),r("values"),r("insert"),r("update"),r("delete"),r("column_name"),r("search_seq_col_name"),r("column_name"),r("cycle_mark_col_name"),r("cycle_mark_value"),r("cycle_mark_default"),r("cycle_path_col_name"),r("table_name"))}function ub(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    * | %s [ [ AS ] %s ] [, ...]
    INTO [ TEMPORARY | TEMP | UNLOGGED ] [ TABLE ] %s
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } ONLY ]
    [ FOR { UPDATE | SHARE } [ OF %s [, ...] ] [ NOWAIT ] [...] ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("new_table"),r("from_item"),r("condition"),r("expression"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("table_name"))}function db(n){_(n,`SET [ SESSION | LOCAL ] %s { TO | = } { %s | '%s' | DEFAULT }
SET [ SESSION | LOCAL ] TIME ZONE { %s | '%s' | LOCAL | DEFAULT }`,r("configuration_parameter"),r("value"),r("value"),r("value"),r("value"))}function pb(n){_(n,"SET CONSTRAINTS { ALL | %s [, ...] } { DEFERRED | IMMEDIATE }",r("name"))}function gb(n){_(n,`SET [ SESSION | LOCAL ] ROLE %s
SET [ SESSION | LOCAL ] ROLE NONE
RESET ROLE`,r("role_name"))}function mb(n){_(n,`SET [ SESSION | LOCAL ] SESSION AUTHORIZATION %s
SET [ SESSION | LOCAL ] SESSION AUTHORIZATION DEFAULT
RESET SESSION AUTHORIZATION`,r("user_name"))}function Eb(n){_(n,`SET TRANSACTION %s [, ...]
SET TRANSACTION SNAPSHOT %s
SET SESSION CHARACTERISTICS AS TRANSACTION %s [, ...]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,r("transaction_mode"),r("snapshot_id"),r("transaction_mode"),r("where transaction_mode is one of:"))}function Tb(n){_(n,`SHOW %s
SHOW ALL`,r("name"))}function Sb(n){_(n,`START TRANSACTION [ %s [, ...] ]

%s

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY
    [ NOT ] DEFERRABLE`,r("transaction_mode"),r("where transaction_mode is one of:"))}function Ab(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ * | %s [ [ AS ] %s ] [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("from_item"),r("condition"),r("grouping_element"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("table_name"),r("where from_item can be one of:"),r("table_name"),r("alias"),r("column_alias"),r("sampling_method"),r("argument"),r("seed"),r("select"),r("alias"),r("column_alias"),r("with_query_name"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("alias"),r("column_alias"),r("from_item"),r("join_type"),r("from_item"),r("join_condition"),r("join_column"),r("join_using_alias"),r("from_item"),r("join_type"),r("from_item"),r("from_item"),r("from_item"),r("and grouping_element can be one of:"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("grouping_element"),r("and with_query is:"),r("with_query_name"),r("column_name"),r("select"),r("values"),r("insert"),r("update"),r("delete"),r("column_name"),r("search_seq_col_name"),r("column_name"),r("cycle_mark_col_name"),r("cycle_mark_value"),r("cycle_mark_default"),r("cycle_path_col_name"),r("table_name"))}function Rb(n){_(n,`TRUNCATE [ TABLE ] [ ONLY ] %s [ * ] [, ... ]
    [ RESTART IDENTITY | CONTINUE IDENTITY ] [ CASCADE | RESTRICT ]`,r("name"))}function _b(n){_(n,"UNLISTEN { %s | * }",r("channel"))}function Ob(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
UPDATE [ ONLY ] %s [ * ] [ [ AS ] %s ]
    SET { %s = { %s | DEFAULT } |
          ( %s [, ...] ) = [ ROW ] ( { %s | DEFAULT } [, ...] ) |
          ( %s [, ...] ) = ( %s )
        } [, ...]
    [ FROM %s [, ...] ]
    [ WHERE %s | WHERE CURRENT OF %s ]
    [ RETURNING * | %s [ [ AS ] %s ] [, ...] ]`,r("with_query"),r("table_name"),r("alias"),r("column_name"),r("expression"),r("column_name"),r("expression"),r("column_name"),r("sub-SELECT"),r("from_item"),r("condition"),r("cursor_name"),r("output_expression"),r("output_name"))}function Nb(n){_(n,`VACUUM [ ( %s [, ...] ) ] [ %s [, ...] ]

%s

    FULL [ %s ]
    FREEZE [ %s ]
    VERBOSE [ %s ]
    ANALYZE [ %s ]
    DISABLE_PAGE_SKIPPING [ %s ]
    SKIP_LOCKED [ %s ]
    INDEX_CLEANUP { AUTO | ON | OFF }
    PROCESS_MAIN [ %s ]
    PROCESS_TOAST [ %s ]
    TRUNCATE [ %s ]
    PARALLEL %s
    SKIP_DATABASE_STATS [ %s ]
    ONLY_DATABASE_STATS [ %s ]
    BUFFER_USAGE_LIMIT %s

%s

    %s [ ( %s [, ...] ) ]`,r("option"),r("table_and_columns"),r("where option can be one of:"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("boolean"),r("integer"),r("boolean"),r("boolean"),r("size"),r("and table_and_columns is:"),r("table_name"),r("column_name"))}function bb(n){_(n,`VALUES ( %s [, ...] ) [, ...]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } ONLY ]`,r("expression"),r("sort_expression"),r("operator"),r("count"),r("start"),r("count"))}function yb(n){_(n,`[ WITH [ RECURSIVE ] %s [, ...] ]
SELECT [ ALL | DISTINCT [ ON ( %s [, ...] ) ] ]
    [ * | %s [ [ AS ] %s ] [, ...] ]
    [ FROM %s [, ...] ]
    [ WHERE %s ]
    [ GROUP BY [ ALL | DISTINCT ] %s [, ...] ]
    [ HAVING %s ]
    [ WINDOW %s AS ( %s ) [, ...] ]
    [ { UNION | INTERSECT | EXCEPT } [ ALL | DISTINCT ] %s ]
    [ ORDER BY %s [ ASC | DESC | USING %s ] [ NULLS { FIRST | LAST } ] [, ...] ]
    [ LIMIT { %s | ALL } ]
    [ OFFSET %s [ ROW | ROWS ] ]
    [ FETCH { FIRST | NEXT } [ %s ] { ROW | ROWS } { ONLY | WITH TIES } ]
    [ FOR { UPDATE | NO KEY UPDATE | SHARE | KEY SHARE } [ OF %s [, ...] ] [ NOWAIT | SKIP LOCKED ] [...] ]

%s

    [ ONLY ] %s [ * ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
                [ TABLESAMPLE %s ( %s [, ...] ) [ REPEATABLE ( %s ) ] ]
    [ LATERAL ] ( %s ) [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    [ LATERAL ] %s ( [ %s [, ...] ] ) [ AS ] %s ( %s [, ...] )
    [ LATERAL ] %s ( [ %s [, ...] ] ) AS ( %s [, ...] )
    [ LATERAL ] ROWS FROM( %s ( [ %s [, ...] ] ) [ AS ( %s [, ...] ) ] [, ...] )
                [ WITH ORDINALITY ] [ [ AS ] %s [ ( %s [, ...] ) ] ]
    %s %s %s { ON %s | USING ( %s [, ...] ) [ AS %s ] }
    %s NATURAL %s %s
    %s CROSS JOIN %s

%s

    ( )
    %s
    ( %s [, ...] )
    ROLLUP ( { %s | ( %s [, ...] ) } [, ...] )
    CUBE ( { %s | ( %s [, ...] ) } [, ...] )
    GROUPING SETS ( %s [, ...] )

%s

    %s [ ( %s [, ...] ) ] AS [ [ NOT ] MATERIALIZED ] ( %s | %s | %s | %s | %s )
        [ SEARCH { BREADTH | DEPTH } FIRST BY %s [, ...] SET %s ]
        [ CYCLE %s [, ...] SET %s [ TO %s DEFAULT %s ] USING %s ]

TABLE [ ONLY ] %s [ * ]`,r("with_query"),r("expression"),r("expression"),r("output_name"),r("from_item"),r("condition"),r("grouping_element"),r("condition"),r("window_name"),r("window_definition"),r("select"),r("expression"),r("operator"),r("count"),r("start"),r("count"),r("table_name"),r("where from_item can be one of:"),r("table_name"),r("alias"),r("column_alias"),r("sampling_method"),r("argument"),r("seed"),r("select"),r("alias"),r("column_alias"),r("with_query_name"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_alias"),r("function_name"),r("argument"),r("alias"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("function_name"),r("argument"),r("column_definition"),r("alias"),r("column_alias"),r("from_item"),r("join_type"),r("from_item"),r("join_condition"),r("join_column"),r("join_using_alias"),r("from_item"),r("join_type"),r("from_item"),r("from_item"),r("from_item"),r("and grouping_element can be one of:"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("expression"),r("grouping_element"),r("and with_query is:"),r("with_query_name"),r("column_name"),r("select"),r("values"),r("insert"),r("update"),r("delete"),r("column_name"),r("search_seq_col_name"),r("column_name"),r("cycle_mark_col_name"),r("cycle_mark_value"),r("cycle_mark_default"),r("cycle_path_col_name"),r("table_name"))}var Vd=n=>{var{theme:e,settings:t={},styles:i=[]}=n,s={".cm-gutters":{}},o={};t.background&&(o.backgroundColor=t.background),t.backgroundImage&&(o.backgroundImage=t.backgroundImage),t.foreground&&(o.color=t.foreground),t.fontSize&&(o.fontSize=t.fontSize),(t.background||t.foreground)&&(s["&"]=o),t.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(s[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(s[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(s[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(s[".cm-content"]={caretColor:t.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var a={};t.gutterActiveForeground&&(a.color=t.gutterActiveForeground),t.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:t.lineHighlight},a.backgroundColor=t.lineHighlight),s[".cm-activeLineGutter"]=a,t.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var l=J.theme(s,{dark:e==="dark"}),c=Ti.define(i),h=[l,Qa(c)];return h},Cb={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},Lb=[{tag:[w.standard(w.tagName),w.tagName],color:"#116329"},{tag:[w.comment,w.bracket],color:"#6a737d"},{tag:[w.className,w.propertyName],color:"#6f42c1"},{tag:[w.variableName,w.attributeName,w.number,w.operator],color:"#005cc5"},{tag:[w.keyword,w.typeName,w.typeOperator,w.typeName],color:"#d73a49"},{tag:[w.string,w.meta,w.regexp],color:"#032f62"},{tag:[w.name,w.quote],color:"#22863a"},{tag:[w.heading,w.strong],color:"#24292e",fontWeight:"bold"},{tag:[w.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[w.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[w.atom,w.bool,w.special(w.variableName)],color:"#e36209"},{tag:[w.url,w.escape,w.regexp,w.link],color:"#032f62"},{tag:w.link,textDecoration:"underline"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.invalid,color:"#cb2431"}],Ib=n=>{var{theme:e="light",settings:t={},styles:i=[]}=n||{};return Vd({theme:e,settings:ji({},Cb,t),styles:[...Lb,...i]})},wb=Ib(),xb={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},vb=[{tag:[w.standard(w.tagName),w.tagName],color:"#7ee787"},{tag:[w.comment,w.bracket],color:"#8b949e"},{tag:[w.className,w.propertyName],color:"#d2a8ff"},{tag:[w.variableName,w.attributeName,w.number,w.operator],color:"#79c0ff"},{tag:[w.keyword,w.typeName,w.typeOperator,w.typeName],color:"#ff7b72"},{tag:[w.string,w.meta,w.regexp],color:"#a5d6ff"},{tag:[w.name,w.quote],color:"#7ee787"},{tag:[w.heading,w.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[w.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[w.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[w.atom,w.bool,w.special(w.variableName)],color:"#ffab70"},{tag:w.link,textDecoration:"underline"},{tag:w.strikethrough,textDecoration:"line-through"},{tag:w.invalid,color:"#f97583"}],Db=n=>{var{theme:e="dark",settings:t={},styles:i=[]}=n||{};return Vd({theme:e,settings:ji({},xb,t),styles:[...vb,...i]})},kb=Db();const Pb=[{label:"\\d",type:"function",displayLabel:"\\d[S+] [ pattern ]",detail:"PSQL Describe"},{label:"\\da",type:"function",displayLabel:"\\da[S] [ pattern ]",detail:"Lists aggregate functions"},{label:"\\dA",type:"function",displayLabel:"\\dA[+] [ pattern ]",detail:"Lists access methods"},{label:"\\dAc",type:"function",displayLabel:"\\dAc[+] [access-method-pattern [input-type-pattern]]",detail:"Lists operator classes"},{label:"\\dAf",type:"function",displayLabel:"\\dAf[+] [access-method-pattern [input-type-pattern]]",detail:"Lists operator families"},{label:"\\dAo",type:"function",displayLabel:"\\dAo[+] [access-method-pattern [operator-family-pattern]]",detail:"Lists operators associated with operator families"},{label:"\\dAp",type:"function",displayLabel:"\\dAp[+] [access-method-pattern [operator-family-pattern]]",detail:"Lists support functions associated with operator families"},{label:"\\db",type:"function",displayLabel:"\\db[+] [ pattern ]",detail:"Lists tablespaces"},{label:"\\dc",type:"function",displayLabel:"\\dc[S+] [ pattern ]",detail:"Lists conversions between character-set encodings"},{label:"\\dconfig",type:"function",displayLabel:"\\dconfig[+] [ pattern ]",detail:"Lists server configuration parameters and their values"},{label:"\\dC",type:"function",displayLabel:"\\dC[+] [ pattern ]",detail:"Lists type casts"},{label:"\\dd",type:"function",displayLabel:"\\dd[S] [ pattern ]",detail:"Shows the descriptions of objects of type constraint, operator class, operator family, rule, and trigger"},{label:"\\dD",type:"function",displayLabel:"\\dD[S+] [ pattern ]",detail:"Lists domains"},{label:"\\ddp",type:"function",displayLabel:"\\ddp [ pattern ]",detail:"Lists default access privilege settings"},{label:"\\dE",type:"function",displayLabel:"\\dE[S+] [ pattern ]",detail:"Lists foreign tables"},{label:"\\di",type:"function",displayLabel:"\\di[S+] [ pattern ]",detail:"Lists indexes"},{label:"\\dm",type:"function",displayLabel:"\\dm[S+] [ pattern ]",detail:"Lists materialized views"},{label:"\\ds",type:"function",displayLabel:"\\ds[S+] [ pattern ]",detail:"Lists sequences"},{label:"\\dt",type:"function",displayLabel:"\\dt[S+] [ pattern ]",detail:"Lists tables"},{label:"\\dv",type:"function",displayLabel:"\\dv[S+] [ pattern ]",detail:"Lists views"},{label:"\\des",type:"function",displayLabel:"\\des[+] [ pattern ]",detail:"Lists foreign servers"},{label:"\\det",type:"function",displayLabel:"\\det[+] [ pattern ]",detail:"Lists foreign tables"},{label:"\\deu",type:"function",displayLabel:"\\deu[+] [ pattern ]",detail:"Lists user mappings"},{label:"\\dew",type:"function",displayLabel:"\\dew[+] [ pattern ]",detail:"Lists foreign-data wrappers"},{label:"\\df",type:"function",displayLabel:"\\df[anptwS+] [ pattern [ arg_pattern ... ] ]",detail:"Lists functions"},{label:"\\dF",type:"function",displayLabel:"\\dF[+] [ pattern ]",detail:"Lists text search configurations"},{label:"\\dFd",type:"function",displayLabel:"\\dFd[+] [ pattern ]",detail:"Lists text search dictionaries"},{label:"\\dFp",type:"function",displayLabel:"\\dFp[+] [ pattern ]",detail:"Lists text search parsers"},{label:"\\dFt",type:"function",displayLabel:"\\dFt[+] [ pattern ]",detail:"Lists text search templates"},{label:"\\dg",type:"function",displayLabel:"\\dg[S+] [ pattern ]",detail:"Lists database roles"},{label:"\\dl",type:"function",displayLabel:"\\dl[+] ",detail:"List large objects"},{label:"\\dL",type:"function",displayLabel:"\\dL[S+] [ pattern ]",detail:"Lists procedural languages"},{label:"\\dn",type:"function",displayLabel:"\\dn[S+] [ pattern ]",detail:"Lists schemas"},{label:"\\do",type:"function",displayLabel:"\\do[S+] [ pattern [ arg_pattern [ arg_pattern ] ] ]",detail:"Lists operators with their operand and result types"},{label:"\\dO",type:"function",displayLabel:"\\dO[S+] [ pattern ]",detail:"Lists collations"},{label:"\\dp",type:"function",displayLabel:"\\dp[S] [ pattern ]",detail:"Lists tables, views and sequences with their associated access privileges"},{label:"\\dP",type:"function",displayLabel:"\\dP[itn+] [ pattern ]",detail:"Lists partitioned relations"},{label:"\\drds",type:"function",displayLabel:"\\drds [ role-pattern [ database-pattern ] ]",detail:"Lists defined configuration settings"},{label:"\\drg",type:"function",displayLabel:"\\drg[S] [ pattern ]",detail:"Lists information about each granted role membership"},{label:"\\dRp",type:"function",displayLabel:"\\dRp[+] [ pattern ]",detail:"Lists replication publications"},{label:"\\dRs",type:"function",displayLabel:"\\dRs[+] [ pattern ]",detail:"Lists replication subscriptions"},{label:"\\dT",type:"function",displayLabel:"\\dT[S+] [ pattern ]",detail:"Lists data types"},{label:"\\du",type:"function",displayLabel:"\\du[S+] [ pattern ]",detail:"Lists database roles"},{label:"\\dx",type:"function",displayLabel:"\\dx[+] [ pattern ]",detail:"Lists installed extensions"},{label:"\\dX",type:"function",displayLabel:"\\dX [ pattern ]",detail:"Lists extended statistics"},{label:"\\dy",type:"function",displayLabel:"\\dy[+] [ pattern ]",detail:"Lists event triggers"}];function Mb(n){const e=n.matchBefore(/\\\w*/);return!e||e.from===e.to?null:{from:e.from,options:Pb}}function Ub(n={}){const e=n.dialect||Bd;return new eT(e.language,[n.schema?e.language.data.of({autocomplete:P0(n)}):[],e.language.data.of({autocomplete:k0(e,!!n.upperCaseKeywords)}),e.language.data.of({autocomplete:Mb})])}async function Fb(n,e){if(n.trim().toLowerCase().startsWith("\\"))return Bb(n,e);const t=performance.now();try{const i=await e.exec(n,{rowMode:"array"}),s=performance.now()-t;return{query:n,results:i,time:s}}catch(i){return{query:n,error:i.message,time:performance.now()-t}}}async function Bb(n,e){const t=performance.now();let i,s;const{promise:o,cancel:a}=J0(n,"postgres",async c=>(s=(await e.exec(c,{rowMode:"array"}))[0],{rows:s.rows,fields:s.fields,rowCount:s.rows.length}),c=>{i=c});await o;const l=performance.now()-t;return i?typeof i=="string"?i.startsWith("ERROR:")?{query:n,error:i,time:l}:{query:n,text:i,time:l}:{query:n,text:i.title,results:[s],time:l}:{query:n,error:"No output",time:l}}async function Oh(n){const e=await n.query(`
    SELECT 
      table_schema AS schema,
      table_name AS table,
      array_agg(column_name) AS columns
    FROM 
      information_schema.columns
    GROUP BY 
      table_schema, table_name
    ORDER BY 
      table_schema, table_name;
  `),t={};for(const i of e.rows)t[`${i.schema}.${i.table}`]=Array.isArray(i.columns)?i.columns:i.columns.slice(1,-1).split(",");return t}const wo=100,Nh=200;function Hb(n){return n===null?"PGliteRepl-null":typeof n=="number"?"PGliteRepl-number":typeof n=="boolean"?"PGliteRepl-boolean":""}function qd(n){let e;return n===null?e="null":typeof n=="number"?e=n.toString():typeof n=="boolean"?e=n?"true":"false":n instanceof Date?e=n.toISOString():Array.isArray(n)?e=`[${n.map(qd).join(", ")}]`:typeof n=="object"?e=JSON.stringify(n):ArrayBuffer.isView(n)?e=`${n.byteLength} bytes`:n===void 0?e="undefined":e=n.toString(),e.length>Nh?e.slice(0,Nh)+"…":e}function Wb({result:n}){const[e,t]=Te.useState(wo),i=n.rows.slice(0,e);Te.useEffect(()=>{t(wo)},[n]);const s=()=>{t(o=>o+wo)};return he.jsxs(he.Fragment,{children:[he.jsx("div",{className:"PGliteRepl-table-scroll",children:he.jsxs("table",{className:"PGliteRepl-table",children:[he.jsx("thead",{children:he.jsx("tr",{children:n.fields.map(o=>he.jsx("th",{children:o.name},o.name))})}),he.jsx("tbody",{children:i.map((o,a)=>he.jsx("tr",{children:o.map((l,c)=>he.jsx("td",{className:Hb(l),children:qd(l)},c))},a))})]})}),he.jsxs("div",{className:"PGliteRepl-table-row-count",children:[n.rows.length>e?`${e} of `:"",n.rows.length," rows"," ",n.rows.length>e&&he.jsx("a",{href:"",onClick:o=>{o.preventDefault(),s()},children:"Show more"})]})]})}function Gb({result:n}){return he.jsx("div",{className:"PGliteRepl-line",children:n.fields.length>0?he.jsx(Wb,{result:n}):he.jsx("div",{className:"PGliteRepl-null",children:"null"})})}function Vb({response:n,showTime:e}){var t;let i;return n.error?i=he.jsx("div",{className:"PGliteRepl-line PGliteRepl-error",children:n.error}):i=he.jsx(he.Fragment,{children:(t=n.results)==null?void 0:t.map((s,o)=>he.jsx(Gb,{result:s},o))}),he.jsxs(he.Fragment,{children:[he.jsx("pre",{className:"PGliteRepl-line PGliteRepl-query",children:n.query}),n.text&&he.jsx("div",{className:"PGliteRepl-line PGliteRepl-text",children:n.text}),i,he.jsxs("div",{className:"PGliteRepl-divider",children:[he.jsx("hr",{}),e&&he.jsxs("div",{className:"PGliteRepl-time",children:[n.time.toFixed(1),"ms"]})]})]})}const qb=sd.filter(n=>n.key!=="Enter"),Yb=wb,jb=kb;function Xb({pg:n,border:e=!1,lightTheme:t=Yb,darkTheme:i=jb,theme:s="auto",showTime:o=!1,disableUpdateSchema:a=!1}){const[l,c]=Te.useState(""),h=Te.useRef(""),[f,u]=Te.useState(!0),[m,T]=Te.useState([]),y=Te.useRef(null),[b,E]=Te.useState({}),I=Te.useRef(-1),D=Te.useRef(null),[Y,V]=Te.useState(s==="dark"?i:t),[W,U]=Te.useState({}),q=bh(n);Te.useEffect(()=>{let Z=!1;const ee=async()=>{await q.waitReady,!Z&&u(!1)};return u(!0),ee(),()=>{Z=!0}},[q]),Te.useEffect(()=>{if(s==="auto"){const Z=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";V(Z==="dark"?i:t);const ee=pe=>{V(pe.matches?i:t),setTimeout(()=>{G()},0)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",ee),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",ee)}}else{V(s==="dark"?i:t),setTimeout(()=>{G()},0);return}},[s,t,i]);const ie=Te.useCallback((Z,ee)=>{G(),c(Z),I.current===-1&&(h.current=Z)},[]),z=Te.useMemo(()=>[us.of([{key:"Enter",preventDefault:!0,run:()=>l.trim()===""?!1:(Fb(l,q).then(Z=>{T(ee=>[...ee,Z]),y.current&&setTimeout(()=>{y.current.scrollTop=y.current.scrollHeight},0),a||Oh(q).then(E)}),I.current=-1,h.current="",c(""),!0)},{key:"ArrowUp",run:Z=>{const ee=Z.state;if(ee.doc.lineAt(ee.selection.main.head).number===1){const ue=I.current;return I.current++,I.current>=m.length&&(I.current=m.length-1),I.current<-1&&(I.current=-1),I.current===ue||(I.current===-1?c(h.current):c(m[m.length-I.current-1].query)),!0}return!1}},{key:"ArrowDown",run:Z=>{const ee=Z.state,pe=ee.doc.lineAt(ee.selection.main.head).number,ue=ee.doc.lines;if(pe===ue){const Re=I.current;return I.current--,I.current>=m.length&&(I.current=m.length-1),I.current<-1&&(I.current=-1),I.current===Re||(I.current===-1?c(h.current):c(m[m.length-I.current-1].query)),!0}return!1}},...qb]),Ub({dialect:Bd,schema:b,tables:[{label:"d",displayLabel:"\\d"}],defaultSchema:"public"})],[q,b,l,m,a]),G=()=>{var Z,ee;const pe=(ee=(Z=D.current)==null?void 0:Z.editor)==null?void 0:ee.querySelector(".cm-editor");if(!pe)throw new Error("No CodeMirror editor found");const ue=pe.querySelector(".cm-gutters"),Re=window.getComputedStyle(pe),xe=Re.color,Oe=Re.backgroundColor,ye=window.getComputedStyle(ue),Ce=ye.borderRight,Le=parseInt(ye.borderRightWidth)||0,Xe=Le?ye.borderRightColor:xe.replace("rgb","rgba").replace(")",", 0.15)"),rt=Le?ye.borderRight:`1px solid ${Xe}`;U({"--PGliteRepl-foreground-color":xe,"--PGliteRepl-background-color":Oe,"--PGliteRepl-border":rt,"--PGliteRepl-gutter-border":Ce,"--PGliteRepl-border-color":Xe})};return he.jsxs("div",{className:`
      PGliteRepl-root
      ${e?"PGliteRepl-root-border":""}
    `,style:W,children:[he.jsxs("div",{className:"PGliteRepl-output",ref:Z=>y.current=Z,children:[f&&he.jsx("div",{className:"PGliteRepl-loading-msg",children:"Loading..."}),m.map(Z=>he.jsx("div",{children:he.jsx(Vb,{response:Z||[],showTime:o})},`${Z.query}-${Z.time}`))]}),he.jsx(xd,{ref:D,className:`PGliteRepl-input ${f?"PGliteRepl-input-loading":""}`,width:"100%",value:l,basicSetup:{defaultKeymap:!1},extensions:z,theme:Y,onChange:ie,editable:!f,onCreateEditor:()=>{G(),setTimeout(G,0),Oh(q).then(E)}})]})}const Jb=()=>{const n=bh();return he.jsx("div",{className:"container p-4 mx-auto",children:he.jsxs(yh,{className:"w-full max-w-4xl mx-auto",children:[he.jsx(Ch,{children:he.jsx(Lh,{className:"text-2xl font-bold",children:"PostgreSQL In-Memory REPL"})}),he.jsx(Ih,{children:he.jsx("div",{className:"space-y-4",children:he.jsx("div",{className:"p-4 border-2 border-gray-300 border-dashed rounded-lg min-h-48",children:he.jsx(Xb,{pg:n})})})})]})})};export{Jb as default};
